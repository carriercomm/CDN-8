(itiny2_modified_5
CachedResponse
p0
(dp1
S'softspace'
p2
I0
sS'buflist'
p3
(lp4
sS'url'
p5
S'http://qsc.is.quoracdn.net/-be4833cdfe3e075f.js'
p6
sS'pos'
p7
I0
sS'len'
p8
I407431
sS'headers'
p9
(ihttplib
HTTPMessage
p10
(dp11
S'fp'
p12
NsS'status'
p13
S''
p14
sS'startofbody'
p15
NsS'startofheaders'
p16
NsS'subtype'
p17
S'javascript'
p18
sS'type'
p19
S'text/javascript'
p20
sS'maintype'
p21
S'text'
p22
sg9
(lp23
S'Content-Type: text/javascript;charset=utf-8\r\n'
p24
aS'Content-Length: 407431\r\n'
p25
aS'Connection: close\r\n'
p26
aS'Accept-Ranges: bytes\r\n'
p27
aS'x-amz-id-2: /GD+unyu328ZJK4cpdbPbfOm7HRoCxB3pOMStRG5qs7LMSzSlcpi3tWAdnzHnSGj\n'
p28
aS'x-instart-request-id: 6082121523526125390:OBZ02-NPPRY01:1399882787:34\n'
p29
aS'expires: Sun, 17 Jan 2038 19:14:07 GMT\n'
p30
aS'x-instart-cache-id: 6256689801882876366\n'
p31
aS'last-modified: Fri, 09 May 2014 21:06:17 GMT\n'
p32
aS'x-amz-request-id: C49C665261F06B8C\n'
p33
aS'etag: "6aa7ebf3c513fa9114cc70e37ca9361f"\n'
p34
aS'cache-control: public, max-age=315360000\n'
p35
aS'date: Fri, 09 May 2014 21:25:04 GMT\n'
p36
aS'server: AmazonS3\n'
p37
aS'x-urllib2-cache: Stored\n'
p38
asS'dict'
p39
(dp40
S'content-length'
p41
S'407431'
p42
sS'x-urllib2-cache'
p43
S'Stored'
p44
sS'x-amz-id-2'
p45
S'/GD+unyu328ZJK4cpdbPbfOm7HRoCxB3pOMStRG5qs7LMSzSlcpi3tWAdnzHnSGj'
p46
sS'accept-ranges'
p47
S'bytes'
p48
sS'expires'
p49
S'Sun, 17 Jan 2038 19:14:07 GMT'
p50
sS'x-instart-cache-id'
p51
S'6256689801882876366'
p52
sS'last-modified'
p53
S'Fri, 09 May 2014 21:06:17 GMT'
p54
sS'connection'
p55
S'close'
p56
sS'x-amz-request-id'
p57
S'C49C665261F06B8C'
p58
sS'etag'
p59
S'"6aa7ebf3c513fa9114cc70e37ca9361f"'
p60
sS'cache-control'
p61
S'public, max-age=315360000'
p62
sS'date'
p63
S'Fri, 09 May 2014 21:25:04 GMT'
p64
sS'server'
p65
S'AmazonS3'
p66
sS'content-type'
p67
S'text/javascript;charset=utf-8'
p68
sS'x-instart-request-id'
p69
S'6082121523526125390:OBZ02-NPPRY01:1399882787:34'
p70
ssS'typeheader'
p71
g68
sS'encodingheader'
p72
NsS'seekable'
p73
I0
sS'unixfrom'
p74
g14
sS'plisttext'
p75
S';charset=utf-8'
p76
sS'plist'
p77
(lp78
S'charset=utf-8'
p79
asbsS'code'
p80
I200
sS'closed'
p81
I00
sS'msg'
p82
S'OK'
p83
sS'buf'
p84
S'/*\nName: main-pre2.js\nURL: http://qsf.cf.quoracdn.net/-be4833cdfe3e075f.js\nGenerated: 1399669557061227\nFiles: /webnode2.js, /spin.js, /jquery.whenIdle.js, /w2.livenode.js, /w2.errors.js, /e2e.js, /window_manager.js, /w2.rpc.js, /w2.quora.js, /app/view/board/settings.js, /app/view/question/question_alias.js, /app/view/report.js, /view/toggle.js, /app/view/user/profile.js, /app/view/question/not_helpful.js, /view/filterable_list.js, /facebook.js, /view/upload.js, /app/view/pmsg/all.js, /app/view/board/submission.js, /app/view/contact_browser.js, /view/announcement.js, /app/view/login.js, /app/view/question/suggested_answer.js, /app/view/photo.js, /app/view/beta.js, /app/view/board/dialog.js, /app/view/thanks.js, /app/view/tumblr.js, /app/view/question/talk_page.js, /app/view/related.js, /app/view/topic/top_answerers.js, /app/view/comment.js, /action_log.js, /view/inline_editor.js, /app/view/instructions_wiki.js, /view/datetime_.js, /app/view/suggested_questions.js, /app/view/topic/topic_editor.js, /app/view/oauth.js, /app/view/linkedin_.js, /view/swf.js, /keystrokes.js, /view/invisibleinfo.js, /app/view/topic_tagger.js, /app/view/announcement.js, /app/view/board/view_tracker.js, /view/board_selector.js, /view/hover_menu.js, /view/user.js, /app/view/review_topics.js, /view/object_browser.js, /view/fixable.js, /app/view/layout.js, /app/view/social.js, /app/view/read_later.js, /app/view/syndicate.js, /app/view/review.js, /view/qtext_editor.js, /app/view/static.js, /app/view/answer_wiki.js, /view/suggested_edits.js, /app/view/question/move_answer.js, /app/view/shuffle.js, /app/view/topic/topic_create.js, /app/view/question/reviews.js, /app/view/suggested_sig.js, /view/photo.js, /app/view/question/add_answer.js, /app/view/review_answers.js, /app/view/post/post_distribution.js, /app/view/question/disclaimer.js, /app/view/question/question_redirect.js, /app/view/context.js, /app/view/components.js, /qed/util.js, /qed/unload.js, /app/view/link.js, /app/view/home/home_invite.js, /app/view/board/item.js, /view/topic_selector.js, /app/view/pmsg/pmsg.js, /app/view/mobile_debug.js, /app/view/admin.js, /app/view/suggested_photo.js, /app/view/vc.js, /app/view/widgets.js, /app/view/question/answer_tag.js, /app/view/promote.js, /app/view/thread.js, /app/view/review_names.js, /app/view/topic/topic_ontology.js, /app/view/draft.js, /app/view/board/follow.js, /app/view/question/answer_flag.js, /view/mobile.js, /view/notif.js, /init.js, /oauth.js, /twitter.js, /google_.js, /login.js, /qtext.js, /email.js, /mobile.js, /view/voter_list.js, /view/paged_list.js, /app/view/share.js, /app/view/threaded_comments.js, /inspector.js, /w2.inspector.js, /perf.js, /view/embed_editor.js, /view/trackback.js, /app/view/inbox.js, /app/view/messages.js, /app/view/review_topic_experts.js, /app/view/question/wanted_answer.js, /app/view/board.js, /app/view/topic/topic_list.js, /app/view/topic/topic_redesign.js, /app/view/signup/email_invite.js, /app/view/share/form.js, /app/view/share/dialog.js, /app/view/layout/mobile.js, /app/view/nux.js, /app/view/nux/welcome.js, /app/view/nux/dialog.js, /app/view/nux/find_friends.js, /app/view/top_writers.js, /app/view/group.js, /app/view/experimental/answer_prompt.js, /app/view/user/setup_.js, /view/toggle_list.js, /internal/view/app.js, /main-pre2.js\n*/\nrec(\'package\', \'Start\', \'main-pre2.js\');require.install("webnode2",function(require,exports,module){(function(){function addParents(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=a[b],W2._parents[b]=c,typeof W2._allChildren[c]=="undefined"&&(W2._allChildren[c]=[]),W2._allChildren[c].push(b),typeof W2._children[b]=="undefined"&&(W2._children[b]={}),typeof W2._knowsAbout[b]=="undefined"&&(W2._knowsAbout[b]={}))}function addGroups(a){var b,c,d,e,f;for(d in a)if(a.hasOwnProperty(d)){b=a[d],f=b.length;for(e=0;e<f;e++)c=b[e],W2._groups[d]||(W2._groups[d]=[]),W2._groups[d].push(c),W2._componentGroups[c]||(W2._componentGroups[c]=[]),W2._componentGroups[c].push(d)}}function addChildren(a){var b;for(b in a)a.hasOwnProperty(b)&&jQuery.extend(W2._children[b],a[b])}function addLookups(a){var b;for(b in a)a.hasOwnProperty(b)&&jQuery.extend(W2._knowsAbout[b],a[b])}function addDomids(a){var b,c;for(b in a)a.hasOwnProperty(b)&&(W2._domidToCid[W2._domids[b]=a[b]]=b)}function addDebugInfo(a){var b,c=require("w2.timing").timing;for(b in a)a.hasOwnProperty(b)&&(W2._debugInfo[b]=a[b]),c._components&&(c._components[b]||(c._components[b]={}),c._components[b].addDebugInfo=+(new Date))}function addComponentMetadata(a){var b=a.parents,c=a.children,d=a.knowsAbout,e=a.groups,f=a.debugInfo,g=a.domids;W2.addParents(b),W2.addChildren(c),W2.addLookups(d),W2.addGroups(e),W2.addDomids(g),f&&W2.addDebugInfo(f),$(document).trigger("w2addcomponents",a),$(document).trigger("webnode_add_component_metadata",a)}function addLiveDepInfo(a,b){for(var c in a)a.hasOwnProperty(c)&&(W2._liveDepInfo[c]=a[c]);for(var d in b)b.hasOwnProperty(d)&&(W2._depKeysBreakpointTokens[d]=b[d])}function _removeComponentMetadata(a){log.enabled&&log("webnode2._removeComponentMetadata","Removing",a);var b,c,d,e,f,g,h,i;$(document).trigger("webnode_before_remove_component_metadata",a),b=W2._parents[a],c=W2._allChildren[b],c&&c.length!=0&&log.enabled&&log.error("webnode2._removeComponentMetadata","Non-empty childrenCids for cid ==",a,"; childrenCids =",c),f=W2._components[a];if(f){g=f.cname;if(g){var j=W2._children[b];j&&j[g]==a&&delete j[g]}removeEntry(f)}d=W2._componentGroups[a];if(d)for(h=0;h<d.length;h++){e=d[h];for(i=0;i<W2._groups[e];i++)if(W2._groups[e][i]==a){W2._groups[e].splice(i,1);break}}delete W2._componentGroups[a],delete W2._components[a],delete W2._parents[a],delete W2._allChildren[a],delete W2._children[a],delete W2._knowsAbout[a],delete W2._domidToCid[W2._domids[a]],delete W2._domids[a],delete W2._debugInfo[a],delete W2._onVisibleComponents[a],delete onLoadStatus[a],delete onLoadCallbacks[a],$(document).trigger("webnode_after_remove_component_metadata",a)}function getLiveDomId(a){return W2._domids[a]}function getComponentFromElement(a){while(a&&!(a.id in W2._domidToCid))a=a.parentNode;return a&&W2._components[W2._domidToCid[a.id]]}function getLiveParent(a){return W2._domids[a]?W2._domids[a]:W2._parents[a]?getLiveParent(W2._parents[a]):""}function getLiveChildren(a){var b=W2._allChildren[a],c=[];if(b)for(var d=0;d<b.length;++d)b[d]in W2._domids&&c.push(W2._domids[b[d]]);return c}function registerComponents(a){var b=[],c,d,e=require("w2.timing").timing;for(c=0;c<a.length;c++)d=a[c],log.enabled&&log("webnode2.registerComponents","Registering",d.cid),W2._components[d.cid]=d,d.onVisible&&(W2._onVisibleComponents[d.cid]=d,b.push(d));if(require("visibility").isVisible())for(c=0;c<b.length;c++){d=b[c];var f=+(new Date);try{d.onVisible()}catch(g){assert(!1)}e.components&&(e.components[d.cid]||(e.components[d.cid]={}),e.components[d.cid].v=+(new Date)-f)}return a}function hasEntry(a){return a.__js_key in stateEntries}function getEntry(a){var b=a.__js_key;return stateEntries[b]||(stateEntries[b]={ownerCid:a.cid,state:{}})}function removeEntry(a){var b=a.cid;if(!a.__js_key||a.__js_key===b){var c=stateEntries[b];c&&c.ownerCid===b&&delete stateEntries[b]}}function flushOnLoadCallbacks(a){var b,c=a.cid,d=onLoadCallbacks[c];if(d){d.reverse();while(b=d.pop())b()}}function cidFromMyId(a){var b=_my_exp.exec(a),c=b&&b[1];return assert(!c||c in W2._components),c}function onLoad(a,b){var c,d,e,f,g=[],h=require("w2.timing").timing;rec("webnode2","onLoad","start");for(c=0;c<a.length;c++){f=a[c],onLoadStatus[f.cid]=ONLOAD_BEGUN;var i=+(new Date);if(settings.componentDebug)f.bindEvents(),f.onLoad(b),onLoadStatus[f.cid]=ONLOAD_DONE,flushOnLoadCallbacks(f);else if(window.log&&log.enabled)f.bindEvents(),f.onLoad(b),onLoadStatus[f.cid]=ONLOAD_DONE,flushOnLoadCallbacks(f);else try{f.bindEvents(),f.onLoad(b),onLoadStatus[f.cid]=ONLOAD_DONE,flushOnLoadCallbacks(f)}catch(d){g.push({component:f,exception:d})}h.components&&(h.components[f.cid]||(h.components[f.cid]={}),h.components[f.cid].l=+(new Date)-i)}rec("webnode2","onLoad","finish"),a.length>0&&jQuery.isFunction(window._w2replay)&&window._w2replay(function(a,b){var c=!0;for(var d,e=a;e;e=e.parentNode)if(d=cidFromMyId(e.id))break;return d&&(onLoadStatus[d]===ONLOAD_DONE?jQuery(a).trigger(b):c=!1),c}),rec("webnode2","replay","finish");if(g.length){var j=[];for(c=0;c<g.length;++c)d=g[c].exception,e=g[c].component.cid+": "+(d.stack?d.stack:d),j.push(e);throw $.serverLog(g.length+" component(s) threw during onLoad","ERROR",j.join(", ")),g[0].exception}return a}function onVisible(){var a,b,c=[],d,e=require("w2.timing").timing;for(a in W2._onVisibleComponents){b=W2._onVisibleComponents[a];if(b!=W2._components[a])continue;var f=+(new Date);try{b.onVisible()}catch(g){c.push({component:b,exception:g})}e.components&&(e.components[a]||(e.components[a]={}),e.components[a].v=+(new Date)-f)}if(d=c.length)throw $.serverLog(d+" component(s) threw during onVisible","ERROR",c),c}function _CIDLookup(a,b){var c;return a&&a!="*ROOT*"?(require("assert").ok(W2._knowsAbout[a]),c=W2._knowsAbout[a][b],typeof c!="undefined"?_cQueryByCID(a,c):_CIDLookup(W2._parents[a],b)):null}function _safeGetComponentByCID(a){var b;return a?(b=W2._components[a],b?b:new VirtualComponent(a)):null}function _cQueryByCID(a,b){var c,d,e,f,g,h,i,j,k,l;if(b==".")return a;c=[],d="",e="first";for(f=0;f<b.length;f++)g=b.charAt(f),g=="."?(c.push([e,d]),d="",e="child"):g==":"?(c.push([e,d]),d="",e="lookup"):g=="<"?(c.push([e,d]),d="",e="parent"):d+=g;c.push([e,d]),h=a;for(f=0;f<c.length;f++){j=c[f],i=j[0],k=j[1];if(i=="first"){if(k){l=W2._children[h];if(!l)return null;h=l[k];if(!h)throw new W2Error("Couldn\'t find child \'"+k+"\' in cQuery \'"+b+"\'",a)}if(!h)throw new W2Error("Started from an invalid node \'"+h+"\' in cQuery \'"+b+"\'",a)}else if(i=="child"){l=W2._children[h];if(!l)return null;h=l[k];if(!h)throw new W2Error("Couldn\'t find child \'"+k+"\' in cQuery \'"+b+"\'",a)}else if(i=="lookup"){h=_CIDLookup(h,k);if(!h)throw new W2Error("Lookup failed for \'"+k+"\' in cQuery \'"+b+"\'",a)}else{if(i!="parent")throw new W2Error("Bad token in Component query. \'"+i+"\'",a);h=W2._parents[h];if(!h||h=="*ROOT*")throw new W2Error("No parent found in cQuery \'"+b+"\'",a)}if(!h)throw new W2Error("Unknown Error in cQuery: \'"+b+"\'",a)}return h}function W2Error(a,b){this.message=this.errorType+": "+a,b&&(this.message+=" <cid="+b+">")}function _assertIDs(a,b){if(a.nodeType!=3){a.id&&(a.id in b&&assert(a===b[a.id]),b[a.id]=a);for(var c=a.firstChild;c;c=c.nextSibling)_assertIDs(c,b)}return b}var W2=exports,log=require("log").log,settings=require("settings"),keycombo=require("w2.keycombo"),Component,VirtualComponent,setContent,setContentHTML,setContentJS;W2._parents={},W2._components={},W2._onVisibleComponents={},W2._children={},W2._knowsAbout={},W2._allChildren={},W2._domids={},W2._domidToCid={},W2._debugInfo={},W2._liveDepInfo={},W2._depKeysBreakpointTokens={},W2._ignoreDomids={},W2._ignoreCids={},W2._groups={},W2._componentGroups={},W2._GROUP_RE=/%([0-9a-zA-Z_]+)/,W2._keyComboHandlers={};var stateEntries={},Component=require("Class").Class.extend({__init__:function(a,b,c,d,e){this.cid=a,this.cname=b,d?this.__vcon=d.split(":"):this.__vcon=null,this.__js_init=c,this.__js_key=e.js_key||a;if(d&&hasEntry(this)){var f=getEntry(this);assert(f.ownerCid!==this.cid),f.ownerCid=this.cid}return this.init(c),this},init:function(a){var b;if(typeof a=="object")for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);return this},whenOnLoaded:function(a){var b=this.cid;if(onLoadStatus[b]===ONLOAD_DONE)a();else{var c=onLoadCallbacks[b]||[];c.push(a),onLoadCallbacks[b]=c}},state:function(a,b){var c=getEntry(this),d=c.state,e=W2._components[c.ownerCid]||this,f=e.stateHandlers[a],g=f?d[a]=f.call(e):d[a];return arguments.length>1&&(d[a]=b,f&&f.call(e,b)),g},stateHandlers:{},initState:function(a,b){var c=getEntry(this),d=c.state,e=W2._components[c.ownerCid]||this;return e.state(a,a in d?d[a]:b)},child:function(a){var b,c;return c=W2._children[this.cid],c&&(b=c[a]),_safeGetComponentByCID(b)},children:function(){var a=W2._allChildren[this.cid],b=[],c;if(!a)return b;for(c=0;c<a.length;c++)b.push(_safeGetComponentByCID(a[c]));return b},parent:function(){var a;return a=W2._parents[this.cid],_safeGetComponentByCID(a)},getJQueryObject:function(){return $("#"+W2.getLiveParent(this.cid))},installScrollHandlers:function(a){this._scrollHandler=this.fnbind(a),$(window).scroll(this._scrollHandler)},uninstallScrollHandlers:function(){this._scrollHandler&&$(window).unbind("scroll",this._scrollHandler)},clickHandlers:{},mouseDownHandlers:{},mouseUpHandlers:{},mouseOverHandlers:{},mouseOutHandlers:{},installMouseHandlers:function(){var a=this,b={clickHandlers:"click",mouseDownHandlers:"mousedown",mouseUpHandlers:"mouseup",mouseOverHandlers:"mouseover",mouseOutHandlers:"mouseout"};for(var c in b){var d=b[c],e=this[c];for(var f in e)(function(b){var c=e[b];a.$("#@"+b).bind(d,function(b){return b.preventDefault(),c.call(a,b)})})(f)}},onKeyCombination:function(a,b,c,d,e){if(!require("settings").keyboardShortcuts||!$(a).length)return;if(!d){var f=$(a);while(f.length&&!f.hasClass("kbfocusable"))f=f.parent();d=f.get(0)||document.body}keycombo.bindKeyComboHandler(d,b,c,e)?(W2._keyComboHandlers[this.cid]=W2._keyComboHandlers[this.cid]||[],W2._keyComboHandlers[this.cid].push([b,d])):log.enabled&&log.trace("webnode2.onKeyCombination","Duplicate handler ignored",this.cid,b,d)},uninstallKeyComboHandlers:function(){var a=W2._keyComboHandlers[this.cid]||[];for(var b=a.pop();b;b=a.pop())keycombo.unbindKeyComboHandler(b[0],b[1])},lookup:function(a,b){try{var c=_CIDLookup(this.cid,a);return _safeGetComponentByCID(c)}catch(d){if(!b)throw d}},cQuery:function(a){var b;return b=_cQueryByCID(this.cid,a),_safeGetComponentByCID(b)},$:function(a){var b,c,d;b=this._my();if(typeof a=="string"){a=a.replace(/@/g,b);while(a.indexOf("%")!=-1)if(c=W2._GROUP_RE.exec(a)){d=W2._groups[c[1]];if(typeof d=="undefined")return $([]);a=a.replace(c[0],"#"+d.join(",#"))}}return $(a)},_my:function(){return"__w2_"+this.cid+"_"},__children:function(){return W2._children[this.cid]},__allChildren:function(){return W2._allChildren[this.cid]},__parent:function(){return W2._parents[this.cid]},__knowsAbout:function(){return W2._knowsAbout[this.cid]},ge:function(a){return document.getElementById(a.replace("@",this._my()))},onLoad:function(a){},bindEvents:function(){var a=this.events;if(!a)return;for(var b in a){var c=b.indexOf(" ");c>-1&&this.bindEvent(b.slice(0,c),b.slice(c+1),a[b])}},bindEvent:function(a,b,c){var d=this;typeof c=="string"&&(c=d[c]),assert(typeof a=="string"),assert(typeof b=="string"),assert(typeof c=="function"),d.$(b)[a](function(){return log.enabled&&log("webnode2.Component.bindEvent","On "+a+", invoking",c),c.apply(d,arguments)})},onUnload:function(){},onInsertNode:function(a,b){return!0},onDeleteNode:function(a,b){return!0},onUpdate:function(a){return!0},serverCall:function(a){if(!this.__vcon)throw new W2Error("No vcon info for Component <cid="+this.cid+">");log.enabled&&log.trace("webnode2.Component.serverCall",a,this.__vcon);switch(this.__vcon[0]){case"cls":return new W2._ServerCall(this.__vcon,a,this);case"live":return new W2._ServerCall(this.__vcon.slice(2),a,this);case"hmac":return new W2._ServerCall(this.__vcon,a,this);default:throw new W2Error("Unknown vcon type \'"+this.__vcon[0]+"\'")}},bind:function(a,b){if("length"in this)throw new W2Error("Cannot bind an event for Component with length property",this);$(this).bind(a,b)},trigger:function(a){$(this).trigger(a,Array.prototype.slice.call(arguments,1))}}),onLoadStatus={},ONLOAD_BEGUN=1,ONLOAD_DONE=2,onLoadCallbacks={},_my_exp=/^__w2_((?:[^_]+_)?[^_]+)/;VirtualComponent=Component.extend({__init__:function(a){this._super(a,null,{},null,{}),this.isVirtual=!0}}),W2Error.prototype=new Error,W2Error.prototype.errorType="W2Error",W2Error.prototype.contstructor=W2Error;var setContent=function(a,b){return setContentHTML(a,b),setContentJS(a,b),a},setContentHTML=function(a,b){return a.innerHTML=b.html,delete b.html,a},setContentJS=function(node,content){return eval(content.js),delete content.js,node},unloaded={},unloadComponent=function(a){log.enabled&&log("webnode2.unloadComponent","Unloading:",a);try{var b=W2._components[a],c=undefined;if(b!=null)try{b.onUnload(),b.uninstallKeyComboHandlers()}catch(d){c===undefined&&(c=d)}var e=W2._allChildren[a];while(e!=null&&e.length!=0){var f=e.pop();try{W2.unloadComponent(f)}catch(d){c===undefined&&(c=d)}}_removeComponentMetadata(a)}finally{unloaded[a]=!0,log.enabled&&(log("webnode2.unloadComponent","Unloaded:",a),validateUnload(a));if(c!==undefined)throw c}};W2.assertUnloaded=function(a){assert(a in unloaded)};var validateUnload=function(a){var b=a in W2._componentGroups||a in W2._components||a in W2._parents||a in W2._allChildren||a in W2._children||a in W2._knowsAbout||a in W2._domids||a in W2._debugInfo||a in W2._onVisibleComponents||a in onLoadStatus||a in onLoadCallbacks;b&&log.enabled&&log.error("webnode2.unloadComponent","Component unload checker has detected an error:",a,"wasn\'t cleaned up properly.")};W2.addParents=addParents,W2.addChildren=addChildren,W2.addLookups=addLookups,W2.addDebugInfo=addDebugInfo,W2.addLiveDepInfo=addLiveDepInfo,W2.addGroups=addGroups,W2.addDomids=addDomids,W2.registerComponents=registerComponents,W2.getComponentFromElement=getComponentFromElement,W2.getLiveDomId=getLiveDomId,W2.getLiveParent=getLiveParent,W2.getLiveChildren=getLiveChildren,W2.Component=Component,W2.VirtualComponent=VirtualComponent,W2.onLoad=onLoad,W2.onVisible=onVisible,W2.addComponentMetadata=addComponentMetadata,W2._safeGetComponentByCID=_safeGetComponentByCID,W2.W2Error=W2Error,W2.setContent=setContent,W2.setContentHTML=setContentHTML,W2.setContentJS=setContentJS,W2._removeComponentMetadata=_removeComponentMetadata,W2.unloadComponent=unloadComponent,W2.C=W2._components,W2._stateEntries=stateEntries,W2._onLoadStatus=onLoadStatus,W2._onLoadCallbacks=onLoadCallbacks,W2.assertAllIDsUnique=function(a){return _assertIDs(a||document.body,{})}})(),exports.__W2_ExampleJSComponent=exports.Component.extend({init:function(a){this.dataFromPython=a},onLoad:function(){a1ert("Hello webnode2!")}})}),require.install("spin",function(require,a,b){(function(c,d){typeof a=="object"?b.exports.Spinner=d():typeof define=="function"&&define.amd?define(d):c.Spinner=d()})(this,function(){function d(a,b){var c=document.createElement(a||"div"),d;for(d in b)c[d]=b[d];return c}function e(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function g(a,d,e,g){var h=["opacity",d,~~(a*100),e,g].join("-"),i=.01+e/g*100,j=Math.max(1-(1-a)/d*(100-i),a),k=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=k&&"-"+k+"-"||"";return b[h]||(f.insertRule("@"+l+"keyframes "+h+"{"+"0%{opacity:"+j+"}"+i+"%{opacity:"+a+"}"+(i+.01)+"%{opacity:1}"+(i+d)%100+"%{opacity:"+a+"}"+"100%{opacity:"+j+"}"+"}",f.cssRules.length),b[h]=1),h}function h(b,c){var d=b.style,e,f;c=c.charAt(0).toUpperCase()+c.slice(1);for(f=0;f<a.length;f++){e=a[f]+c;if(d[e]!==undefined)return e}if(d[c]!==undefined)return c}function i(a,b){for(var c in b)a.style[h(a,c)||c]=b[c];return a}function j(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]===undefined&&(a[d]=c[d])}return a}function k(a){var b={x:a.offsetLeft,y:a.offsetTop};while(a=a.offsetParent)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function l(a,b){return typeof a=="string"?a:a[b%a.length]}function n(a){if(typeof this=="undefined")return new n(a);this.opts=j(a||{},n.defaults,m)}function o(){function a(a,b){return d("<"+a+\' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">\',b)}f.addRule(".spin-vml","behavior:url(#default#VML)"),n.prototype.lines=function(b,c){function g(){return i(a("group",{coordsize:f+" "+f,coordorigin:-d+" "+ -d}),{width:f,height:f})}function m(b,f,h){e(j,e(i(g(),{rotation:360/c.lines*b+"deg",left:~~f}),e(i(a("roundrect",{arcsize:c.corners}),{width:d,height:c.width,left:c.radius,top:-c.width>>1,filter:h}),a("fill",{color:l(c.color,b),opacity:c.opacity}),a("stroke",{opacity:0}))))}var d=c.length+c.width,f=2*d,h=-(c.width+c.length)*2+"px",j=i(g(),{position:"absolute",top:h,left:h}),k;if(c.shadow)for(k=1;k<=c.lines;k++)m(k,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(k=1;k<=c.lines;k++)m(k);return e(b,j)},n.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}"use strict";var a=["webkit","Moz","ms","O"],b={},c,f=function(){var a=d("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),m={lines:12,length:4,width:2,radius:5,rotate:0,corners:1,color:"#999",direction:1,speed:1,trail:70,opacity:.25,fps:30,zIndex:999,className:"__q_spinner",top:"auto",left:"auto",position:"relative"};n.defaults={},j(n.prototype,{spin:function(a){this.stop();var b=this,e=b.opts,f=b.el=i(d(0,{className:e.className}),{position:e.position,width:0,zIndex:e.zIndex}),g=e.radius+e.length+e.width,h,j;a&&(a.insertBefore(f,a.firstChild||null),j=k(a),h=k(f),i(f,{left:(e.left=="auto"?j.x-h.x+(a.offsetWidth>>1):parseInt(e.left,10)+g)+"px",top:(e.top=="auto"?j.y-h.y+(a.offsetHeight>>1):parseInt(e.top,10)+g)+"px"})),f.setAttribute("role","progressbar"),b.lines(f,b.opts);if(!c){var l=0,m=(e.lines-1)*(1-e.direction)/2,n,o=e.fps,p=o/e.speed,q=(1-e.opacity)/(p*e.trail/100),r=p/e.lines;(function s(){l++;for(var a=0;a<e.lines;a++)n=Math.max(1-(l+(e.lines-a)*r)%p*q,e.opacity),b.opacity(f,a*e.direction+m,n,e);b.timeout=b.el&&setTimeout(s,~~(1e3/o))})()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=undefined),this},lines:function(a,b){function k(a,c){return i(d(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*f+b.rotate)+"deg) translate("+b.radius+"px"+",0) scale(1)",borderRadius:(b.corners*b.width>>1)+"px"})}var f=0,h=(b.lines-1)*(1-b.direction)/2,j;for(;f<b.lines;f++)j=i(d(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:c&&g(b.opacity,b.trail,h+f*b.direction,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&e(j,i(k("#000","0 0 4px #000"),{top:"2px"})),e(a,e(j,k(l(b.color,f),"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var p=i(d("group"),{behavior:"url(#default#VML)"});return!h(p,"transform")&&p.adj?o():c=h(p,"animation"),n})}),require.install("jquery.whenIdle",function(require,a,b){(function(a,b,undefined){var c=a.log,d=2e3,e=!1,f=!1,g=!1,h=[],i=[],j=function(a){for(var b=0;b<a.length;b++)setTimeout(a[b],0);a.length=0};b.loaded||(b.loaded=function(a){a()}),b.loaded(function(){b(document).ready(function(){c&&c.enabled&&c("jquery.whenIdle","Ready event fired."),e=!0,setTimeout(function(){c&&c.enabled&&c("jquery.whenIdle","Idle event fired, flushing queue."),f=!0,j(h)},d)}),document.readyState=="complete"?setTimeout(function(){c&&c.enabled&&c("jquery.whenIdle","Load event has already fired, flushing queue."),g=!0,j(h),j(i)},0):b(window).load(function(){c&&c.enabled&&c("jquery.whenIdle","Load event fired, flushing queue."),g=!0,j(h),j(i)})}),b.whenIdle=function(a,d,i,j){if(a==null||a<0)a=0;b.isFunction(d)&&(j=i,i=d,d=null);if(d!=null&&a>d)throw"minDelay > maxDelay.";c&&c.enabled&&j&&c("jquery.whenIdle.whenIdle","Scheduling",j,"; delays: min =",a,"max =",d),b.loaded(function(){var k=!1,l=function(){if(k)return;k=!0,c&&c.enabled&&j&&c("jquery.whenIdle.whenIdle","Executing",j),i()};if(f||g){setTimeout(l,0);return}if(e){setTimeout(l,a);return}h.push(l),b(document).ready(function(){setTimeout(l,a)}),d!=null&&setTimeout(l,d)})},b.whenLoaded=function(a,d,e,f){if(a==null||a<0)a=0;b.isFunction(d)&&(f=e,e=d,d=null);if(d!=null&&a>d)throw"minDelay > maxDelay.";c&&c.enabled&&f&&c("jquery.whenIdle.whenLoaded","Scheduling",f,"; delays: min =",a,"max =",d),b.loaded(function(){var h=!1,j=function(){if(h)return;h=!0,c&&c.enabled&&f&&c("jquery.whenIdle.whenLoaded","Executing",f),e()};if(g){setTimeout(j,0);return}i.push(j),b(window).load(function(){setTimeout(j,a)}),d!=null&&setTimeout(j,d)})}})(this,jQuery)}),require.install("w2.livenode",function(require,a,b){function k(a,b,c){if(b in a&&!(c in a))return a[c]=a[b],delete a[b],!0}function l(a){var b={},c;return $("#"+a+" [w2cid]").each(function(a,d){c=d.getAttribute("w2cid"),b[c]=d}),b}function m(a,b){var c=$("#"+a)[0],d=b;while(d&&d.parentNode!==c)d=d.parentNode;for(var e=0;e<c.childNodes.length;e++)if(c.childNodes[e]===d)return e}function n(a){var b={};return $.each(a,function(a,c){if(c.domid in b)return;var d=l(c.domid);b[c.domid]=d}),b}function o(a){var b=c.interactionMode._changedComponents[a];return b&&b!=c.interactionMode._states.OFF}function p(a){var b={};for(var c in a){var d=a[c];for(var e in d)o(e)&&(b[c]||(b[c]={}),b[c][e]=d[e])}return b}function q(a,b){var c=p(b);for(var d=0;d<a.length;d++){var e=a[d],f=c[e.domid];if(!f)continue;if(e.type==="set_node")return!1;for(var g in f){var h=f[g],i=m(e.domid,h);if(i>=e.position)return!1}}return!0}function r(a,b,d){var e=n(a);if(!b&&q(a,e))return!0;try{$.each(a,function(a,c){k(c,"ty","type"),k(c,"animation","transition")&&k(c.transition,"ty","type"),k(c,"parentCid","parent_cid"),k(c,"childCid","child_cid"),k(c,"childDomid","child_domid");var d,f=e[c.domid];$.each(f,function(a,d){if(o(a)){if(!b)throw"blocking_interaction_mode";console.log("forcing override on live update conflict with cid="+a+" on optype = "+c.type)}})})}catch(f){if(typeof f=="string"&&f=="blocking_interaction_mode")return c.interactionMode.startBlocking(),h.interactionDelayedLivedepOperations.push({data:a,textStatus:d}),!1;throw f}return!0}function t(a,b,c){$.serverLog("on check livedep error: "+a+" / status: "+b+" / error: "+c),i<32e3?(g=setTimeout(u,i),i*=2):(clearTimeout(g),g=null,E("failed to sync livedeps"))}function u(){g&&(clearTimeout(g),g=null);var a=require("webnode2");(new $.Ajax).url(window.location.protocol+"//"+location.hostname+"/check_livedeps/index?window_id="+a.windowId+"&random="+Math.random()).type("GET").error(t).send()}function v(a){h.lazyComplete=a}function w(){return h.lazyComplete}function y(){var a=require("webnode2");a.interactionMode.resumeUpdates();var b=Math.random(),c={};return c._lm_transaction_id=b,c._lm_window_id=a.windowId,x[b]=1,B(),{transactionId:b,data:c}}function z(a,b){delete x[a],h.requiredVersion=Math.max(b,h.requiredVersion),B()}function A(a){h.currentVersion=a,D()}function B(){var a=0,b;for(b in x)a++;h.pendingMutationCount=a,D()}function C(){require("tchannel_up").stop()}function D(){window.log&&d.enabled&&d("w2.livenode.checkLoadingStatus","Pending mutation count:",h.pendingMutationCount,", current version",h.currentVersion,", required version",h.requiredVersion);var a=require("webnode2");h.pendingMutationCount>0||h.currentVersion<h.requiredVersion?a.Loading.show():a.Loading&&a.Loading.hide()}function E(a){console.log("Page requires reload "+a),j||($.serverLog("reportPageNeedsReload: "+a),j=!0);var b=require("webnode2");b.ConnectionWarning&&b.ConnectionWarning.hide(),b.fallbackToPostReloadMode(a),b.interactionMode.$("#@message").html("<a href=\'javascript:window.location.reload();\'>Please refresh this page to receive new updates.</a>"),b.interactionMode.startBlocking()}function F(){require("webnode2").ConnectionWarning.hide()}function G(){require("webnode2").ConnectionWarning.show()}window.console||(window.console={}),window.console.log||(window.console.log=function(){}),require("jquery");var c=require("webnode2"),d=require("log").log,e=require("spin").Spinner,f=require("settings"),g=null,h={interactionDelayedLivedepOperations:[],pendingMutationCount:0,currentVersion:0,requiredVersion:0,lazyComplete:!1},i=1e3,j=!1,s=require("atexit").hook(function(a,b,e){e=e||!1;if(a=="error"){console.log("LiveNode error"),E("error_response2");return}if(c.interactionMode.isBlocking())return h.interactionDelayedLivedepOperations.push({data:a,textStatus:b}),!1;if(!r(a,e,b))return!1;var g=!$.browser.msie&&f.feedAnchoring&&$(window).scrollTop()>0;g&&$("div.feed_item:in-viewport").anchor(),$.each(a,function(a,b){window.log&&d.enabled&&d("w2.livenode.onLivedepOperations","Applying",b),$(document).trigger("livenode_op_start",b);switch(b.type){case"set_node":if(b.domid in c._ignoreDomids)break;var e=$("#"+b.domid);if(!e.length){E("set_node_missing, op.domid = "+b.domid+", op.cid = "+b.cid);return}var h=b.transition,i=c.getComponentFromElement(e.get(0));i&&i.force_transition&&(h=i.force_transition),assert("cid"in b),c.unloadComponent(b.cid),e.setContent(b.content);switch(h.type){case"none":break;case"fade_in":e.effect("fade",{},2e3);break;case"highlight":e.effect("highlight",{},2e3);default:}break;case"insert_node":if(b.domid in c._ignoreDomids)break;var j=document.getElementById(b.domid);if(!j){E("insert_node_missing, op.domid = "+b.domid+", op.parent_cid = "+b.parent_cid);return}var k=document.createElement("DIV");c.setContentHTML(k,b.content);if(k.childNodes.length!=1){console.log("error: append must give a single node"),E("append");return}var l=k.childNodes[0],m=l.id;l.style.display="none",j.childNodes.length==b.position?j.appendChild(l):j.insertBefore(l,j.childNodes[b.position]),c.setContentJS(l,b.content);var n=c._components[b.parent_cid];n&&n.onInsertNode(b,m);if(b.transition.type=="none")break;if(g||b.transition.type=="fade_in"){$("#"+m).fadeIn(500);break}if(f.new_grid)l.style.display="none",$("#"+m).fadeIn(1e3);else{var o=$("#"+m).height();l.style.height=0,l.style.overflow="hidden",l.style.clear="both",l.style.display="";function p(){l.style.overflow="",l.style.height="",l.style.clear=""}$("#"+m).animate({height:o},300,"linear",p).effect("highlight",{},2e3)}break;case"delete_node":if(b.domid in c._ignoreDomids)break;var j=document.getElementById(b.domid);if(!j){E("delete_node_missing, op.domid = "+b.domid+", op.parent_cid = "+b.parent_cid);return}if(!c._parents[b.parent_cid]){E("delete_node_missing_component "+b.parent_cid);return}var q=j.childNodes[b.position];if(q.id!=b.child_domid){E("delete_node_wrong_child, node.id = "+q.id+", op.child_domid = "+b.child_domid);return}var n=c._components[b.parent_cid];n&&n.onDeleteNode(b,q.id),c.unloadComponent(b.child_cid),$("#"+q.id).removeEditors().remove();break;case"update_data":if(b.cid in c._ignoreCids)break;if(!c._parents[b.cid]){E("update_data_missing_component, op.cid = "+b.cid+", op.parent_cid = "+b.parent_cid);return}var i=c._components[b.cid];i&&i.onUpdate(b.data);break;case"error":console.log("livedep error: "+b.error),E("error_response");return;default:console.log("bad op type: "+b.type),E("bad_type")}}),$(document).trigger("livenode_finish_operations")}),x={},c=require("webnode2"),H=c.Component;a.ConnectionWarningBanner=H.extend({init:function(){this._super.apply(this,arguments),require("webnode2").ConnectionWarning=this,this.showing=!1},show:function(){if(this.showing)return;this.showing=!0,c=require("webnode2"),c.Error&&c.Error.hide();if($(".main_content").length)var a=$(".main_content").offset().left+100;this.$("#@warning").css("left",a+"px").show()},hide:function(){if(!this.showing)return;this.showing=!1,this.$("#@warning").hide()}}),a.LiveSpinner=H.extend({init:function(){this._super.apply(this,arguments),c.Loading=this,this.t=null,this.showing=!1},show:function(){if(this.showing)return;this.showing=!0;var a=this.fnbind(function(){this.spinner||(this.spinner=(new e({color:"#fff"})).spin(),this.$("#@spinner").append(this.spinner.el)),this.$("#@loading").removeClass("fade_out").removeClass("hidden")});this.t=setTimeout(a,250)},hide:function(){if(!this.showing)return;this.showing=!1,clearTimeout(this.t),this.t=null,this.$("#@loading").addClass("fade_out"),setTimeout(this.fnbind(function(){this.$("#@loading").hasClass("fade_out")&&(this.$("#@loading").removeClass("fade_out").addClass("hidden"),this.spinner.stop(),this.spinner=null)}),150)}}),a.LoadingBanner=H.extend({init:function(){this._super.apply(this,arguments),c.Loading=this,this.t=null,this.showing=!1},show:function(){if(this.showing)return;this.showing=!0;var a=this.fnbind(function(){var a=$(".main_content").first();if(a.length==0)return;var b=a.offset().left;this.$("#@loading").css("left",b+"px").show()});this.t=setTimeout(a,750)},hide:function(){if(!this.showing)return;this.showing=!1,clearTimeout(this.t),this.t=null,this.$("#@loading").hide()}}),a.ErrorBanner=H.extend({init:function(){this._super.apply(this,arguments),require("webnode2").Error=this,this.shown=!1,this.$("#@hide").click(this.fnbind(function(){return this.hide(),!1}))},show:function(a){a=a||"Your request was not completed.",this.$("#@text").text(a);if(this.shown)return;this.shown=!0,c=require("webnode2"),c.ConnectionWarning&&c.ConnectionWarning.hide();if(f.new_grid){var b=this;this.$("#@banner").show(),setTimeout(function(){b.$("#@banner").addClass("is_shown")},1)}else this.$("#@banner").show()},hide:function(){if(!this.shown)return;this.shown=!1;if(this.new_grid){var a=this;a.$("#@banner").removeClass("is_shown"),setTimeout(function(){a.$("#@banner").hide()},200);return}this.$("#@banner").hide()}}),$.fn.aboveViewport=function(a){return $(window).scrollTop()>=this.offset().top+this.height()-(a||0)},a.syncLivedeps=u,a.startMutation=y,a.onLivedepOperations=s,a.reportPageNeedsReload=E,a.reportPageRegainedConnection=F,a.reportPageLostConnection=G,a.setCurrentVersion=A,a.mutationDoneAfterVersion=z,a.checkLazyComplete=w,a.setLazyComplete=v,a.stopLiveUpdates=C,a.state=h}),require.install("w2.errors",function(require,a,b){(function(b,undefined){function m(a,b,d,f,h){var k=a.status===0;if(k){setTimeout(function(){p()||n("Internet connection problem.")},1e3);return}g.enabled&&g("w2.errors.reportAjaxError","Error:",a.status,d,", XHR: ",a);if(Math.random()*100<i.client_side_server_call_error_logging_percentage&&new Date-j>=c){j=new Date,g.enabled&&g("w2.errors.reportAjaxError","Forwarding error log entry to server.");var l=a.responseText||"";l.length>2048&&(l=l.substr(0,2048)+"... (TRUNCATED)"),$.serverLog("AJAX request failed: "+a.status.toString()+", "+d+"; response: "+l)}if(h!=null){var m=(new Date).getTime()-h;m>e&&(f=!1)}f&&n()}function n(a){if(h.Error==null)return;h.Error.show(a)}function o(a){k++,setTimeout(function(){k--},a)}function p(){return k!=0}function q(a){l++,setTimeout(function(){l--},a)}function r(){return l!=0}var c=6e5,d=2e3,e=50,f=5e3,g=require("log").log,h=require("webnode2"),i=require("settings"),j=new Date(0),k=0,l=0;$.loaded||($.loaded=function(a){a()}),$.loaded(function(){$(window).on("unload.w2errors beforeunload.w2errors",function(){g.enabled&&g("w2.errors.unload","window.beforeunload event is raised."),o(d)}),$(document).on("mouseup.w2errors mousedown.w2errors keyup.w2errors keydown.w2errors keypress.w2errors",function(){q(e)})}),a.reportAjaxError=m,a.showError=n,a.canBeRelatedToUserAction=r,a.canBeRelatedToPageUnload=p,a.beginCanBeRelatedToUserActionBlock=q})(this)}),require.install("e2e",function(require,a,b){(function(b,undefined){function e(a,b,c){a=a||rec.dump();for(var d=0,e=a.length;d<e;++d)if(b.call(c,a[d],d)==="break")return}function f(a,b){return function(c){var d={},f={};return e(c,function(c){var e=c.tags,g=e[0],h=e[1],i=e[2];if(g==="window.performance"&&h==="loadEventEnd")return"break";g===a&&(!b||h===b)&&(i==="start"?d[h]=c.time:i==="finish"&&(f[h]=(f[h]||0)+c.time-d[h]))}),f}}function n(){k>=l&&(o(),k=0)}function o(){c.enabled&&c("e2e.gc","GC started.");var a=(new Date).getTime(),b=[];for(var d in j){var e=j[d];a-e.startTime>m&&(b.push(e),delete j[d])}c.enabled&&c("e2e.gc","Collected actions:",b)}function p(a){if(!a.mustReport)return;delete a.mustReport,$.whenLoaded(500,function(){if(c.enabled){var b=a.endTime-a.startTime,e=a.serverTime/1e3;c("e2e.reportActionData","Metric:",b,"Server time:",e,"Details:",a)}d.rpc("/e2e/action_data_POST").args(a).send()},"e2e.reportActionData")}var c=require("log").log,d=require("webnode2"\n),g=f("package"),h=f("webnode2","onLoad"),i=f("loader","flushQueue");a.reportPageData=function(a,b){function n(){if(j&&j.timing){var a=j.timing;if(a.loadEventEnd===0){setTimeout(n,250);return}var b=m.win_perf.timing={};for(var k in a){var l=a[k];typeof l=="number"&&(b[k]=l)}}var o=rec.dump();m.win_perf.quora={packages:g(o),onLoads:h(o).onLoad,flushQueues:i(o).flushQueue,referrer:document.referrer},e.stop(),$.whenIdle(100,function(){if(c.enabled){var a=m.win_perf.timing,b=a.loadEventStart-a.navigationStart,e=m.win_perf.server_time;c("e2e.reportPageData","Metric:",b,"Server time:",e,"Details:",m)}d.rpc("/e2e/page_data_POST").args(m).send()},"e2e.reportPageData"),f._component_inspector_enabled||(delete f.components,delete f._components)}if(a==null)return;if(!a.mustReport)return;delete a.mustReport;var e=require("w2.timing"),f=e.timing,j=window.performance,k="",l="";f.components&&f.send_client_component_time&&(k=JSON.stringify(f.components),l=f.unique_id);var m=$.extend(a,{unique_id:l,components:k,html_load:f.preOnLoad-f.start,js_onload:f.postOnLoad-f.preOnLoad,document_ready:f.documentReady-f.start,window_load:f.windowLoad-f.documentReady,win_perf:{path:location.pathname,revision:require("settings").revision,controller:require("settings").controller,action:require("settings").action,server_time:f.server_time,window_id:f.window_id},w2_timing:f});j&&j.timing&&j.timing.responseStart&&(m.win_perf.timing=j.timing),n()};var j={},k=0,l=100,m=6e5;a.startAction=function(a){if(a==null)throw"This method expects an object describing the action.";return a.startTime=(new Date).getTime(),a.id=(a.startTime*1e3+Math.floor(Math.random()*1e3)).toString(36),j[a.id]=a,c.enabled&&c("e2e.startAction",a),k++,n(),a},a.startOrUpdateAction=function(b,c){return b==null||j[b]==null?a.startAction(c):a.updateAction(b,c)},a.getAction=function(a){return j[a]},a.updateAction=function(a,b){if(b==null)throw"This method expects an object describing the update.";var c=j[a];return c==null?null:$.extend(c,action)},a.finishAction=function(a,b){var d=j[a];return d==null?null:(b!=null&&$.extend(d,b),d.endTime=(new Date).getTime(),delete j[a],c.enabled&&c("e2e.finishAction",d),p(d),d)}})(window)}),require.install("window_manager",function(require,a,b){require("jquery"),a.catchRedirectCallback=null;var c=function(a){return/https?:\\/\\/[a-z.0-9_\\.\\-]*quora\\.com/i.test(a)},d=a.getDomain=function(){return window.location.protocol+"//"+window.location.host+"/"},e=a.getPathName=function(){return decodeURI(window.location.pathname)},f=a.getURL=function(){return decodeURI(window.location.href)},g=a.replaceURL=function(a){window.history.replaceState(null,null,a)},h=a.getHash=function(){return window.location.hash};a.parseHashParams=function(a){var b=h(),c={};a=a||";";if(b.substr(0,1)=="#"){var d=b.substring(1).split(a);for(var e=0;e<d.length;e++){var f=d[e].split("=");c[f[0]]=f[1]}}return c},a.isInHash=function(a){var b=h();if(b.substr(0,1)=="#"){b=b.replace("%23","-");var c=b.substring(1).split("-");for(var d=0;d<c.length;d++)if(c[d]==a)return!0}return!1};var i=a.parseURLParams=function(){var a=location.search.substring(1);if(a.length===0)return{};var b={};return $.each(a.split("&"),function(a,c){var d=c.split("=");b[d[0]]=decodeURIComponent(d[1])}),b},j=a.isParamInURL=function(a,b){return b in i()},k=a.addParamToURL=function(a,b,c){var d=encodeURIComponent(b)+"="+encodeURIComponent(c);a.indexOf("?")==-1?d="?"+d:d="&"+d;var e=a.indexOf("#");return e==-1?a+d:a.substring(0,e)+d+a.substring(e)};a.getURLParam=function(a){return i()[a]},a.updateURLParams=function(a){var b=$.extend(i(),a),c=$.map(b,function(a,b){return b+"="+encodeURIComponent(a)}).join("&"),d=location.origin+location.pathname+"?"+c+location.hash;g(d)};var l=a.getTitle=function(){return document.title},m=a.setTitle=function(a){document.title=a},n=a.reload=function(){window.location.reload()},o=function(a){return a.indexOf("quora://")!==-1},p=a.handleClick=function(a,b){b.which==2||b.metaKey?window.open(a):r(a)},q=a.sameDomainURL=function(a){return a&&(a.charAt(0)=="/"||(new RegExp("^https?://"+window.location.hostname+"/","i")).test(d(a)))},r=a.navigateTo=function(b){if(b==f()+"#")return;b.indexOf("/")==0&&(b=d()+b.substring(1));if(b==""||b=="#")return;if(!c(b)&&!o(b))window.open(b);else{var e=!0;a.catchRedirectCallback&&(e=a.catchRedirectCallback(b)),e&&(window.location=b)}},s=a.openCenteredPopupWindow=function(a,b,c){var d=window.screenX+window.innerWidth/2-b/2,e=window.screenY+window.innerHeight/2-c/2;window.open(a,"_blank","width="+b+",height="+c+",left="+d+",top="+e)};a.headerOffset=60,a.scrollAndFocus=function(b,c){b-=a.headerOffset,b=Math.max(0,Math.min($(document).height()-$(window).height(),b));var d=Math.min(500,Math.abs(b-$(document).scrollTop())*.5),e=!1;$("html,body").animate({scrollTop:b},d,"swing",function(){if(!e&&$(c).length){var a=window.scrollX,b=window.scrollY;$(c).focus(),window.scrollTo(a,b),e=!0}})},a.scrollIntoView=function(b){var c=$(b).offset().top,d=c-$(document).scrollTop();(d<a.headerOffset||d>$(window).height())&&a.scrollAndFocus(c)}}),require.install("w2.rpc",function(require,a,b){(function(){var a=require("log").log,b=require("webnode2"),c=require("w2.errors"),d=require("settings"),e=d.formkey,f=d.postkey,g=require("w2.timing"),h=require("e2e"),i=0,j=require("spin").Spinner;b.postPerfInfoCallback=null,b.atLeastOneServerCallIsSent=!1,b.RPC=$.Ajax.extend({__init__:function(a){this._super(b.RPC.defaults),this.options(a),this.__data={args:[],kwargs:{}},this.__success=null,this.beforeComplete(this.fnbind(this._implicitCompleteHandler)),this.beforeError(this.fnbind(this._implicitErrorHandler)),this.error(this.fnbind(this._defaultErrorHandler)),this.__exceptionPatterns={state_expired:function(a){require("w2.livenode").reportPageNeedsReload("state_expired")}},this.__exceptionCatchAll=null,this.__liveMutation=!1,this.__contentFor=!1,this.__persistMutation=!1,this.__creationTime=(new Date).getTime(),this.__isRelatedToUserAction=c.canBeRelatedToUserAction(),this.__reportError=!0},name:function(a){return a===undefined?this.__name:(this.__name=a,this)},relatedToUserAction:function(a){return this.__isRelatedToUserAction=a,this},reportError:function(a){return this.__reportError=a,this},persistMutation:function(){return this.__persistMutation=!0,this},finishMutation:function(){if(this.__persistMutation){if(this.__persistMutationInfo!=null){var a=this.__persistMutationInfo.transactionId;require("w2.livenode").mutationDoneAfterVersion(a,0)}this.__persistMutation=!1}},discardMutation:function(){if(this.__liveMutation){if(this.__liveMutationInfo!=null){var a=this.__liveMutationInfo.transactionId;a!=null&&require("w2.livenode").mutationDoneAfterVersion(a,0)}this.__liveMutation=!1}this.finishMutation()},liveMutate:function(){return this.__liveMutation=!0,this},contentFor:function(a,b,c){a.jquery&&(a=a.get(0)),this.__contentFor=!0;var d=$.extend(b,{domNode:a});!d.useLoadingSpinner&&d.useLoadingSpinner!==!1&&(d.useLoadingSpinner=!0);if(!d.parentCID)throw new Error("must explicitly specify parentCID.");return d.domNode=a,d.dont_check_for_live_parent=c,this.__contentForOpts=d,this},send:function(){return this.__liveMutation&&(this.__liveMutationInfo=require("w2.livenode").startMutation()),this.__contentFor&&this._contentForStartLoading(),this.__persistMutation&&(this.__persistMutationInfo=require("w2.livenode").startMutation()),this.__startTime=g.getTime(),this.name()===undefined&&this.name(this.__options.url),this._super()},_contentForStartLoading:function(){this.__contentForOpts.useLoadingSpinner&&(this.__contentForLoadingTimeout=setTimeout(this.fnbind(function(){$(this.__contentForOpts.domNode).forgetContents();var a=$("<div class=\'__contentfor_loading_spinner\'/>");$(this.__contentForOpts.domNode).append(a),__W2__shouldUseNewContentForLoadingSpinner&&(this.spinner=(new j).spin(),a.append(this.spinner.el))}),150))},_contentForDoneLoading:function(){this.spinner&&(this.spinner.stop(),this.spinner=null),clearTimeout(this.__contentForLoadingTimeout)},_implicitCompleteHandler:function(a,b){g.logRequestTime(this.name(),this.__startTime)},_implicitErrorHandler:function(a,b,d){this.discardMutation(),this.__reportError&&c.reportAjaxError(a,b,d,this.__isRelatedToUserAction,this.__creationTime)},_defaultErrorHandler:function(){this.discardMutation(),this._throwError("Unhandled error response from server: "+JSON.stringify(arguments))},except:function(a,b){switch(arguments.length){case 1:this.__exceptionCatchAll=a;break;case 2:typeof a=="string"?this.__exceptionPatterns[a]=b:$.each(a,this.fnbind(function(a,c){this.__exceptionPatterns[c]=b}));break;default:this._throwError("The except method takes either (<pattern>, <callback>) or (<default-callback>) as arguments.")}return this},args:function(){var a=[],b;for(b=0;b<arguments.length;b++)a.push(arguments[b]);return this.__data.args=a,this},xargs:function(a){return this.__data.args=a,this},kwargs:function(a){return this.__data.kwargs=a,this},data:function(){throw new Error("Don\'t use the .data() method with RPC; use .kwargs() or .args() instead.")},_data:function(){if(!e)throw new Error("require(\'settings\').formkey not set -- can\'t send request securely.");if(!f)throw new Error("require(\'settings\').postkey not set -- can\'t send request securely.");b.windowId||console&&console.warn&&console.warn("No W2.windowId set; any content coming back from the server may not be live updated correctly");var a;try{a=JSON.stringify(this.__data)}catch(c){console.log("W2.RPC Error: Can\'t encode an object with circular references",c,this.__data),assert(!1),a=JSON.stringify({error:"Can\'t encode an object with circular references"})}var g={json:a,formkey:e,postkey:f,window_id:b.windowId,referring_controller:d.controller,referring_action:d.action};this.__liveMutation&&$.extend(g,this.__liveMutationInfo.data);if(this.__contentFor){g.parent_cid=this.__contentForOpts.parentCID,g.parent_domid=b.getLiveParent(g.parent_cid);var h=this.__contentForOpts.domNode,i=b.getLiveChildren(g.parent_cid),j=i.filter(function(a){return h.contains(document.getElementById(a))});!this.__contentForOpts.dont_check_for_live_parent&&!b.getLiveDomId(g.parent_cid)&&(g.non_live_parent=!0),g.domids_to_remove=JSON.stringify(j)}return g},success:function(a){return this.__success=a,this},_successWrapper:function(a){this.finishMutation(),a.pmsg&&(b.pmsgContainer?b.pmsgContainer.setContent(a.pmsg,!0):console&&console.warn&&console.warn("Received a piggybacking pmsg but there\'s no pmsgContainer present on this page; dropping the pmsg.")),this.__contentFor&&this._contentForDoneLoading();if(a.exception)return this._handleException(a);this.__contentFor&&($(this.__contentForOpts.domNode).forgetContents(),$(this.__contentForOpts.domNode).removeEditors().setContent(a.value),$(document).trigger("rpc_content_for_done",{opts:this.__contentForOpts,value:a.value}));var c=undefined;return typeof this.__success=="function"&&(c=this.__success(a.value)),this.__liveMutation&&require("settings").pageMode=="post_reload"?i>0?i-=1:require("window_manager").reload():a.post_perf_html&&b.postPerfInfoCallback&&b.postPerfInfoCallback(a.post_perf_html),c},disableNextPostReload:function(){return++i,this},_success:function(a){return this.fnbind(this._successWrapper)},_throwError:function(a){throw console&&console.error&&console.error(a),new Error(a)},_handleException:function(a){this.discardMutation();var b=this.__exceptionPatterns[a.exception.type],c=!0;b?c=this._invokeExceptionCallback(b,a):this.__exceptionCatchAll&&(c=this._invokeExceptionCallback(this.__exceptionCatchAll,a));if(c){var d={response:a,rpc:this};$(document).trigger("w2rpcexception-"+a.exception.type,d),$(document).trigger("w2rpcexception",d)}},_invokeExceptionCallback:function(a,b){return a(b.exception,b,this)}}),b.RPC.defaults={type:"POST",dataType:"json"},b.rpc=function(a){return(new b.RPC).url(a)},b._Controller=b.RPC.extend({__init__:function(a,b){this._super(),this.__vcon=a,this.__vcon_method=b,this.__first_server_call=!1;var c=require("settings").serverCallUrl;if(!c)throw new Error("require(\'settings\').serverCallUrl not set");this.url(c)},_data:function(){var a=this._super();if(!this.__vcon)throw new Error("vcon not set; can\'t call a view controller.");a.__vcon_json=JSON.stringify(this.__vcon),a.__vcon_method=this.__vcon_method;var b=h.startOrUpdateAction(a.__e2e_action_id,{url:this.__options.url,vcon:this.__vcon,method:this.__vcon_method,args:a.args,kwargs:a.kwargs});return a.__e2e_action_id=b.id,this.__first_server_call&&(a.__first_server_call=!0),a},parallelize:function(){var a=require("settings").paraServerCallUrl;if(a)return this.url(a);throw new Error("require(\'settings\').paraServerCallUrl not set")},send:function(){return b.atLeastOneServerCallIsSent||(this.__first_server_call=!0,b.atLeastOneServerCallIsSent=!0),this.name()===undefined&&this.name(this.__vcon+"."+this.__vcon_method),this._super()}}),b._ServerCall=b._Controller.extend({__init__:function(a,b,c){this._super(a,b),this._component=c,this._makeOnlyOnce=!1,this._sendJSInitArgs=!0},dontSendJSInitArgs:function(a){return a===!1?this._sendJSInitArgs=!0:this._sendJSInitArgs=!1,this},_data:function(){var a=this._super();return this._sendJSInitArgs&&(a.js_init=JSON.stringify(this._component.__js_init)),a},onlyOnce:function(){return this._component.activeServerCalls||(this._component.activeServerCalls={}),this._onlyOnce=!0,this},send:function(){if(this._onlyOnce){if(this._isSimilarServerCallActive())return this;this._component.activeServerCalls[this.__vcon_method]=1}return this._super.apply(this,arguments)},sendOnlyOnce:function(){return this.onlyOnce(),this.send()},_implicitCompleteHandler:function(a,b){return this._onlyOnce&&this._markServerCallInactive(),this._super.apply(this,arguments)},_isSimilarServerCallActive:function(){return this._component.activeServerCalls?this.__vcon_method in this._component.activeServerCalls:!1},_markServerCallInactive:function(){this._isSimilarServerCallActive()&&delete this._component.activeServerCalls[this.__vcon_method]}}),b.fallbackToPostReloadMode=function(){require("settings").pageMode="post_reload"}})()}),require.install("w2.quora",function(require,a,b){var c=require("log").log,d=require("webnode2"),e=d.Dialog.extend();a.Component=d.Component.extend({dialog:function(a){return new e(this,a)},setDvar:function(a,b){this.__dvars__==undefined&&(this.__dvars__={}),this.__dvars__[a]=b},getDvar:function(a){if(this.__dvars__!=undefined&&this.__dvars__[a]!=undefined)return this.__dvars__[a];var b=this.cid;while(b){b=d._parents[b];var c=d._components[b];if(c&&c.getDvar)return c.getDvar(a)}return null}}),require("errors").setCallback(function(a){$.serverLog((a.message||"").slice(0,1e3),"ERROR",a.stack||null,!1)})}),require.installLazy("app/view/board/settings",\'var Component=require("w2.quora").Component;exports.StaticBoardPrivacyMenu=Component.extend({onLoad:function(){this.type=null,this.$("#@menu_link").click(this.fnbind(function(){return this.$("#@menu_items").menu(this.$("#@menu_link")),!1}));var a=this;$(".menu_list_items .static_link").click(function(){$(".menu_list_items .static_link").removeClass("selected");var b=$(this),c=b.text();return a.$("#@menu_link").text(c),a.setType(b.attr("type")),b.addClass("selected"),!1})},setType:function(a){this.type=a},getType:function(){return this.type}}),exports.BoardURLSection=Component.extend({onLoad:function(){this.$("#@url").bind("keyup",this.fnbind(function(a){var b=this.$("#@url").val();this.serverCall("check_url").kwargs({bid:this.bid,url:b}).contentFor(this.$("#@button"),{parentCID:this.cid}).send()}))},updateURL:function(){var a=this.$("#@url").val();return a&&this.serverCall("register_choice").kwargs({url:a}).success(this.fnbind(function(){location.reload(!0)})).liveMutate().send(),!1}}),exports.BlogSubdomainInput=Component.extend({onLoad:function(){this.urlIsOK=!1,this.$("#@url").bind("keyup",this.fnbind(function(a){this.checkURL()})),this.$("#@update").click(this.fnbind(function(){return this.updateURL(),!1}))},checkURL:function(){var a=this.$("#@url").val();this.serverCall("check_url").kwargs({url:a}).success(this.fnbind(function(a){a===!0?this.urlAvailable():a===!1?this.urlNotAvailable():this.urlEmpty()})).error(this.fnbind(function(){this.urlNotAvailable()})).send()},getInput:function(){return this.$("#@url")},urlEmpty:function(){this.urlAvailable(),this.urlIsOK=!1,this.bid&&this.$("#@button").hide()},urlAvailable:function(){this.urlIsOK=!0,this.$("#@domain_unavailable").hide(),this.$("#@url").removeClass("input_validation_error"),this.bid&&this.$("#@button").show()},urlNotAvailable:function(){this.urlIsOK=!1,this.$("#@domain_unavailable").show(),this.$("#@url").addClass("input_validation_error"),this.bid&&this.$("#@button").hide()},updateURL:function(){var a=this.$("#@url").val();return a&&this.serverCall("register_choice").kwargs({url:a}).success(this.fnbind(function(){location.reload(!0)})).liveMutate().send(),!1}}),exports.BlogThemeEditor=Component.extend({onLoad:function(){this.refresh&&this.blog_theme_color&&$("body").attr("class","blog_page blog_color_"+this.blog_theme_color)}}),exports.AddURLStatusButton=Component.extend({onLoad:function(){this.$("#@update").click(this.fnbind(function(){return this.parent().updateURL(),!1}))}});\'),require.installLazy("app/view/question/question_alias",\'var Component=require("w2.quora").Component;exports.AddQuestionAliasList=Component.extend({onLoad:function(){this.$("#@create_link").click(this.fnbind(function(){return this.$("#@create").hide(),this.$("#@add_alias").show(),this.lookup("input").$("#@input").focus(),!1})),this.$("#@add").click(this.fnbind(function(){var a=this.lookup("input").$("#@input").val();return a&&this.serverCall("add_question_alias").kwargs({qid:this.qid,alias:a}).success(this.fnbind(function(){this.lookup("input").$("#@input").val(""),this.lookup("input").$("#@input").focus()})).liveMutate().send(),!1}))}}),exports.QuestionAliasText=Component.extend({onLoad:function(){this.$("#@edit").click(this.fnbind(function(){return this.toggleEditor(),!1})),this.$("#@cancel").click(this.fnbind(function(){return this.toggleEditor(),!1})),this.$("#@update").click(this.fnbind(function(){var a=this.lookup("input").$("#@input").val();return a&&this.serverCall("edit_question_alias").kwargs({qid:this.qid,alias_id:this.alias_id,new_alias:a}).success(this.fnbind(function(){this.lookup("input").$("#@input").val(""),this.toggleEditor()})).liveMutate().send(),!1}))},toggleEditor:function(){this.$("#@text").toggle(),this.$("#@editor").toggle(),this.parent().$("#@remove").toggle()}}),exports.QuestionAliasItem=Component.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Remove Question Alias"}).click(this.fnbind(function(){this.clear(),this.$("#@text").addClass("item_selected");if(this._dialog)return;return this._dialog=this.dialog().title("Confirm Question Alias Removal").ok(this.fnbind(function(){this.serverCall("remove_question_alias").kwargs({qid:this.qid,alias_id:this.alias_id}).liveMutate().send()}),"Remove Alias").cancel(this.fnbind(function(){this.clear()}),"Cancel").html("Are you sure you want to remove this alias?"),!1})),this.$("#@item").hover(this.fnbind(function(a){this.$("#@remove").show()}),this.fnbind(function(a){this.$("#@remove").hide()}))},clear:function(){$(".item_selected").removeClass("item_selected")}});\'),require.installLazy("app/view/report",\'var Component=require("w2.quora").Component;exports.ReportLink=Component.extend({onLoad:function(){var a={title:"Flag Content",comment_form:"Please explain why you are flagging this content",mobile:this.mobile,buttons:{Ok:this.fnbind(this._request),Cancel:null}};this.$("#@report_link").click(function(){return $(".content").dialog(a),!1})},_request:function(){var a={};if(!(a.id=this.id)||!(a.type=this.type)||!(a.comment=$("#dialog_comment").val()))return!1;this.serverCall("report").kwargs(a).success(this.fnbind(function(b){$.serverLog("Content Flagged","INFO",a),a1ert("Content Flagged")})).liveMutate().send()}});\'),require.install("view/toggle",function(require,a,b){var c=require("log").log,d=require("w2.quora").Component,e={},f=3,g=!0,h=window&&window.navigator.appName=="Microsoft Internet Explorer";if(h){var i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");i.exec(navigator.userAgent)!==null&&parseFloat(RegExp.$1)<=9&&(g=!1)}a.ToggledComponent=d.extend({onLoad:function(){this._super.apply(this,arguments),this.retries=0,this.toggleCallback||(this.toggleCallback=null);var a;this.switch_ready&&(a=this.lookup("switchable"))&&(this.toggled=!0,a.switchIfWanted())},onUnload:function(){delete this.toggleCallback,delete this.errorCallback,delete this.toggleIndicator,delete this.toggleSpinner},setCallback:function(a){if(!this.toggleCallback)this.toggleCallback=a;else{var b=this.toggleCallback;this.toggleCallback=function(){b(),a()}}},setErrorCallback:function(a){if(!this.errorCallback)this.errorCallback=a;else{var b=this.errorCallback;this.errorCallback=function(){b(),a()}}},setIndicator:function(a){this.toggleIndicator=a},setSpinner:function(a){this.toggleSpinner=a},toggle:function(a,b){c.enabled&&c("toggle.ToggleComponent.toggle","Key:",this.toggle_key,"prev. toggled:",this.toggled,"toggle_state:",b);if(this.toggled)return;this.toggled=!0;var d,e;this.toggleIndicator&&(d=this.toggleIndicator.$("#@toggle_indicator"),d.removeClass("hidden")),this.toggleSpinner&&(e=this.toggleSpinner.$("#@toggle_spinner"),setTimeout(function(){e.html("<img class=\'content_loading_spinner\' src=\'/static/images/spinner_2a.gif\' />")},150)),this.force_transition={type:"none"};var g={toggle_key:this.toggle_key};b!==undefined&&(g.toggle_state=b),this.serverCall("toggle").kwargs(g).success(this.toggleCallback).error(this.fnbind(function(){this.retries++,this.retries<=f?setTimeout(this.fnbind(function(){this.toggled=!1,this.toggle(a,b)}),100):(this.retries=0,this.toggleIndicator&&this.toggleIndicator.$("#@toggle_indicator").addClass("hidden"),this.toggleSpinner&&this.toggleSpinner.$("#@toggle_spinner").html(""),this.errorCallback&&this.errorCallback(),this.toggled=!1)})).send()}}),a.ToggledIndicator=d.extend({onLoad:function(){this.lookup("toggled").setIndicator(this)}}),a.ToggledSpinner=d.extend({onLoad:function(){this.lookup("toggled").setSpinner(this)}}),a.TogglerComponent=d.extend({toggle:function(){this.toggle_link&&this.toggle_link_hide&&this.$("#@toggle_link").hide(),this.toggled.toggle(this.toggle_active,this.toggle_state)},onLoad:function(){this.toggled=this.lookup("toggled"),this.toggle_link&&this.toggle_link_hide&&this.toggled.setErrorCallback(this.fnbind(function(){this.$("#@toggle_link").show()}));if(this.toggle_trigger==="click"&&this.toggle_link)this.$("#@toggle_link").click(this.fnbind(function(a){return this.toggle(),!1}));else if(this.toggle_trigger==="mouseover"&&this.toggle_link){var a=this.fnbind(function(a){this.mouseover_toggled||(this.mouseover_toggled=!0,this.toggle())});g?this.$("#@toggle_link").mouseover(a):this.$("#@toggle_link").bind("mousedown keydown",a),this.toggled.setErrorCallback(this.fnbind(function(){this.mouseover_toggled=!1}))}else if(this.toggle_trigger==="load")this.toggle();else if(this.toggle_trigger==="timeout")this.timeout=setTimeout(this.fnbind(this.toggle),this.toggle_timeout);else if(this.toggle_trigger==="viewport"){var b=this.$("#@toggle_link")[0];this.ypos=this.$(b).offset().top-this.toggle_offset,window.innerHeight>this.ypos?this.toggle():this.scrollID=requestAnimationFrame(this.fnbind(this.scrollHandler))}},scrollHandler:function(){var a=this.$(window).scrollTop()+window.innerHeight;a>this.ypos?(this.toggle(),cancelAnimationFrame(this.scrollID)):this.scrollID=requestAnimationFrame(this.fnbind(this.scrollHandler))},onUnload:function(){this.timeout&&clearTimeout(this.timeout)}}),a.SwitchableComponent=d.extend({onLoad:function(){this._super.apply(this,arguments),this.switchCallback||(this.switchCallback=null)},onUnload:function(){delete this.switchCallback,delete this.switchIndicator},setCallback:function(a){if(!this.switchCallback)this.switchCallback=a;else{var b=this.switchCallback;this.switchCallback=function(){b(),a()}}},setIndicator:function(a){this.switchIndicator=a},switchAction:function(){},switchWrapper:function(){this.switchIndicator&&(this.switchIndicator.$("#@switch_indicator").addClass("hidden"),delete this.switchIndicator),this.switchAction(),this.switchCallback&&this.switchCallback()},switchIfReady:function(){this.switchWanted=!0,this.switchReady?this.switchWrapper():this.switchIndicator?this.switchIndicator.$("#@switch_indicator").removeClass("hidden"):delete this.switchIndicator},switchIfWanted:function(){this.switchReady=!0,this.switchWanted&&this.switchWrapper()}}),a.SwitchableComponentWithComments=a.SwitchableComponent.extend({switchAndViewComments:function(){var a=this.lookup("comment_switch",!0);a&&a.viewComments&&a.viewComments()}}),a.SwitchIndicator=d.extend({onLoad:function(){this.lookup("switchable").setIndicator(this)}}),a.SwitchComponent=d.extend({switchAction:function(){this.switch_link&&this.switch_link_hide&&this.$("#@switch_link").hide(),this.switchable.switchIfReady()},onLoad:function(){this.switchable=this.lookup("switchable"),this.switch_trigger==="click"&&this.switch_link&&this.$("#@switch_link").click(this.fnbind(function(a){this.switchAction(),a.preventDefault()}))},onUnload:function(){delete this.switchable}})}),require.installLazy("app/view/user/profile",\'var Component=require("w2.quora").Component,windowManager=require("window_manager"),toggle=require("view/toggle");exports.ProfileTopWritersBadge=Component.extend({onLoad:function(){this.$("#@badge").tooltip({contents:"Top Writer "+this.year})}}),exports.NGTopWriterBadge=Component.extend({onLoad:function(){this.$("#@badge").tooltip({contents:"Top Writer "+this.year})}}),exports.TopicExpertSubmitApplicationForm=Component.extend({onLoad:function(){this.$("#@submit").click(this.fnbind(function(){var a=this.cQuery(":topic_selector.topic_add").getTempTopicNamesAsArray();this.serverCall("submit_application").kwargs({topic_names:a}).liveMutate().send()}))}}),exports.RestrictedTopicExpertSubmitApplicationForm=Component.extend({onLoad:function(){var a=this;a.$("#@submit").click(this.fnbind(function(){for(var b=0;b<this.tid_count;b++)a.lookup("item_"+b).submit()}))}}),exports.RestrictedTopicExpertSubmitApplicationItem=Component.extend({onLoad:function(){var a=this.$("#@checkbox"),b=this.lookup("field");a.click(this.fnbind(function(){a.attr("checked")=="checked"?b.showEditor():b.hideEditor()}))},checkBox:function(){this.$("#@checkbox").attr("checked","checked")},submit:function(){var a=this.$("#@checkbox");if(a.attr("checked")=="checked"){var b,c,d=this.lookup("field").can_edit;if(d){c=this.lookup("field").needs_bio;var e=this.cQuery(":field.editor");e.isEmpty()||(b=e.serialize())}(!c||!d||c&&b)&&this.serverCall("submit_application").liveMutate().send(),b&&this.serverCall("update_bio").kwargs({bio:b}).liveMutate().send()}}}),exports.RestrictedTopicExpertSubmitApplicationSigField=Component.extend({onLoad:function(){var a=this;this.$("#@link").click(this.fnbind(function(){return a.showEditor(),a.lookup("item").checkBox(),!1}))},showEditor:function(){this.$("#@link").hide(),this.$("#@editor").show()},hideEditor:function(){this.$("#@link").show(),this.$("#@editor").hide()}}),exports.ProfileNameAndSigEditor=Component.extend({onLoad:function(){windowManager.getHash().substr(0,9)=="#editname"&&(this.toggleEditor(),this.showNameEditor(),this.$("#@name").focus()),this.$("#@edit").click(this.fnbind(function(){return this.toggleEditor(),this.$("#@bio").focus(),!1})),this.$("#@edit_name").click(this.fnbind(function(){return this.showNameEditor(),!1})),this.$("#@done").click(this.fnbind(function(){return this.hideNameEditor(),this.toggleEditor(),!1})),this.$("#@update").click(this.fnbind(function(){var a=this.$("#@name").val(),b=this.$("#@bio").val();return this.serverCall("update").kwargs({name:a,bio:b}).success(this.fnbind(function(a){a?(this.$("#@name").addClass("input_validation_error"),this.$("#@error").text(a+".").show()):this.toggleEditor()})).liveMutate().send(),!1}))},showNameEditor:function(){this.$("#@edit_name").hide(),this.$("#@view_name").hide(),this.$("#@name_input").show()},hideNameEditor:function(){this.$("#@edit_name").show(),this.$("#@view_name").show(),this.$("#@name_input").hide()},toggleEditor:function(){this.$("#@view").toggle(),this.$("#@edit_view").toggle(),this.$("#@error").text("").hide(),this.$("#@name").removeClass("input_validation_error")}}),exports.ProfileStructuredTopic=Component.extend({onLoad:function(a){return}}),exports.VerificationBadge=Component.extend({onLoad:function(a){this.$("#@badge").tooltip({contents:this.tooltip_text})}}),exports.ProfileTopicEditor=Component.extend({onLoad:function(){require("jquery.ui-1.8.17");var a=this;a.editor&&(a.$(".RemoveStructuredTopic").click(function(){$(this).parent(".ProfileTopicEditorItem").fadeOut()}),a.$("#@list").sortable({placeholder:"placeholder"}),a.$("#@list").on("sortupdate",function(b,c){a.updateOrder()}))},updateOrder:function(){var a=[];this.$("#@list").find(".ProfileTopicEditorItem").each(function(){var b=$(this).attr("tid");a.push(parseInt(b))}),this.serverCall("set_topic_positions_for_type").kwargs({tids:a,type:this.type}).liveMutate().send()}}),exports.NGProfileNameEditor=toggle.ToggledComponent.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@update").click(this.fnbind(function(){var a=this.$("#@name").val();return this.serverCall("update").kwargs({name:a}).success(this.fnbind(function(a){this.toggle()})).liveMutate().send(),!1}))}}),exports.NGProfileSigEditor=toggle.ToggledComponent.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@update").click(this.fnbind(function(){var a=this.$("#@bio").val();return this.serverCall("update").kwargs({bio:a}).success(this.fnbind(function(a){this.toggle()})).liveMutate().send(),!1}))}});\'),require.installLazy("app/view/question/not_helpful",\'var Component=require("w2.quora").Component;exports.CollapseAnswerLink=Component.extend({onLoad:function(){this.$("#@undo_not_collapsible").click(this.fnbind(function(a){return this.serverCall("undo_not_collapsible").kwargs({aid:this.aid}).liveMutate().send(),!1})),this.$("#@make_uncollapsible").click(this.fnbind(function(a){return this.serverCall("make_uncollapsible").kwargs({aid:this.aid}).liveMutate().send(),!1})),this.$("#@undo_collapse").click(this.fnbind(function(a){return this.serverCall("undo_collapse").kwargs({aid:this.aid}).liveMutate().send(),!1})),this.$("#@collapse").click(this.fnbind(function(a){return this.serverCall("collapse").kwargs({aid:this.aid}).liveMutate().send(),!1})),this.$("#@undo_lock").click(this.fnbind(function(a){return this.serverCall("unlock").kwargs({aid:this.aid}).liveMutate().send(),!1})),this.$("#@lock_collapse").click(this.fnbind(function(a){return this.serverCall("lock_collapse").kwargs({aid:this.aid}).liveMutate().send(),!1}))}});\'),require.installLazy("view/filterable_list",\'var Component=require("w2.quora").Component;exports.FilterableList=Component.extend({onLoad:function(){this.lastQuery=null,this.delay=100;var a=this;this.$("#@search").keyup(function(){var b=a.fnbind(function(b){a.fetchResults(b)});setTimeout(b,a.delay,a.$("#@search").val())}),this.$("#@search_link").click(this.fnbind(function(){return this.$("#@search_link, #@bullet").hide(),this.$("#@search").show().focus(),this.$("#@after_search").show().focus(),this.$("#@search_row").show().focus(),!1}))},newQueryEntered:function(a){},fetchResults:function(a){if(a!=this.$("#@search").val())return;if(a==this.lastQuery)return;a&&a!==""&&a!=this.lastQuery?(this.serverCall("search_results").kwargs({query:a}).contentFor(this.$("#@search_results"),{parentCID:this.cid,useLoadingSpinner:!1}).success(this.fnbind(function(){var a=this.$("#@search").val();a&&a!==""?(this.$("#@search_results").show(),this.$("#@default").hide()):(this.$("#@search_results").hide(),this.$("#@default").show())})).send(),this.lastQuery=a,this.newQueryEntered(a)):a===""&&(this.$("#@search_results").hide(),this.$("#@default").show())}});\'),require.install("facebook",function(require,a,b){function k(a){a==null&&(a=0);var b=function(){if(!j){j=!0;var a=document,b=a.createElement("div"),c=a.createElement("script");b.setAttribute("id","fb-root"),c.async=!0,c.src="//connect.facebook.net/en_US/all.js",b.appendChild(c),a.body.appendChild(b)}};c.client_side_js_load_delays_enabled?$.whenIdle(a,b,"facebook.requestAllJs"):$.whenIdle(0,b,"facebook.requestAllJs")}function m(a){g?a():(k(350),$(h).bind("initialized",a))}function n(a){m(function(){FB.getLoginStatus(function(b){a(b)})})}function o(a){(i===null||a)&&n(function(a){a.status=="connected"&&p()})}function p(a){FB.api("/me/permissions",function(b){b.data&&b.\ndata.length>0?(i=b.data[0],a&&a(!0,i)):(i=null,a&&a(!1))})}function q(a){return i&&i[a]==1}function r(a,b){for(var c=0;c<a.length;++c)if(!b(a[c]))return!1;return!0}function s(a,b,c){if(!g)return o(),!1;var d=null;return FB.getAuthResponse()&&(d=FB.getAuthResponse().userID),d&&a?d==a?q("publish_stream")?b():t(a,b):c(d):t(a,b,c),!1}function t(a,b,c){FB.login(function(d){if(d.status=="connected"){var e=d.authResponse;!a||e.userID==a?b(e.userID,e.accessToken,e.expiresIn):c(e.userID)}},{scope:"publish_stream"})}function w(a,b,c){m(function(){FB.ui({method:"apprequests",message:a,to:b.join(",")},c)})}function x(a,b){m(function(){FB.ui({method:"apprequests",message:a},b)})}function y(a,b){m(function(){FB.api(a,"delete",b)})}function z(a,b){m(function(){a.method="send",FB.ui(a,b)})}var c=require("settings"),d=require("webnode2"),e=require("window_manager"),f=require("w2.quora").Component,g=!1,h={},i=null;window.fbAsyncInit=function(){var a=require("settings").fbAppId;FB.init({appId:a,oauth:!0}),g=!!a,$(h).trigger("initialized")};var j=!1,l=f.extend({init:function(){this._super.apply(this,arguments),k(350)}});a.isInitialized=function(){return g},a.onInit=m,a.getLoginStatus=n,a.getAuthResponse=function(){return g?FB.getAuthResponse():null},a.getAccessToken=function(){var b=a.getAuthResponse();return b?b.accessToken:null},a.getExpiresIn=function(){var b=a.getAuthResponse();return b?b.expiresIn:null},a.getFbUid=function(){var b=a.getAuthResponse();return b?b.userID:null},a.FacebookAccessTokenRefresher=f.extend({onLoad:function(){var a=this;n(function(b){if(b.status=="connected"){var c=b.authResponse;a.serverCall("update_access_token").kwargs({fb_uid:c.userID,access_token:c.accessToken,expires:c.expiresIn}).success(function(a){a&&require("settings").pageMode=="post_reload"&&require("window_manager").reload()}).send()}})}}),a.asyncUpdatePermissions=o,a.updatePermissions=p,a.hasPermission=q,a.requestPermissions=function(a,b){r(a.split(","),q)?b(!0):FB.login(function(c){c.status==="connected"?p(function(c,d){b(c&&r(a.split(","),q))}):b(!1)},{scope:a})},a.FacebookShare=f.extend({onLoad:function(){this.posted=!1,this.child("fb_different_account").bind("hide",this.fnbind(function(){this.$("#@fb_share_button").removeClass("submit_button_disabled")})),this.child("fb_connect_button").bind("fb_connected",this.fnbind(function(){this.$("#@fb_connect_button_wrapper").hide(),this.$("#@fb_form").show(),this.$("#@fb_share_button").show()})),o()},submit:function(){return this.posted?!1:(this.hasServerSidePublishStreamPerms?this.publish():s(this.fb_uid,this.fnbind(this.publish),this.fnbind(this.showSwitchAccount)),!1)},publish:function(a,b,c){this.posted=!0;var e=this.fnbind(function(){this.posted=!1,this.$("#@fb_form").show(),this.$("#@fb_posting").hide(),this.$("#@fb_share_button").removeClass("submit_button_disabled")});this.serverCall("fb_publish").kwargs({message:this.$("#@fb_message").val(),fb_uid:a,access_token:b,expires_secs:c}).success(this.fnbind(function(a){a.success===!0?d.Dialog.dialogFor(this).close_():(e(),p(),this.fb_uid=a.fb_uid,this.hasServerSidePublishStreamPerms=!1,this.$("#@fb_share_button").val("Retry Post to Facebook"))})).except(e).send(),this.$("#@fb_share_button").addClass("submit_button_disabled"),this.$("#@fb_form").hide(),this.$("#@fb_posting").show()},showSwitchAccount:function(a){this.child("fb_different_account").show(),this.$("#@fb_share_button").addClass("submit_button_disabled")},events:{"click #@fb_share_button":"onClickFbShareButton","click #@close":"onClickClose"},onClickFbShareButton:function(){this.submit()},onClickClose:function(){return d.Dialog.dialogFor(this).close_(),!1}}),a.FacebookShareNew=f.extend({onLoad:function(){this.child("fb_connect_button").bind("fb_connected",this.fnbind(function(){this.$("#@fb_connect_button_wrapper").hide(),this.$("#@fb_form").show()})),o()}}),a.FacebookConnectedToDifferentAccount=l.extend({show:function(){FB.api("/me",this.fnbind(function(a){a.name&&(this.$("#@fb_unknown_login").hide(),this.$("#@fb_logged_in_name").text(a.name),this.$("#@fb_logged_in_link").show(),this.$("#@fb_logged_in_link").attr("href",a.link))})),this.$("#@fb_different_account").show()},events:{"click #@fb_logout":"onClickFbLogout","click #@settings":"onClickSettings"},onClickFbLogout:function(){return FB.logout(this.fnbind(function(a){this.$("#@fb_different_account").hide(),this.trigger("hide")})),!1},onClickSettings:function(){this.trigger("hide"),this.$("#@fb_different_account").hide()}}),a.maybePromptToPublish=s,a._disconnect=function(){FB.getLoginStatus(function(a){a.authReponse?FB.api({method:"auth.revokeAuthorization"},function(a){a?console.log("Successfully disconnected"):console.error("Disconnection failed")},console.error):console.warn("Already not connected")})},a.FacebookLikeButton=l.extend({onLoad:function(){m(this.fnbind(this.parse))},parse:function(){FB.XFBML.parse(this.$("#@fb_like")[0])}}),a.ShareSectionFacebookLikeButton=a.FacebookLikeButton.extend({onLoad:function(){m(this.fnbind(function(){this.parse(),FB.Event.subscribe("edge.create",this.fnbind(function(a){this.serverCall("record_like").kwargs({url:a}).send()}))}))}}),a.FacepilePlugin=l.extend({onLoad:function(){m(this.fnbind(this.parse))},parse:function(){FB.XFBML.parse(this.$("#@fb_facepile")[0]),$(this).trigger("facepile_parsed")}}),a.FacebookFriends=l.extend({followAll:function(a){this.serverCall("follow_all").kwargs({uids:this.uids}).success(a).liveMutate().send()},events:{"click #@follow_all":"onClickFollowAll"},onClickFollowAll:function(a){return this.followAll(),!1}});var u=a.FacebookConnectButtonBase=l.extend({connect:function(){FB.login(this.fnbind(function(a){a&&a.status=="connected"?(this.onLogin(a.authResponse),this.trigger("fb_login",a.authResponse)):(this.onLoginFailed(),this.trigger("fb_login_failed"))}),{scope:this.perms})},onClick:function(){},onLogin:function(a){},onLoginFailed:function(){},events:{"click #@facebook_connect_button":"onClickFacebookConnectButton"},onClickFacebookConnectButton:function(){return g&&(this.connect(),this.onClick(),this.trigger("click")),!1}});a.FacebookConnectButton=u.extend({onLogin:function(a){this._onLogin(a)},_onLogin:function(a){var b=a.accessToken,c=this.serverCall("connect_facebook").kwargs({fb_access_token:a.accessToken,fb_uid:a.userID,expires:a.expiresIn}).success(this.fnbind(function(){this.trigger("fb_connected")}));this.live_mutate?c.liveMutate().send():c.send()}}),a.FacebookConnectAddToTimelineButton=a.FacebookConnectButton.extend({onLogin:function(a){p(this.fnbind(function(b,c){b&&"publish_actions"in c?this._onLogin(a):this.onLoginFailed()}))}}),a.FacebookAccountConnectedTo=l.extend({events:{"click #@facebook_disconnect_button":"onClickFacebookDisconnectButton"},onClickFacebookDisconnectButton:function(){return this.serverCall("disconnect_facebook").liveMutate().success(function(){FB.getLoginStatus(function(){},!0)}).send(),!1}}),a.FacebookOptionLink=l.extend({onLoad:function(){this.bindOptionEnable(),this.bindOptionDisable(),this.bindHideClick()},bindOptionEnable:function(){},bindOptionDisable:function(){},bindHideClick:function(){},events:{"click #@enable":"onClickEnable","click #@disable":"onClickDisable","click #@hide":"onClickHide"},onClickEnable:function(){return this.serverCall("toggle_option").kwargs({enabled:!0}).liveMutate().send(),!1},onClickDisable:function(){return this.serverCall("toggle_option").kwargs({enabled:!1}).liveMutate().send(),!1},onClickHide:function(){return this.serverCall("hide").liveMutate().send(),!1}}),a.FacebookToggleTimelineLink=l.extend({onEnable:function(a){this.serverCall("enable_timeline").kwargs({fb_access_token:a.accessToken,fb_uid:a.userID,expires:a.expiresIn}).liveMutate().send()},onDisable:function(){this.serverCall("disable_timeline").liveMutate().send()},onLoginFailed:function(){this.$("#@option").attr("checked",!1)},events:{"click #@enable":"onClickEnable","click #@disable":"onClickDisable"},onClickEnable:function(){return FB.login(this.fnbind(function(a){if(a&&a.status=="connected"){var b=a.authResponse;this.trigger("fb_login",a.authResponse),p(this.fnbind(function(a,c){a&&"publish_actions"in c?this.onEnable(b):this.onLoginFailed()}))}else this.onLoginFailed(),this.trigger("fb_login_failed")}),{scope:"publish_actions"}),!1},onClickDisable:function(){return this.onDisable(),!1}}),a.FacebookProfile=l.extend({onLoad:function(){m(this.fnbind(this.loadFacebookProfile))},loadFacebookProfile:function(){FB.api({method:"fql.query",query:"SELECT uid, name, pic FROM user WHERE uid = "+this.fb_uid},this.fnbind(function(a){if(a){var b=a[0];b.pic&&this.$("#@photo").attr("src",b.pic),b.name?this.$("#@name").text(b.name):this.$("#@name").html("<span style=\'color: gray;\'>Couldn\'t retrieve info from Facebook; you may not be logged in to Facebook.</span>")}}))}});var v=a.SignupFacebookConnectButtonBase=u.extend({onClick:function(){require("cookies").checkAgeGate(),this.serverCall("record_signup_step").kwargs({signup_action:"signup_connect_to_facebook"}).send()},onLogin:function(a){this.serverCall("on_facebook_connected").kwargs({fb_uid:a.userID,access_token:a.accessToken,expires:a.expiresIn}).send(),this._onLogin(a)},onLoginFailed:function(){this.serverCall("record_signup_step").kwargs({signup_action:"signup_facebook_connect_failed"}).send()},_onLogin:function(a){}});a.SignupFacebookConnectButton=a.SignupFacebookConnectButtonBase.extend({_onLogin:function(a){this.queryFacebookProfile(a)},queryFacebookProfile:function(a){FB.api({method:"fql.query",query:"SELECT name, pic_big, contact_email FROM user WHERE uid = "+a.userID},this.fnbind(function(b){this.trigger("fb_connected",a,b),b&&b[0]&&this.serverCall("record_signup_step").kwargs({signup_action:"signup_facebook_connected"}).send()}))}}),a.SignupFacebookConnectButtonWithoutLoginHandler=a.SignupFacebookConnectButtonBase,a.SignupFacebookConnectButtonLoggedinWall=v.extend({onClick:function(){require("cookies").checkAgeGate(),this.serverCall("record_signup_step").kwargs({signup_action:"signup_connect_to_facebook"}).send(),this.serverCall("fb_connect_click").send()}}),a.OpengraphRoadblockMain=l.extend({onLoad:function(){var a=this},events:{"click #@cancel":"onClickCancel"},onClickCancel:function(a){var b=this;return b.serverCall("cancel").liveMutate().send(),!1}}),a.InviteViaFacebookMessageButton=l.extend({onLoad:function(){this.auto_click&&this.$("#@invite_button").click()},invite:function(){var b=a.getFbUid();this.from_fb_uid!=b&&b?this.serverCall("facebook_connected_to_different_account").send():this.sendMessage()},sendMessage:function(){var a={to:this.to_fb_uid,link:this.link_url,name:this.link_title,description:this.description,picture:this.picture,display:"popup"};z(a,this.fnbind(function(a){a&&!("error_code"in a)&&this.serverCall("record_facebook_invite_message").kwargs({uid:this.uid,to_fb_uid:this.to_fb_uid,code:this.code,location:this.location}).send()}))},events:{"click #@invite_button":"onClickInviteButton"},onClickInviteButton:function(){return this.serverCall("record_facebook_invite_click").kwargs({uid:this.uid,to_fb_uid:this.to_fb_uid,code:this.code,location:this.location}).send(),this.invite(),!1}}),a.BatchFacebookInviteButton=l.extend({events:{"click #@invite_button":"onClickInviteButton"},onClickInviteButton:function(){w(this.msg,this.to_fb_uids,this.fnbind(function(a){a&&this.serverCall("record_invite_facebook_users").kwargs({from_fb_uid:this.from_fb_uid,to_fb_uids:this.to_fb_uids,fb_request_id:a.request}).send()}))}}),a.BatchFacebookInviteWithSelectorButton=l.extend({events:{"click #@invite_button":"onClickInviteButton"},onClickInviteButton:function(){x(this.msg,this.fnbind(function(a){a&&this.serverCall("record_invite_facebook_users").kwargs({from_fb_uid:this.from_fb_uid,to_fb_uids:a.to,fb_request_id:a.request}).send()}))}})}),require.installLazy("view/upload",\'var Component=require("w2.quora").Component,windowManager=require("window_manager"),W2=require("webnode2");exports.UploadDialogContents=Component.extend({onLoad:function(){this.$("#@web_upload_link").click(this.fnbind(function(){return this.$("#@view_web_upload").hide(),this.$("#@web_upload").show(),this.lookup("upload_web").focus(),!1})),this.child("upload_form").success(this.fnbind(this.uploadSuccess))},uploadSuccess:function(){}}),exports.InlineUploadWeb=Component.extend({onLoad:function(){var a=this;a.$("#@download").click(function(){var b=a.$("#@url").focus().val(),c;return b&&(c=new Image,c.onload=function(){a.download(b)},c.onerror=function(){a1ert("Please enter the URL of a valid image."),a.$("#@url").val("")},c.src=b),!1})},download:function(a){},focus:function(){this.$("#@url").focus()}}),exports.InlineUploadPhotoWeb=exports.InlineUploadWeb.extend({download:function(a){return this.serverCall("download").kwargs({target_id:this.target_id,target:this.target,url:a}).contentFor(this.$("#@wrapper"),{parentCID:this.cid}).liveMutate().except("image_error",this.fnbind(function(a){a1ert(a.message),W2.Dialog.dialogFor(this).close_()})).except("thumbs_already_set",this.fnbind(function(){W2.Dialog.dialogFor(this).close_()})).send(),!1}}),exports.InlineUploadQTextImageWeb=exports.InlineUploadWeb.extend({download:function(a){var b=W2.Dialog.openerFor(this);W2.Dialog.dialogFor(this).close_(),b.addImage(a)}}),exports.UploadFileForm=Component.extend({onLoad:function(a){return $.loaded||($.loaded=function(a){a()}),$.loaded(function(){$(document).bind("quora_file_uploaded",function(b,c){var d=a[c.rand];d&&(delete a[c.rand],d.onUpload(c))})}),function(){a[this.rand]=this,$.loaded(this.fnbind(function(){this.$("#@file").attr("onChange","$(this).parents(\\\'form\\\').submit().find(\\\'.spinner\\\').show();")}))}}({}),onUpload:function(a){typeof this._upload=="function"&&this._upload(a)},success:function(a){return this._upload=a,this}}),exports.ImportBlogXmluploadForm=exports.UploadFileForm.extend({onLoad:function(){this._super.apply(this,arguments),this.create_blog=this.cQuery(":create_blog"),this.create_blog_form=this.create_blog.$(".create_form"),this.create_blog_title=this.create_blog.$("#@create_blog_title"),this.create_blog_details=this.create_blog.child("editor").$("#@editor"),this.blog_importer=this.cQuery(":blog_importer"),this.$("#@file").addClass("hidden"),this.$("input[name=platform]").change(this.fnbind(function(){this.$("#@file").fadeIn("fast"),this.$(".xml_title").fadeIn("fast"),this.blog_importer.$("#@xml_help").fadeIn("fast")})),this.$("#@wordpress").click(this.fnbind(function(){this.checkWordpress()})),this.$("#@blogger").click(this.fnbind(function(){this.checkBlogger()})),this.$("#@file").change(this.fnbind(function(){this.startUpload()}))},checkWordpress:function(){this.blog_importer.$("#@blogger_help").addClass("hidden"),this.blog_importer.$("#@wordpress_help").removeClass("hidden")},checkBlogger:function(){this.blog_importer.$("#@blogger_help").removeClass("hidden"),this.blog_importer.$("#@wordpress_help").addClass("hidden")},startUpload:function(){this.blog_importer.$("#@importer_form_wrapper").addClass("hidden"),this.blog_importer.$("#@importing").removeClass("hidden"),this.blog_importer.$("#@blog_importer").find("h2").html("Uploading your file now..."),this.blog_importer.$("#@blog_importer").find("p").html("This will take approximately 30 seconds."),this.disableForm()},onUpload:function(a){this.serverCall("import_blog_xml").kwargs({xml_hash:a.xml_cloudstore_hash,platform:a.platform}).success(this.fnbind(function(a){this.fillUpForm(a.import_id,a.title,a.description),this.blog_importer.$("#@blog_importer").fadeOut("fast")})).send()},disableForm:function(){this.create_blog.$("#@name").addClass("qtext_editor_content_disabled"),this.create_blog.child("subdomain").$("#@url").addClass("qtext_editor_content_disabled"),this.create_blog_details.addClass("qtext_editor_content_disabled"),this.create_blog.$("#@create").addClass("submit_button_disabled")},enableForm:function(){this.create_blog.$("#@name").removeClass("qtext_editor_content_disabled"),this.create_blog.child("subdomain").$("#@url").removeClass("qtext_editor_content_disabled"),this.create_blog_details.removeClass("qtext_editor_content_disabled"),this.create_blog.$("#@create").removeClass("submit_button_disabled")},fillUpForm:function(a,b,c){this.enableForm(),this.blog_name=b,this.desc=c,this.create_blog_title.html("Ready to Import Blog"),this.create_blog.$("#@create").html("Continue"),this.create_blog.$("#@name").val(this.blog_name).effect("highlight",{},2e3),this.create_blog.$("#@import_id").val(a),this.create_blog_details.removeAttr("data_placeholder").focus(),this.create_blog_details.html(this.desc).effect("highlight",{},2e3),this.create_blog.child("subdomain").$("#@url").focus()}}),exports.XmluploadForm=exports.UploadFileForm.extend({onUpload:function(a){if(this.next_url){var b=this.next_url;a.xml_cloudstore_hash&&(b=b+"?xml_hash="+a.xml_cloudstore_hash),windowManager.navigateTo(b)}}}),exports.EditPhotoDialogContents=exports.UploadDialogContents.extend({onLoad:function(){return this._super.apply(this,arguments),this.$("#@from_facebook").click(this.fnbind(function(a){this.fb_uid&&require("facebook").onInit(this.fnbind(function(){FB.api({method:"fql.query",query:"SELECT pic_big FROM user WHERE uid = "+this.fb_uid},this.fnbind(function(a){var b=a[0];b.pic_big?(this.$("#@view_web_upload").hide(),this.$("#@web_upload").hide(),this.lookup("upload_web").$("#@url").hide().val(b.pic_big),this.lookup("upload_web").$("#@download").click(),this.$("#@web_upload").show()):a1ert("You don\\\'t seem to have a profile picture on Facebook.")}))}))})),!1},uploadSuccess:function(a){a.need_thumb_selection?this.serverCall("upload").kwargs({target_id:this.target_id,target:this.target}).contentFor(this.$("#@iframe"),{parentCID:this.cid}).send():W2.Dialog.dialogFor(this).close_()}}),exports.UploadQTextImageDialogContents=exports.UploadDialogContents.extend({uploadSuccess:function(a){var b=W2.Dialog.openerFor(this);W2.Dialog.dialogFor(this).close_(),b.addImage(a.qimg_url),b.inputEntered()}});\'),require.installLazy("app/view/pmsg/all",\'var Component=require("w2.quora").Component;exports.FlagConfirmationPmsg=Component.extend({onLoad:function(){this.$("#@undo").click(this.fnbind(function(a){return this.undo(),!1}))},undo:function(){this.serverCall("undo").liveMutate().send()}});\'),require.installLazy("app/view/board/submission",\'var Component=require("w2.quora").Component;exports.SimpleUserRequestCommentConfirm=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){return this._dialog=this.dialog().title(this.title).cancel(null,"Cancel").ok(this.fnbind(function(){var a=arguments[0].dialogComponent,b=a.cQuery(":comment").serialize();this.serverCall("request").kwargs({comment:b}).liveMutate().send()}),this.button_text).load("comment_dialog"),!1}))}}),exports.SubmissionView=Component.extend({onLoad:function(a){var b=this;this.$("#@item").hover(function(a){b.$("#@delete").show(),b.$("#@item").addClass("hover")},function(a){b.$("#@delete").hide(),b.$("#@item").removeClass("hover")}),this.$("#@update_accept").click(this.fnbind(function(){return this.request("update_accept"),!1})),this.$("#@update").click(this.fnbind(function(){return this.request("update"),!1})),this.$("#@edit").click(this.fnbind(function(){return this.toggle(),!1})),this.$("#@cancel").click(this.fnbind(function(){return this.toggle(),!1}))},getNewPreview:function(){return null},request:function(a){var b=this.lookup("description").serialize(),c=this.lookup("title").serialize(),d=this.getNewPreview();this.serverCall(a).kwargs({new_description:b,new_title:c,new_preview:d}).liveMutate().send()},toggle:function(){this.$("#@editor").toggle(),this.$("#@content").toggle()}}),exports.LinkSubmissionView=exports.SubmissionView.extend({getNewPreview:function(){return this.cQuery(":link_editor.preview").getLinkInfo()}}),exports.RejectSubmissionDialogContents=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){return this.$("#@comment").toggle(),this.lookup("comment").focus(),!1}))}});\'),require.installLazy("app/view/contact_browser",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.DeleteContactsButton=Component.extend({onLoad:function(a){this.$("#@delete").click(this.fnbind(function(){return this.openDialog(),!1}))},openDialog:function(){this.dialog().title("Delete Imported Contacts").cancel(null,"Close").ok(this.fnbind(function(){this.serverCall("delete_contacts").success(this.fnbind(function(){location.reload(!0)})).send()}),"Delete Contacts").html("Are you sure you want to delete your imported contacts?")}}),exports.ContactListEmailLink=Component.extend({onLoad:function(a){this.$("#@email").click(this.fnbind(function(){return this.lookup("invite_button").invite(this.all_emails),!1}))}}),exports.InviteButton=Component.extend({onLoad:function(){this.$("#@invite").click(this.fnbind(function(){return this.invite(),!1})),this.auto_click&&this.$("#@invite").click()},invite:function(a){var b=this.name?this.name:this.emails,c="/contacts/ajax_invite_dialog_GET?",d=a||this.emails;d&&d.length>0&&(c+="emails="+d+"&"),this.fb_uid&&(c+="fb_uid="+this.fb_uid+"&"),this.tw_uid&&(c+="tw_uid="+this.tw_uid+"&"),this.li_uid&&(c+="li_uid="+this.li_uid+"&"),this.funnel_code&&(c+="funnel_code="+this.funnel_code+"&"),c+="name="+b,this.location&&(c+="&location="+this.location),$(".content").dialog({title:"Invite "+unescape(b)+" to Quora",url:c,mobile:this.mobile,id:"invite_dialog",buttons:null})}}),exports.InviteViaTwitterButton=exports.InviteButton.extend({invite:function(a){var b=this.name?this.name:this.emails,c="/contacts/ajax_invite_via_twitter_dialog_GET?";this.tw_uid&&(c+="tw_uid="+this.tw_uid+"&"),this.funnel_code&&(c+="funnel_code="+this.funnel_code+"&"),c+="name="+b,this.location&&(c+="&location="+this.location),$(".content").dialog({title:"Invite "+unescape(b)+" to Quora",url:c,mobile:this.mobile,id:"invite_dialog",buttons:null})}}),exports.InviteConfirmationDialog=Component.extend({onLoad:function(){this.emails.length>0?this.email=this.emails[0]:this.email=null,this.$("#@menu_link").click(this.fnbind(function(){return this.$("#@menu_items").menu(this.$("#@menu_link")),!1})),this.$(".menu_list_item a").click(this.fnbind(function(a){return this.$("#@active_email").text(this.email=$(a.currentTarget).text()),this.$(".menu_list_item a").removeClass("selected"),$(a.currentTarget).addClass("selected"),!1})),this.$("#@send").click(this.fnbind(function(){return this.request(),!1})),this.$("#@cancel").click(this.fnbind(function(){return this.close(),!1}))},request:function(){var a=this.lookup("msg").getVal(),b=[],c=[];$("#invite_dialog .temp_topics_list input").each(function(){b.push($(this).val())}),$("#invite_dialog .temp_suggested_question input").each(function(){c.push($(this).val())}),this.serverCall("record_invite_confirm_button_clicked").kwargs({funnel_code:this.funnel_code}).send(),W2.rpc("/contacts/ajax_send_invite_POST").kwargs({email:this.email,msg:a,topics:b,questions:c,location:this.location,fb_uid:this.fb_uid,tw_uid:this.tw_uid,li_uid:this.li_uid}).success(this.fnbind(function(){this.close()})).send()},close:function(){$("#invite_dialog").remove()},setEmail:function(a){this.email=a}}),exports.InviteViaTwitterConfirmationDialog=exports.InviteConfirmationDialog.extend({request:function(){var a=this.lookup("msg").getVal();W2.rpc("/contacts/ajax_send_twitter_invite_POST").kwargs({msg:a,code:this.code,location:this.location,tw_uid:this.tw_uid}).liveMutate().success(this.fnbind(function(){this.close()})).send()}}),exports.ManualFacebookAndEmailInviteBox=Component.extend({setUserTo:function(a){this.to_fb_uid=a,this.to_fb_uid&&this.$("#@correct_button").setContentFromAJAXComponent("/contacts/ajax_invite_facebook_dialog_POST",{to_fb_uid:this.to_fb_uid,location:"search_box"})},setEmailTo:function(a){this.to_email=a,this.to_email&&this.$("#@correct_button").setContentFromAJAXComponent("/contacts/ajax_invite_email_dialog_POST",{email:this.to_email,location:"search_box"})}}),exports.ManualInviteBox=Component.extend({onLoad:function(){this.$("#@submit").click(this.fnbind(function(){function c(a){if(a.nodeType==3)return;if(/^textarea$/i.test(a.nodeName)){var d=a.getAttribute("name");d&&(a.removeAttribute("name"),b.push($("<input>").attr("name",d).attr("type","hidden").val($(a).val())))}for(var e=a.firstChild;e;e=e.nextSibling)c(e)}var a,b=[],d=this.$("#@invite_form");c(d[0]);while(a=b.pop())d.append(a);return d.submit(),!1}))}});\'),require.installLazy("view/announcement",\'var Component=require("w2.quora").Component;exports.Announcement=Component.extend({onLoad:function(){this.$("#@close").click(this.fnbind(function(){return this.closeAnnouncement("x"),!1})),this.serverCall("track_announcement_view").send()},closeAnnouncement:function(a){this.serverCall("close_announcement").kwargs({closing_action:a}).liveMutate().send()}}),exports.AddAdminAnnouncement=exports.Announcement.extend({onLoad:function(){this.$("#@accept").click(this.fnbind(function(){return this.closeAnnouncement("accept"),!1})),this.$("#@decline").click(this.fnbind(function(){return this.closeAnnouncement("decline"),!1})),this.serverCall("track_announcement_view").send()}}),exports.OnlineNowAnnouncement=exports.Announcement.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@blog_post_link, #@blog_post_image_link").click(this.fnbind(function(){this.closeAnnouncement("x")}))}}),exports.NetworkAnnouncement=exports.Announcement.extend({closeAnnouncement:function(a){this.serverCall("close_announcement").kwargs({ann_id:this.ann_id}).liveMutate().send()}}),exports.OpengraphLaunchAnnouncement=exports.Announcement.extend({onLoad:function(){this._super.apply(this,arguments),this.child("fb_connect").bind("fb_connected",this.fnbind(this.closeAnnouncement))}});\'),require.installLazy("app/view/login",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.LogoutAllSessionsButton=Component.extend({onLoad:function(){var a=this;a.$("#@logout").click(function(b){return a.serverCall("logout_all_sessions").kwargs({unh:a.unh,time:a.time,uid:a.uid}).liveMutate().send(),!1})}}),exports.SessionRow=Component.extend({onLoad:function(){var a=this;a.$("#@logout_session_form").click(function(b){return W2.rpc("/login/logout_session_POST").kwargs({hash:a.hash,time:a.time,uid:a.uid}).liveMutate().send(),!1})}});\'),require.installLazy("app/view/question/suggested_answer",\'var Component=require("w2.quora").Component;exports.AnswerSuggestedEditDiscardButtonInline=Component.extend({onLoad:function(){this.$("#@submit").click(this.fnbind(function(){return this.serverCall("discard_suggested_edit").kwargs({aid:this.aid}).liveMutate().send(),!1}))}});\'),require.installLazy("app/view/photo",\'var Component=require("w2.quora").Component,windowManager=require("window_manager"),W2=require("webnode2");exports.EditPhotoDialogLink=Component.extend({onLoad:function(){this.$("#@open_edit_photo").click(this.fnbind(function(){return this.editPhoto(),!1}))},editPhoto:function(){this._dialog||(this._dialog=this.dialog().title(this.dialog_title).cancel(null,"Close").load("set_dialog_contents").close(this.fnbind(function(){this._dialog=null})))}}),exports.EditPhotoChoice=Component.extend({onLoad:function(){this.$(".@img_choice").click(this.fnbind(function(a){var b=$(a.target).attr("choice");return this.serverCall("choose_photo").kwargs({choice:b}).success(this.fnbind(function(){this.next_url?windowManager.navigateTo(this.next_url):W2.Dialog.dialogFor(this).close_()})).send(),this.$("#@choices").text("Setting photo..."),!1}))}}),exports.PhotoUploadExample=Component.extend({onLoad:function(){this.child("upload_iframe").success(this.fnbind(function(){a1ert("successful upload")}))}});\'),require.installLazy("app/view/beta",\'var Component=require("w2.quora").Component,settings=require("settings");exports.ChallengesIndex=Component.extend({onLoad:function(a){this.origPos=this.$("#@outer").offset().top,this.installScrollHandlers(this.setPosition)},onUnload:function(){this.uninstallScrollHandlers()},setPosition:function(){var a=$(window).scrollTop();this.$("#@pinnable").addClass("component_fixed");var b;settings.new_grid?b=$(".SiteHeader").outerHeight():b=$(".header").outerHeight();if(a>this.origPos-b)this.$("#@pinnable").css("top",b+"px");else{var c=this.origPos-a;this.$("#@pinnable").css("top",c+"px")}}});\'),require.installLazy("app/view/board/dialog",\'var Component=require("w2.quora").Component;exports.AddToBoardDialog=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){return this._dialog=this.dialog().title(this.title).load("add_to_board_content"),$(document).one("login_cancelled",this.fnbind(function(){this.closeDialog()})),!1}))},closeDialog:function(){this._dialog.close_()}});\'),require.installLazy("app/view/thanks",\'var Component=require("w2.quora").Component;exports.ThanksLink=Component.extend({onLoad:function(){var a=this;this.$("#@thanks_link").click(function(){return a.serverCall("send_thanks").liveMutate().send(),!1})}});\'),require.installLazy("app/view/tumblr",\'var Component=require("w2.quora").Component;exports.TumblrCallbackPage=Component.extend({onLoad:function(){window.opener&&(this.url?(window.opener.$(window.opener.document).trigger("tumblr_oauth_approved",this.url),window.close()):alert("Tumblr account has no blogs!"))}});\'),require.installLazy("app/view/question/talk_page",\'var Component=require("w2.quora").Component;exports.TalkWiki=Component.extend({onLoad:function(){this.$("#@view_log").click(this.fnbind(function(){return this.$("#@log").toggleClass("hidden"),this.$("#@view_log").hide(),!1}))}});\'),require.installLazy("app/view/related",\'var Component=require("w2.quora").Component,toggle=require("view/toggle");exports.RelatedQuestionsToggler=toggle.TogglerComponent.extend({onVisible:function(){var a=this.fnbind(function(){this.serverCall("register_box_load").kwargs({experiment_id:this.experiment_id,clicktrack_id:this.clicktrack_id,qid:this.qid,qids:this.qids}).send()});$.whenIdle(350,a,"Quora.RelatedQuestionsToggler.registerBoxLoad")},toggle:function(){this._super.apply(this,arguments),this.serverCall("register_show_more").kwargs({experiment_id:this.experiment_id,clicktrack_id:this.clicktrack_id}).send()}});\'),require.installLazy("app/view/topic/top_answerers",\'var Component=require("w2.quora").Component;exports.TopTopicAnswerer=Component.extend({onLoad:function(){this.$("#@answerer").hover(this.fnbind(function(){this.lookup("remove").show()}),this.fnbind(function(){this.lookup("remove").hide()}))}});\'),require.installLazy("app/view/comment",\'var Component=require("w2.quora").Component;exports.CommentLinkSwitch=Component.extend({onLoad:function(){var a=this.$("#@view_comment_link");this.onKeyCombination(a,"c",function(){return a.mouseover().click(),!1})},viewComments:function(){var a=this.lookup("comments_list");a&&a.viewComments&&a.viewComments();var b=this.lookup("trackbacks");b&&b.hideTrackbacks&&b.hideTrackbacks()}}),exports.CommentLink=Component.extend({onLoad:function(){this.$("#@view_comment_link").click(this.fnbind(function(){return this.viewComments(),!1})),this.initState("loading",!1)},viewComments:function(){var a=this.lookup("comments_list");a&&a.viewComments?a.viewComments():this.state("loading",!0),this.lookup("trackbacks")&&this.lookup("trackbacks").hideTrackbacks()},stateHandlers:{loading:function(a){var b=this.$("#@loading_comment_link"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a),this.$("#@view_comment_link").toggleClass("hidden",a)}}});\'),require.install("action_log",function(require,a,b){function r(){n&&clearTimeout(n),n=setTimeout(s,o)}function s(){if(m.length==0)return;if(p){r();return}p=!0,q=m,m=[],d.rpc("/ajax/action_log_POST").kwargs({messages:q}).success(t).error(u).send()}function t(){q.length=0,p=!1}function u(){m=m.concat(q),q.length=0,p=!1}function v(a){m.push(a),r()}function w(a){if(!h[a.cid])return;a.impression_target&&v(a.impression_target),delete h[a.cid]}function x(a,b,c,d){e.setMessage("alog",[a,b,c,d])}function y(a,b){b||(b=null),x(a,b,null,null)}function z(a,b){var c=f.actionTrail;x(a,null,b,c)}function A(a){h[a.cid]=a,l||(g(document,"scroll",D),l=!0),C()}function B(a){delete h[a.cid]}function C(){k&&clearTimeout(k),k=setTimeout(D,i)}function D(){var a=+(new Date);if(a<j+i)return;j=a;for(var b in h){var c=h[b];c.$("#@actionable").is(":in-viewport")&&w(c)}}function E(a,b){if(!a)return;z(a,b)}var c=require("w2.quora").Component,d=require("webnode2"),e=require("cookies"),f=require("settings"),g=require("event").add,h={},i=500,j=0,k=null,l=!1,m=[],n=null,o=500,p=!1,q=[];a.logPrimaryAction=y,a.logSecondaryAction=z,a.ActionableComponent=c.extend({onLoad:function(){this._super.apply(this,arguments),A(this);var a=this;this.$("#@actionable").on("mousedown"\n,"[action_mousedown]",function(b){a.processAction($(b.currentTarget).attr("action_mousedown"),$(b.currentTarget).attr("action_target"))}),this.$("#@actionable").on("click","[action_click]",function(b){a.processAction($(b.currentTarget).attr("action_click"),$(b.currentTarget).attr("action_target"))})},sendActions:function(){this.serverCall("send_actions").send()},processAction:function(a,b){if(!a)return;w(this),y(a,this.impression_target),this.actionCallback(a)},actionCallback:function(a){},onUnload:function(){B(this)}}),$.loaded||($.loaded=function(a){a()}),$.loaded(function(){$(document).on("mousedown","[action_mousedown]",function(a){E($(a.currentTarget).attr("action_mousedown"),$(a.currentTarget).attr("action_target"))}),$(document).on("click","[action_click]",function(a){E($(a.currentTarget).attr("action_click"),$(a.currentTarget).attr("action_target"))})})}),require.install("view/inline_editor",function(require,a,b){var c=require("w2.quora").Component,d=require("webnode2"),e=require("cookies");a.InlineEditor=c.extend({onLoad:function(){this.input_obj=this.$("#@"+this.input),this.input_button="inline_editor_submit",this.input_button_obj=this.$("#@"+this.input_button),this.draft_space&&(this.draft_button="inline_editor_save_draft",this.draft_button_obj=this.$("#@"+this.draft_button)),this.toggle_callback=null,this.locked=!1,this.$("#@inline_editor_content").hover(this.fnbind(function(){this.$("#@inline_editor_content").addClass("hover")}),this.fnbind(function(){this.$("#@inline_editor_content").removeClass("hover")})),this.$("#@inline_editor_link").click(this.fnbind(function(){return this.onEditLinkClick(),!1})),this.$("#@inline_editor_cancel").click(this.fnbind(function(){return this.cancelEditor(),!1})),this.$("#@inline_editor_create_link").click(this.fnbind(function(){return this.toggle_editor(),!1})),this.submitHandler(),this.initDraftHandlers(),this.focus_onload&&this.focusInput(),this.typing_area&&this.lookup("editor").setTypingStateCallback(this.fnbind(function(a){this.serverCall("typing").kwargs({area:this.typing_area,state:a}).send()})),this.$("#@inline_editor_content").on("click",".spoiler",function(){$(this).toggleClass("revealed")}),this.$("#@inline_editor_content").on("dblclick",".spoiler",function(){$(document.body).toggleClass("spoiler_revealed")}),this.input_obj.is("[maxlength]")&&this.input_obj.on("keyup",function(){var a=$(this).attr("maxlength");$(this).val().length>a&&$(this).val(val.slice(0,a))})},onEditLinkClick:function(){this.toggle_editor()},initDraftHandlers:function(){this.draft_space&&(this.initEditorFocusCallback(),this.initDraftButtonClickCallback(),this.initMeaningfulChangeCallback())},initEditorFocusCallback:function(){this.lookup("editor").setFocusCallback(this.fnbind(function(){this.$("#@inline_editor_save_draft").removeClass("hidden")}))},initDraftButtonClickCallback:function(){this.draft_button_obj.click(this.fnbind(function(a){return this.save_draft(!0),!1}))},initMeaningfulChangeCallback:function(){this.lookup("editor").setMeaningfulChangeCallback(this.fnbind(function(){this.save_draft(!1)}))},cancelEditor:function(){this.toggle_editor();var a=this.lookup("name_validator");a&&a.hideAllErrors()},isEditorEmpty:function(){var a=this.getEditor();return a?a.isEmpty():!1},getEditor:function(){return this.lookup("editor")},submitHandler:function(){this.input_button_obj.click(this.fnbind(function(){return d.InputValidator.validate(this,{valid:this.fnbind(this.trigger_request),invalid:function(){}}),!1}))},get_value:function(){return this.is_qtext?this.lookup("editor").serialize():this.input_obj.val()},save_draft:function(a){var b=this.getSaveDraftMethod(a),c=this.serverCall(b).kwargs({content:this.get_value(),window_id:d.windowId,draft_space:this.draft_space});a&&(c.liveMutate(),d.interactionMode.isBlocking()&&d.fallbackToPostReloadMode("interaction")),c.send()},getSaveDraftMethod:function(a){return a?"save_draft":"save_draft_auto"},server_call_method:"edit",_get_kwargs:function(){return{id:this.id,input:this.get_value()}},trigger_request:function(){this.typing_area&&this.lookup("editor").stopTyping();if(this.locked)return!1;this.locked=!0,this.require_comment?this.showConfirmationDialog():!this.require_value||this.require_value&&!this.lookup("editor").isEmpty()?this.invokeEditServerCall(this._get_kwargs()):(this.lookup("editor").focus(),this.locked=!1)},invokeEditServerCall:function(a){var b=this.fnbind(function(){this.locked=!1});$(document).bind("login_cancelled",b),e.setTlog(this.tlog_data());var c=this.getLoggedAction();c&&require("action_log").logSecondaryAction(c,null);var d=this.serverCall(this.server_call_method).kwargs(a).success(this.fnbind(function(a){$(document).unbind("login_cancelled",b),this.ajax_callback(a),this.locked=!1})).error(function(){$(document).unbind("login_cancelled",b)}).liveMutate();this.edit_call_should_persist&&d.persistMutation(),d.send()},tlog_data:function(){return null},getLoggedAction:function(){return null},ajax_callback:function(a){this.toggle_editor()},focusInput:function(){this.is_qtext?$(".qtext_editor_content").focus():this.input_obj.focus()},setToggleCallback:function(a){if(!this.toggle_callback)this.toggle_callback=a;else{var b=this.toggle_callback;this.toggle_callback=function(){b(),a()}}},toggle_editor:function(){this.$("#@inline_editor_content").find(".qtext_embed").each(function(a,b){$(b).addClass("thumbnail").empty()}),this.$("#@inline_editor_content").toggleClass("hidden"),this.$("#@inline_editor_form").toggleClass("hidden"),this.is_qtext&&this.$("#@inline_editor_form").is(":visible")&&this.cQuery(":editor").focus(),this.toggle_callback&&this.toggle_callback()},showConfirmationDialog:function(){var a=this.input_button_obj.text();this._dialog=this.dialog().title("Confirm "+a).cancel(this.fnbind(function(){this.locked=!1}),"Cancel").ok(this.fnbind(function(){var a=arguments[0].dialogComponent,b=a.lookup("editor");if(!!b.isEmpty())return!1;var c=this._get_kwargs();c.comment=b.serialize(),this.invokeEditServerCall(c),this._dialog.close_()}),a).load("comment_dialog")},getReviewData:function(){var a=this.lookup("editor").child("review_rating");if(a){var b=a.$("#@ratings").attr("class").slice(-1);if(b)return{base:b}}return null}}),a.InlineEditCommentDialog=c.extend({onLoad:function(){this.lookup("editor").focus()}}),a.DraftStatus=c.extend({onLoad:function(){var a=this;a.$("#@draft_status_clear").click(function(){return $(".content").dialog({title:"Clear Draft",contents:"Are you sure you want to delete this draft? You will lose your work.",buttons:{"Clear Draft":function(){d.rpc("/ajax/ajax_clear_draft_POST").kwargs({draft_space:a.draft_space}).liveMutate().success(a.getClearDraftCallback()).send()},Cancel:null}}),!1})},getClearDraftCallback:function(){return function(){}}}),a.BoardDraftStatus=a.DraftStatus.extend({onLoad:function(){this._super.apply(this,arguments)},updateWithDraftId:function(a){this.child("toggled").toggle(!1,a)},getClearDraftCallback:function(){var a=this.parent();return function(){a.onClearDraft()}}})}),require.installLazy("app/view/instructions_wiki",\'var Component=require("w2.quora").Component,InlineEditor=require("view/inline_editor").InlineEditor;exports.InstructionsWikiInlineEditor=InlineEditor.extend({_get_kwargs:function(){return{id:this.id,input:this.get_value(),notif:this.$("#@notif").attr("checked")?1:0}}});\'),require.installLazy("view/datetime_",\'var Component=require("w2.quora").Component;exports.DateTimeComponent=Component.extend({onLoad:function(){if(this.js_disp){var a=new Date;a.setTime(this.epoch_us/1e3),this.ge("@datespan").innerHTML=a.toDateString()}}});\'),require.installLazy("app/view/suggested_questions",\'var Component=require("w2.quora").Component;exports.SuggestedQuestionItem=Component.extend({onLoad:function(a){this.$("#@ignore_button").tooltip({contents:"Ignore this Question Suggestion"}).click(this.fnbind(function(){return this.serverCall("ignore_question").liveMutate().send(),!1}))}});\'),require.installLazy("app/view/topic/topic_editor",\'var Component=require("w2.quora").Component,toggle=require("view/toggle");exports.QuestionTopicsEditorCallToAction=Component.extend({onLoad:function(a){a&&this.should_open_edit_state&&this.lookup("topics_editor").do_toggle()}}),exports.TopicsEditor=toggle.ToggledComponent.extend({onLoad:function(a){this.isPageLoad=a,this.lazy_load&&this.do_toggle(),this.$("#@done").click(this.fnbind(function(){return this.toggleClasses(),!1}))},focusSelector:function(){this.cQuery(":topic_list.selector_wrapper.selector").focus(!0)},toggleClasses:function(){this.$("#@selector").toggleClass("hidden"),this.$("#@view_topics").toggleClass("hidden"),this.$("#@edit_topics").toggleClass("hidden"),this.$("#@edit").toggleClass("hidden"),this.$("#@edit_link").toggleClass("hidden")},do_toggle:function(a){return this.lazy_load&&!this.toggled?!1:(this.toggleClasses(),(!this.isPageLoad||a===!0)&&this.focusSelector(),!0)}}),exports.TopicEditorButton=Component.extend({onLoad:function(){this.$("#@edit").click(this.fnbind(function(){return!this.parent().do_toggle(!0)})),this.$("#@add").click(this.fnbind(function(){return!this.parent().do_toggle(!0)}))}});\'),require.installLazy("app/view/oauth",\'var Component=require("w2.quora").Component;exports.OauthCallbackPage=Component.extend({onLoad:function(){window.opener?(this.access_token?window.opener.$(window.opener.document).trigger("oauth_approved",{service:this.service,accessToken:this.access_token}):window.opener.$(window.opener.document).trigger("oauth_rejected",{service:this.service}),window.close()):this.$("#@me").text("access token: "+JSON.stringify(this.access_token))}});\'),require.installLazy("app/view/linkedin_",\'var Component=require("w2.quora").Component;exports.LinkedinCallbackPage=Component.extend({onLoad:function(){window.opener&&(window.opener.$(window.opener.document).trigger("linkedin_oauth_approved",this.liUid),window.close())}});\'),require.installLazy("view/swf",\'var Component=require("w2.quora").Component;exports.SWFComponent=Component.extend({onLoad:function(){require("swfobject").embedSWF(this.swf_url,this.id,this.width,this.height,this.version,this.express_install_swf_url,this.flashvars,this.params,this.attributes,this.fnbind(this.callback))},callback:function(a){a.success?typeof this.success=="function"&&this.success(a):$.serverLog("Flash embed failed for SWF","ERROR",{swf_url:this.swf_url})},obj:function(){return document.getElementById(this.id)}});\'),require.install("keystrokes",function(require,a,b){function d(a,b){for(var d=0,e=c.length;d<e;++d)c[d].trigger(a,b)}var c=[];$.loaded(function(){require("event").add(document,"keydown",function(a){!$(a.target).attr("contenteditable")&&!$(a.target).is("input")&&d(a.keyCode||a.charCode,a)})});var e=function(a,b){this.codes=a,this.matchHandler=b,this.position=0};e.prototype.trigger=function(a,b){a===this.codes[this.position]?this.position+=1:this.position=0,this.position===this.codes.length&&(this.matchHandler(b),this.position=0)},a.on=function(a,b){typeof a=="number"?a=[a]:a=a.slice(0),c.push(new e(a,b))}}),require.installLazy("view/invisibleinfo",\'var Component=require("w2.quora").Component;exports.InfoToggle=Component.extend({onLoad:function(){this._state=!1,this.setupKeyboardShortcut()},toggle:function(){this._state?(this._state=!1,$(".invisible_info").hide()):(this._state=!0,$(".invisible_info").show())},setupKeyboardShortcut:function(){require("keystrokes").on([81,73,68,81,73,68],this.fnbind(this.toggle))}});\'),require.installLazy("app/view/topic_tagger",\'var Component=require("w2.quora").Component;exports.SuggestTopicsInline=Component.extend({onLoad:function(){this.$("#@update").click(this.fnbind(function(){var a=[];return this.$("#@topic_tagger_component .temp_topics_list input").each(function(){a.push($(this).val())}),a?(this.serverCall("suggest").kwargs({to_uid:this.to_uid,topics:a}).success(this.fnbind(function(a){this.lookup("selector").resetTempTopics(),this.$("#@update").hide()})).liveMutate().send(),!1):!1}))}});\'),require.installLazy("app/view/announcement",\'var Component=require("w2.quora").Component;exports.NUXQuestionPromptAnnouncementClose=Component.extend({onLoad:function(){this.$("#@close").click(this.fnbind(function(){return this.parent().closeAnnouncement(),!1}))}});\'),require.installLazy("app/view/board/view_tracker",\'var Component=require("w2.quora").Component,W2=require("webnode2"),addEvent=require("event").add;exports.instance=null,exports.BoardItemViewTracker=Component.extend({init:function(){exports.instance=this,this.all_board_item_ids={},this.reported_board_item_ids={},this.last_report_time=+(new Date),this.rate_limit_ms=3e3},onLoad:function(){var a=this.fnbind(this.report);addEvent(document,"mousemove",a),addEvent(document,"keypress",a),addEvent(document,"scroll",a)},addBoardItem:function(a,b){this.all_board_item_ids[a]=b},removeBoardItem:function(a,b){delete this.all_board_item_ids[a]},isBoardItemVisible:function(a){var b=W2._domids[a];if(!b)return!1;var c=document.getElementById(b);if(!c)return!1;var d=$(c);return d.children("div:first").is(":in-viewport")?d.is(":visible")?!0:!1:!1},report:function(){var a=+(new Date);if(a<this.last_report_time+this.rate_limit_ms)return;this.last_report_time=a;var b=[];for(var c in this.all_board_item_ids){var d=this.all_board_item_ids[c];this.reported_board_item_ids[d]==undefined&&this.isBoardItemVisible(c)&&(b.push(d),this.reported_board_item_ids[d]=!0)}b.length>0&&this.serverCall("report").kwargs({board_item_ids:b}).send()}});\'),require.installLazy("view/board_selector",\'var Component=require("w2.quora").Component;exports.BoardItemLabel=Component.extend({onLoad:function(a){var b=this.lookup("editor"),c=this.lookup("distro_options_container");this.is_submission?(b.setIsSubmission(!0),b.$("#@post_text").hide(),b.$("#@submit_text").show()):(b.setIsSubmission(!1),b.$("#@post_text").show(),b.$("#@submit_text").hide()),this.is_private||this.is_submission?c.hideDistroOptions():c.showDistroOptions()}});\'),require.installLazy("view/hover_menu",\'var Component=require("w2.quora").Component,log=require("log").log;exports.HoverMenu=Component.extend({onLoad:function(a){this.on=this.on||350,this.off=this.off||350,this.st=null,this.ht=null,this.loaded=this.loaded||this.should_preload_menu,this.loading=!1,this.shown=!1,this.cancelHover=!1,this.has_been_positioned=!1,this.loadOnPageLoad&&a&&this.loadMenu(!0),this.registerClickHandlers(),this.maybeRegisterHoverHandlers()},registerClickHandlers:function(){if(this.click_open){this.$("#@link").click(this.fnbind(function(b){this.shown?(a.cancelHover=!0,a.doHide()):(this.cancelHover=!1,this.loadMenu(),this.doShow()),b.preventDefault()}));var a=this;$(document).click(function(b){var c=a.isInvalidCloseTarget($(b.target));a.shown&&!c&&(a.cancelHover=!0,a.doHide())})}else this.$("a#@link").click(this.fnbind(function(){this.cancelHover=!0,this.doHide()}))},isInvalidCloseTarget:function(a){var b=this.$("#@link");return a.is(b)||a.parents(b).is(b)?!0:!1},maybeRegisterHoverHandlers:function(){this.show_menu&&!this.click_open&&(this.$("#@link").hover(this.fnbind(function(){this.show()}),this.fnbind(function(){this.hide(),this.cancelHover=!1,this.$("#@link").removeClass("hover")})),this.$("#@menu").hover(this.fnbind(function(){this.show()}),this.fnbind(function(){this.hide()})))},setPosition:function(){if(!this.css_positioning){var a=this.$("#@link").outerHeight(),b=this.$("#@link").offset(),c=b,d=$(window).height(),e=130,f=c.top-$(window).scrollTop(),g=d-f<e,h=this.menu_offset_px?this.menu_offset_px:0;g?(this.$("#@menu").css("bottom",d-b.top+h+"px"),this.has_been_positioned||(this.$("#@menu .hover_menu_contents:eq(0)").insertBefore(this.$("#@menu .hover_menu_nub")),this.$("#@menu").addClass("hover_menu_above"),this.$("#@menu .hover_menu_nub").addClass("hover_menu_nub_down"))):this.$("#@menu").css("top",b.top+a+1+h+"px");var i=$(window).width(),j=this.$("#@menu").outerWidth(),k=j+c.left,l=c.left;if(i<k){var m=k-i;this.alignment=="left"&&(l-=m+10),this.$("#@menu .hover_menu_nub").css("backgroundPositionX",m+20+"px")}else this.$("#@menu .hover_menu_nub").css("backgroundPositionX","10px");if(this.alignment=="right"){var n=this.$("#@link").outerWidth();this.$("#@menu").css("left",l-j+n+"px")}else this.alignment!="center"&&this.$("#@menu").css("left",l+"px")}this.has_been_positioned=!0},hide:function(){clearTimeout(this.st),this.ht=setTimeout(this.fnbind(this.doHide),this.off)},doHide:function(){if(!this.shown)return;this.shown=!1,this.$("#@link").removeClass("hover"),this.$("#@menu").addClass("fade_out"),setTimeout(this.fnbind(function(){this.shown||(this.$("#@menu").removeClass("fade_out"),this.$("#@menu").addClass("hidden"))}),150)},getKwargs:function(){return this.kwargs?this.kwargs:{}},okToShowHoverMenu:function(){return this.should_show_hover_menu&&this.$("#@menu").parents(".hover_menu_contents").length===0},show:function(){this.okToShowHoverMenu()&&this.showInner()},showInner:function(){clearTimeout(this.ht),this.st=setTimeout(this.fnbind(this.doShow),this.on),this.loadMenu(),this.$("#@menu").removeClass("fade_out"),this.$("#@link").addClass("hover")},doShow:function(){if(this.shown||this.cancelHover)return;this.shown=!0,!this.css_positioning&&!this.movedToBody&&(this.$("#@menu").detach().prependTo($("body")),this.movedToBody=!0),$(".fixed_hover_menu").hide(),this.$("#@menu").removeClass("hidden").show(),this.$("#@link").addClass("hover"),this.setPosition()},loadMenu:function(a){a==null&&(a=!1);var b=this.fnbind(function(){if(this.loaded||this.loading)return;log&&log.enabled&&log("Quora.HoverMenu.loadMenu",this.cid,"is loading, preload =",a),this.loading=!0,this.serverCall("load_menu").kwargs(this.getKwargs()).contentFor(this.$("#@menu_contents"),{parentCID:this.cid}).success(this.fnbind(function(b){log&&log.enabled&&log("Quora.HoverMenu.loadMenu",this.cid,"is loaded, preload =",a),this.loaded=!0,this.loading=!1})).except(this.fnbind(function(b){log&&log.enabled&&log("Quora.HoverMenu.loadMenu",this.cid,"is failed to load, preload =",a),this.loading=!1})).send()});a?$.whenIdle(1,1e3,b,"Quora.HoverMenu.loadMenu"):b()}});\'),require.installLazy("view/user",\'var Component=require("w2.quora").Component,HoverMenu=require("view/hover_menu").HoverMenu,cookies=require("cookies");exports.AnonUser=Component.extend({onLoad:function(){this.$("#@reveal").click(this.fnbind(function(){return $(".content").dialog({title:"Reveal Anonymous Identity",contents:"You may only reveal identities to properly administer the site and the person you reveal will be notified with your reason.",comment_form:"Explain your reason for revealing this name",buttons:{"Reveal Identity":this.fnbind(function(){return this.serverCall("anonreveal_content").args(this.eauid).contentFor(this.$("#@reveal"),{parentCID:this.cid}).success(this.fnbind(function(a){this.$("#@reveal").unbind("click")})).send(),!1}),Cancel:null}}),!1}))}}),exports.Name=HoverMenu.extend({onLoad:function(a){this._super.apply(this,arguments),this.$("#@link").mousedown(this.fnbind(function(){cookies.setQfeedLog(this,"UserClickthrough"),cookies.setQueryLog(this,"UserClickthrough")}))}}),exports.UserPhoto=Component.extend({onLoad:function(a){var b=this;this.$("#@link").mousedown(function(){cookies.setQfeedLog(b,"UserClickthrough"),cookies.setQueryLog(b,"UserClickthrough")})}});\'),require.installLazy("app/view/review_topics",\'var Component=require("w2.quora").Component;exports.ReviewTopicButton=Component.extend({onLoad:function(){this.$("#@review").click(this.fnbind(function(){return this.serverCall("review").liveMutate().send(),!1})),this.$("#@unreview").click(this.fnbind(function(){return this.serverCall("unreview").liveMutate().send(),!1}))}}),exports.ReviewNewTopicsMain=Component.extend({onLoad:function(){this.$("#@show").click(this.fnbind(function(){return this.toggleAll(),!1})),this.$("#@hide").click(this.fnbind(function(){return this.toggleAll(),!1})),this.$("#@popout").click(this.fnbind(function(a){var b=window.open("/inbox/popout_trq","thread_trq","height=590,width=296,scrollbars=1");return!1}))},toggleAll:function(){this.$("#@instructions").toggle(),this.$("#@show").toggle(),this.$("#@hide").toggle()}});\'),require.installLazy("view/object_browser",\'var Component=require("w2.quora").Component;exports.ObjectBrowser=Component.extend({onLoad:function(){this.$("#@browser_submit").click(this.fnbind(function(){return this.shareRequest(),this.close(),!1})),this.$(".@browser_close").click(this.fnbind(function(){return this.close(),!1})),this.$("#@browser_next").click(this.fnbind(function(){return this.countObjects()<=0?!1:(this.$("#@number_contacts").text(this.countObjects()),this.$("#@browser_list").addClass("hidden"),this.$("#@browser_preview").removeClass("hidden"),!1)})),this.$("#@browser_prev").click(this.fnbind(function(){return this.$("#@browser_list").toggleClass("hidden"),this.$("#@browser_preview").toggleClass("hidden"),!1}))},countObjects:function(){return $(":input[checked=true]").length},close:function(){$("#object_browser").remove()},shareRequest:function(){var a={object_id:this.object_id,type:this.type,msg_json:this.lookup("editor").serialize()};$(":input").each(function(){$(this).attr("checked")&&(a[$(this).attr("name")]=1)}),this.serverCall("share").liveMutate().kwargs(a).send()}}),exports.TopicBrowser=exports.ObjectBrowser.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@browser_next").click(this.fnbind(function(){var a=0,b="";$(".dialog .selected .topic_name").each(function(d){a>0&&(b+=", "),b+=\\\'<a href="#">\\\'+$(this).text()+"</a>",a++}),a==1?this.$(".@topic_plural").text(""):this.$(".@topic_plural").text("s"),this.$("#@object_names_preview").html(b)}))}});\'),require.install("view/fixable",function(require,a,b){function e(a){var b=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|webOS|IEMobile|Windows Phone|Opera Mini)/);if(b)return;var c=$(window),e=a.element,g;d.new_grid?g=$(".SiteHeader"):g=$(".header");if(g.length===0)throw"var siteHeader does not exist in fixable.js - please check";var h=g.hasClass("minimal_header"),i=h?0:g.outerHeight(),j=$(".main_content").outerWidth(),k=i+100,l=0,m=0,n=typeof a.width_dep=="undefined"?!1:a.width_dep,o=typeof a.height_dep=="undefined"?!1:a.height_dep,p=typeof a.scroll_dep=="undefined"?!1:a.scroll_dep,q=typeof a.fixed_offset=="undefined"?i:a.fixed_offset,r=typeof a.offset_pos=="undefined"?"top":a.offset_pos,s=typeof a.min_width=="undefined"?j:a.min_width,t=typeof a.min_height=="undefined"?k:a.min_height,u,v,w,x=function(){u=w.offset().top-q,v=u+w.outerHeight()-e.outerHeight()};p&&(w=typeof a.scroll_marker=="undefined"?null:a.scroll_marker,w?x():(u=typeof a.min_scroll=="undefined"?l:a.min_scroll,v=typeof a.max_scroll=="undefined"?m:a.max_scroll),u&&(u-=q),v&&(v-=q));var y=c.width(),z=c.height(),A=c.scrollTop();e.is(":visible")&&f(e,n,o,p,y,s,z,t,A,u,v,q,r),(n||o)&&c.resize(function(){y=c.width(),z=c.height(),A=c.scrollTop(),e.is(":visible")&&f(e,n,o,p,y,s,z,t,A,u,v,q,r)}),p&&c.scroll(function(){A=c.scrollTop(),w&&x(),e.is(":visible")&&f(e,n,o,p,y,s,z,t,A,u,v,q,r)})}function f(a,b,c,d,e,f,i,j,k,l,m,n,o){var p=!1;b&&(p=e>=f),c&&p&&(p=i>=j),d&&p&&(l>0?m>0?p=k>=l&&k<m:p=k>=l:m>0&&(p=k<m)),p?g(a,d,n,o):h(a,d,o)}function g(a,b,c,d){a.hasClass("fixable_fixed")||a.addClass("fixable_fixed"),b&&a.css(d,c+"px")}function h(a,b,c){a.hasClass("fixable_fixed")&&a.removeClass("fixable_fixed"),b&&a.css(c,"")}var c=require("webnode2"),d=require("settings");a.makeFixable=e}),require.installLazy("app/view/layout",\'function onYTPlayerStateChange(a,b){$.each(window.YT.players,function(c,d){d.playerId==b&&(d.state=a.data,d.state==window.YT.PlayerState.PLAYING&&d.onReady&&(d.onReady(d),d.onReady=null))}),a.data==window.YT.PlayerState.PLAYING&&pauseYTPlayers(b)}function pauseYTPlayers(a){if(!window.YT||!window.YT.players)return;$.each(window.YT.players,function(b,c){c.playerId!=a&&c.player&&$("#"+c.playerId).size()&&c.player.pauseVideo()})}var Component=require("w2.quora").Component,windowManager=require("window_manager"),cookies=require("cookies"),fixable=require("view/fixable"),W2=require("webnode2"),HoverMenu=require("view/hover_menu").HoverMenu,facebook=require("facebook"),loginInProgress=!1;exports.Header=Component.extend({shortcuts:{"g h":"/","g m":"/messages","g n":"/notifications","g q":"/questions","g o":"/open_questions","g b":"/posts"},onLoad:function(){fixable.makeFixable({element:this.$("#layout_header"),width_dep:!0,height_dep:!0});for(var a in this.shortcuts)this.onKeyCombination(document.body,a,windowManager.navigateTo.bind(windowManager,this.shortcuts[a]))}}),exports.MinimalHeader=exports.Header.extend({onLoad:function(){if(!this.design_polish)return;this._super.apply(this,arguments)}}),exports.QTextImageEnlarger=Component.extend({onLoad:function(a){function c(a){return b[a]||(b[a]=$("<div>").addClass("enlarged_image").append($("<div>").addClass("enlarged_image_close").text("close")).append($("<div>").addClass("enlarged_image_inner").append($("<img />").attr("src",a))).append($("<a>").attr("href",a).attr("target","_blank").addClass("enlarged_image_zoom")))}if(!a)return;var b={};$(document).click(function(a){if(a.which!==1)return;var b=$(a.target),d=b.attr("master_src"),e=b.hasClass("zoomable_in"),f=b.parents(".expandable_qtext").length>0,g=b.hasClass("qtext_image_large"),h=f&&!g;if(!e||!d||h)return;var i=10,j=$(window).width(),k=$(window).height(),l=parseInt(b.attr("master_w")),m=parseInt(b.attr("master_h")),n=j-4*i,o=k-4*i,p=l,q=m,r=c(d),s=!0;p>n&&(q*=n/p,p=n,s=!1);var t=q/p<2,u=!t&&q>o;return t&&q>o&&(p*=o/q,q=o,s=!1),r.find("a.enlarged_image_zoom").toggle(!s),u?r.addClass("full_height").css("top",$(window).scrollTop()+i+"px").css("left",Math.round($(window).scrollLeft()+i+(n-p)/2)+"px"):r.removeClass("full_height").css("top",Math.round(i+(o-q)/2)+"px").css("left",Math.round(i+(n-p)/2)+"px"),r.css("width",Math.round(p)+"px").css("height",Math.round(q)+"px").appendTo("body"),r.find(".enlarged_image_close, .enlarged_image_inner").click(function(a){r.remove()}),!0}),$(document).bind("keydown._enlarged_image",function(a){if(a.keyCode==27)for(var c in b)b[c].remove()})}}),exports.NGQTextImageEnlarger=Component.extend({onLoad:function(a){var b=this;$(document).on("click",".qtext_image",function(a){b.openModal(a)}),$(document).on("keydown",function(a){if(a.keyCode==27)for(var c in b.masters)b.hideModal(b.masters[c])}),$(document).on("click",".photo_modal_bg, .photo_modal_close",function(){for(var a in b.masters)b.hideModal(b.masters[a])})},getContainer:function(a,b){var c=this;return c.masters={},c.masters[a]||(c.masters[a]=$("<div>").addClass("photo_modal_container").append($("<div>").addClass("photo_modal_bg")).append($("<div>").addClass("photo_modal_close")).append($("<img>").addClass("photo_modal_img").attr("src",a)).append($("<img>").addClass("photo_modal_img_large").attr("src",b)))},openModal:function(a){function w(){u&&v&&(n.find(".photo_modal_img_large").css("visibility","visible"),n.find(".photo_modal_img").css("visibility","hidden"))}var b=this,c=$(a.target),d=c.attr("src"),e=c.attr("master_src"),f=c.hasClass("zoomable_in"),g=c.parents(".truncated_q_text").length>0,h=c.hasClass("qtext_image_large"),i=g&&!h;if(!f||!e||i)return;var j=parseInt(c.attr("master_w")),k=parseInt(c.attr("master_h")),l=$(window).width(),m=$(window).height(),n=b.getContainer(d,e);j>l&&(k*=(l-40)/j,j=l-40),k>m&&(j*=(m-40)/k,k=m-40);var o=c.offset().left,p=c.offset().top-$(window).scrollTop(),q=Math.round((l-c.width())/2-o),r=Math.round((m-c.height())/2-p),s=j/c.width();n.find(".photo_modal_img").css("left",o).css("top",p).css("width",c.width()).css("height",c.height()),n.appendTo("body"),c.css("visibility","hidden");var t=$(document).scrollTop();$("body").css({position:"fixed",width:"100%",top:-t}),setTimeout(function(){n.find(".photo_modal_bg, .photo_modal_close").addClass("active"),n.find(".photo_modal_img").css("-webkit-transform","translate3d("+q+"px,"+r+"px,0) scale("+s+")").css("-moz-transform","translate3d("+q+"px,"+r+"px,0) scale("+s+")").css("-ms-transform","translate3d("+q+"px,"+r+"px,0) scale("+s+")").css("-o-transform","translate3d("+q+"px,"+r+"px,0) scale("+s+")").css("transform","translate3d("+q+"px,"+r+"px,0) scale("+s+")")},1);var u=!1,v=!1;setTimeout(function(){v=!0,w()},333),n.find(".photo_modal_img_large").load(function(){$(this).css("left",(l-j)/2).css("top",(m-k)/2).css("width",j).css("height",k),u=!0,w()})},hideModal:function(a){a.find(".photo_modal_bg, .photo_modal_close").removeClass("active"),a.find(".photo_modal_img_large").remove(),a.find(".photo_modal_img").css("visibility","visible"),a.find(".photo_modal_img").css("-webkit-transform","translate3d(0,0,0) scale(1)"),a.find(".photo_modal_img").css("-moz-transform","translate3d(0,0,0) scale(1)"),a.find(".photo_modal_img").css("-ms-transform","translate3d(0,0,0) scale(1)"),a.find(".photo_modal_img").css("-o-transform","translate3d(0,0,0) scale(1)"),a.find(".photo_modal_img").css("ms-transform","translate3d(0,0,0) scale(1)"),setTimeout(function(){$(".qtext_image").css("visibility","visible");var b=Math.abs(parseInt($("body").css("top")));$("body").css({position:"",width:"",top:""}),$(document).scrollTop(b),a.remove()},333)}}),exports.QTextGIFPlayer=Component.extend({onLoad:function(a){if(!a)return;$(document).click(this.fnbind(function(a){var b=$(a.target).parent("[gif-embedded]");if(!b)return;var c=b.attr("gif-embedded"),d=b.attr("background-url");if(b.attr("is-playing")=="false"){var e=new Image;e.onload=function(){b.children(".qtext_image").attr("src",c),b.children(".gif_embed_noclick").css("visibility","hidden"),b.attr("is-playing","true")},e.src=c}else b.children(".qtext_image").attr("src",d),b.children(".gif_embed_noclick").css("visibility","visible"),b.attr("is-playing","false")}))}}),exports.QTextEmbedEnlarger=Component.extend({onLoad:function(a){if(!a)return;$(document).click(this.fnbind(function(a){var b=$(a.target),c=undefined;b.attr("data-embed")?c=b.attr("data-embed"):(b=b.parent(),c=b&&b.attr("data-embed"));if(!c||!b.hasClass("thumbnail"))return;this.loadEmbed(b,c)}))},loadEmbed:function(a,b){var c=this;if(!window.YT){window.YT={},window.YT.players=[],window.YT.next_id=0;var d=document.createElement("script");d.src="//www.youtube.com/player_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e);var f=50,g=function j(d){if(d<0)return;window.setTimeout(function(){window.YT.Player?c.loadEmbed(a,b):j(d-f)},f)};g(1e4)}if(!window.YT.Player)return;a.append(b).removeClass("thumbnail");var h="YTPlayer-"+YT.next_id++;a.find(":first-child").attr("id",h);var i=new window.YT.Player(h,{events:{onStateChange:function(a){return onYTPlayerStateChange(a,h)}}});window.YT.players.push({player:i,playerId:h,state:-1}),pauseYTPlayers(h)}}),exports.UseMobileSite=Component.extend({onLoad:function(){this.$("#@mobile_site").click(this.fnbind(function(a){return cookies.cookie("m","1"),location.reload(!0),!1}))}}),exports.GridGuide=Component.extend({onLoad:function(){this.setupKeyboardShortcut()},toggle:function(){this.$("#@grid-guide").is(":visible")?this.$("#@grid-guide").fadeOut(150):this.$("#@grid-guide").fadeIn(150)},setupKeyboardShortcut:function(){require("keystrokes").on([71,82,73,68],this.fnbind(this.toggle))}}),exports.RequestReviewsDialogLink=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){return this.openDialog(),!1}))},openDialog:function(){this._dialog=this.dialog().title("Request Reviews").load("content")},closeDialog:function(){this._dialog.close_()}}),exports.RequestReviewsDialogComposer=Component.extend({onLoad:function(){this.submitted=!1,this.$("#@cancel").click(this.fnbind(function(){return W2.Dialog.openerFor(this).closeDialog(),!1})),this.$("#@request").click(this.fnbind(function(){var a=this.getContextName();return a&&!this.submitted&&(this.submitted=!0,this.serverCall("request_reviews").kwargs({topic_name:a}).success(this.fnbind(function(a){a[0]=="/"&&(document.location=a)})).liveMutate().send()),!1}))},getContextName:function(){var a=this.cQuery(":context.topic_add").getTempTopicNamesAsArray();return a.length>0?a[0]:null}}),exports.LoggedOutHeader=Component.extend({onLoad:function(){var a=this;fixable.makeFixable({element:this.$("#@logged_out_header"),width_dep:!0,height_dep:!0}),a.$("#@signup").click(function(){return a.serverCall("attempt_login").liveMutate().send(),!1}),facebook.onInit(function(){FB.getLoginStatus(function(b){b.status==="connected"&&a.tryLoginFacebook(b.authResponse.accessToken)})})},tryLoginFacebook:function(a){var b=this;if(loginInProgress===!0)return;loginInProgress=!0,b.serverCall("try_login_facebook").kwargs({fb_access_token:a,code:b.code}).success(function(a){a&&b.completeLogin(),loginInProgress=!1}).error(function(){loginInProgress=!1}).send()},completeLogin:function(){require("settings").pageMode=="post_reload"&&$(document).trigger("quora_login")}}),exports.GroupBackground=Component.extend({onLoad:function(){$("body").css({background:"url("+this.image_url+")","background-attachment":"fixed"})}}),exports.LoggedOutBigSignupFooter=Component.extend({onLoad:function(){this.threshold=650,this.earthWidth=430,this.fixFooter(),$(window).resize(this.fnbind(function(){this.fixFooter()}))},fixFooter:function(){var a=this.$("#@footer_row");$(window).height()>this.threshold?a.css("bottom",0).css("top","auto"):a.css("bottom","auto").css("top",this.threshold-a.height());var b=$(window).width()/2-this.earthWidth;b<50?this.$("#@earth").hide():this.$("#@earth").show()}}),exports.BrowserWarning=Component.extend({onLoad:function(){var a=this;a.$("#@dismiss, #@overlay").click(this.fnbind(function(){a.$("#@warning").hide()}))}}),exports.HeaderNavMenu=HoverMenu.extend({setPosition:function(){this._super.apply(this,arguments),this.menu=this.$("#@menu"),this.menu_contents=this.$("#@menu_contents"),this.fixedOffset=this.$(".header").outerHeight();var a=this.$(".interaction_mode_banner"),b=this.$(".error_mode_banner");a.length>0&&a.is(":visible")&&(this.fixedOffset+=a.outerHeight()),b.length>0&&b.is(":visible")&&(this.fixedOffset+=b.outerHeight()),this.minHeight=this.menu_contents.outerHeight()+this.fixedOffset,fixable.makeFixable({element:this.menu,width_dep:!0,height_dep:!0,min_height:this.minHeight,fixed_offset:this.fixedOffset}),this.minHeight<$(window).height()&&this.menu.css("top",this.fixedOffset+"px")}}),exports.HomeNavHoverMenu=exports.HeaderNavMenu.extend({doShow:function(){this._super.apply(this,arguments),this.newNotifs&&this.serverCall("clear_new").send()}}),exports.ContentWrapper=Component.extend({onLoad:function(){var a=this,b=$("textarea");b.each(function(b,c){var d=$(c);a.registerTextArea(d)})},registerTextArea:function(a){var b=function(){var b=a.height(),c=parseInt(a.css("padding-top"))+parseInt(a.css("padding-bottom")),d=parseInt(a.prop("scrollHeight"))-c;this.max&&d>this.max&&(d=this.max),d>b-c&&a.css("height",d+"px")};a.bind("input propertychange",b).bind("focus",b).bind("paste",b)}}),exports.LogoutNavElement=Component.extend({onLoad:function(){this.$("#@logout_link").click(this.fnbind(function(a){return this.$("#@logout_form").submit(),require("w2.livenode").stopLiveUpdates(),!1}))}});var headerLogo,quoraLogoHover;exports.HeaderLogo=Component.extend({onLoad:function(){headerLogo=this,quoraLogoHover&&quoraLogoHover.show()}}),exports.QuoraLogoHover=Component.extend({onLoad:function(){quoraLogoHover=this,this.show(),this.$("#@menu_contents").click(function(){window.location="http://www.quora.com"})},show:function(){assert(quoraLogoHover===this);if(headerLogo){var a=headerLogo.$("#@logo"),b=a.outerHeight(),c=a.outerWidth(),d=a.offset();this.$("#@menu").css("top",d.top+b+"px").css("left",d.left+"px").removeClass("hidden"),this.$("#@menu_contents").css("width","90px").css("margin-left",-Math.min(70,d.left)+"px").css("cursor","pointer")}}});\'\n),require.installLazy("app/view/social",\'var Component=require("w2.quora").Component,windowManager=require("window_manager");exports.SocialNUX=Component.extend({onLoad:function(){var a=this;a.$("#@follow_all_and_continue").click(function(b){try{a.child(a.childName).followAll(function(){windowManager.navigateTo(a.next)})}catch(c){windowManager.navigateTo(a.next)}})}}),exports.SocialFollow=Component.extend({onLoad:function(){this.$("#@follow_all").click(this.fnbind(function(){return this.followAll(),!1}))},followAll:function(a){this.serverCall("follow_all").success(a).liveMutate().send()}});\'),require.installLazy("app/view/read_later",\'var Component=require("w2.quora").Component;exports.DeleteReadLaterStory=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){return this.parent().$("#@item").addClass("selected"),this._dialog=this.dialog().title("Delete from Read later").ok(this.fnbind(function(){this.serverCall("delete").liveMutate().send()}),"Delete").cancel(this.fnbind(function(){this.parent().$("#@item").removeClass("selected")}),"Cancel").html("Are you sure you want to delete this item from your read later list?"),!1}))}}),exports.ReadLaterStoryItem=Component.extend({onLoad:function(){var a=this;this.$("#@item").hover(function(b){a.$("#@delete").show()},function(b){a.$("#@delete").hide()})}});\'),require.installLazy("app/view/syndicate",\'var Component=require("w2.quora").Component;exports.SyndicateActionLink=Component.extend({onLoad:function(){this.$("#@syndicate_link").click(this.fnbind(function(){return this.serverCall("syndicate").liveMutate().send(),!1})),this.$("#@undo").click(this.fnbind(function(){return this.serverCall("undo").liveMutate().send(),!1}))}}),exports.PublishActionLink=Component.extend({onLoad:function(){this.$("#@publish_link").click(this.fnbind(function(){return this.serverCall("publish").liveMutate().send(),!1}))}});\'),require.installLazy("app/view/review",\'var Component=require("w2.quora").Component;exports.UnreviewedItems=Component.extend({onLoad:function(){this.topicsLoaded=!1},hideAll:function(){this.$("#@default").hide(),this.$("#@custom").hide()},setTopic:function(a){this.hideAll(),this.serverCall("load_custom").kwargs({topic_name:a}).contentFor(this.$("#@custom"),{parentCID:this.cid}).send(),this.$("#@custom").show()},filterToCustom:function(){this.hideAll(),this.$("#@custom").show()},showAll:function(){this.hideAll(),this.$("#@default").show()}}),exports.ReviewFilterMenu=Component.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){return this.$("#@menu_items").menu(this.$("#@menu_link")),!1})),this.$("#@custom").click(this.fnbind(function(){return this.setCurrent(this.$("#@custom")),this.$("#@selector").show(),this.lookup("selector").focus(),this.parent().parent().filterToCustom(),!1}));if(this.default_type=="all")return this.setCurrent(this.$("#@all")),!1;if(this.default_type=="priority")return this.setCurrent(this.$("#@priority")),!1;if(this.default_type=="topics")return this.setCurrent(this.$("#@topics")),this.$("#@topics_count").show(),!1;if(this.default_type=="names_reversed")return this.setCurrent(this.$("#@names_reversed")),!1;if(this.default_type=="random")return this.setCurrent(this.$("#@random")),!1;if(this.default_type=="admin_topics")return this.setCurrent(this.$("#@admin_topics")),this.$("#@admin_topics_count").show(),!1;if(this.default_type=="random_topics")return this.setCurrent(this.$("#@random_topics")),!1;if(this.default_type=="extra")return this.setCurrent(this.$("#@extra")),this.$("#@extra_count").show(),!1;this.default_type=="custom"&&this.deselectAll()},setTopic:function(a){this.parent().parent().setTopic(a),this.$("#@current").text(a+" (topic)")},setCurrent:function(a){this.hideAll(),this.deselectAll(),a.addClass("selected"),this.$("#@current").text(a.text())},hideAll:function(){this.$("#@selector").hide(),this.$("#@topics_count").hide(),this.$("#@admin_topics_count").hide(),this.$("#@extra_count").hide()},resetValue:function(){this.$("#@value").val(this.types.all),this.setCurrent(this.$("#@all"))},deselectAll:function(){this.$("#@menu_items .selected").removeClass("selected")}});\'),require.installLazy("view/qtext_editor",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.VizSection=Component.extend({onLoad:function(){this.$("#@remove_url").click(this.fnbind(function(){return this.removeUrl(),!1})),this.$("#@viz_shuffle").click(this.fnbind(function(a){return this.updateComponent(this.query),!1})),this.$("#@viz_search_button").click(this.fnbind(function(){return this.getNewQuery(),!1})),this.$("#@viz_query").keypress(this.fnbind(function(a){a.which==13&&(this.getNewQuery(),a.preventDefault())}))},removeUrl:function(){this.$("#@viz_section").hide(),this.lookup("editor").focus()},getNewQuery:function(){this.query=this.$("#@viz_query").val(),this.updateComponent(this.query)},updateComponent:function(a){this.serverCall("source_external_photo").kwargs({query:a}).contentFor(this.$("#@viz_section_choice"),{parentCID:this.parent().cid}).success().send()}}),exports.VizSectionChoice=Component.extend({onLoad:function(){this.$(".@viz_choice").click(this.fnbind(function(a){var b=$(a.target).attr("choice"),c=$(a.target).attr("full_url"),d=this.lookup("editor")||W2.Dialog.openerFor(this);return d.addImage(c),d.inputEntered(),!1}))}});\'),require.installLazy("app/view/static",\'var Component=require("w2.quora").Component;exports.LicenseItem=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(a){return this.$("#@text").toggle(),this.$("#@view_license").toggle(),this.$("#@hide_license").toggle(),!1}))}}),exports.JobsMain=Component.extend({onLoad:function(){this.videoIframe=$(\\\'<iframe width="930" height="523" src="https://www.youtube-nocookie.com/embed/AUjBvf82fQ8?autoplay=1&rel=0&modestbranding=1&vq=hd720&autohide=1&showinfo=0" frameborder="0" allowfullscreen></iframe>\\\'),this.$("#@yt_player_link").click(this.fnbind(function(a){return this.$("#@yt_player_link").remove(),this.$("#@yt_player").append(this.videoIframe),this.$("#@yt_player").removeClass("hidden"),!1}))}});\'),require.installLazy("app/view/answer_wiki",\'var Component=require("w2.quora").Component,InlineEditor=require("view/inline_editor").InlineEditor;exports.CreateAnswerWikiInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@inline_editor_cancel").click(this.fnbind(function(){return this.toggle_editor(),$("#answer_wiki").addClass("hidden"),!1}))},_get_kwargs:function(){return{qid:this.id,input:this.get_value()}}}),exports.AnswerWikiInlineEditor=InlineEditor.extend({_get_kwargs:function(){var a="";return this.has_comment&&!this.lookup("comment_editor").isEmpty()&&(a=this.lookup("comment_editor").serialize()),{qid:this.id,input:this.get_value(),sugg_exists:this.sugg_exists,comment:a,notif:this.$("#@notif").attr("checked")?1:0}}});\'),require.installLazy("view/suggested_edits",\'var Component=require("w2.quora").Component;exports.SuggestedEditBar=Component.extend({toggleButtons:function(){this.$("#@suggested_answer_buttons").toggleClass("hidden")}}),exports.SuggestedEditButtons=Component.extend({onLoad:function(){this.$("#@view_original").click(this.fnbind(function(){return this.parent().parent().toggleSuggestion(),!1}))}});\'),require.installLazy("app/view/question/move_answer",\'var Component=require("w2.quora").Component,windowManager=require("window_manager");exports.SuggestAnswerMove=Component.extend({onLoad:function(){var a=this;a.$("#@move").click(function(){return a.serverCall("suggest_answer_move").kwargs({aid:a.aid,new_qid:a.new_qid}).liveMutate().send(),!1}),a.$("#@undo").click(function(){return a.serverCall("undo_suggest_answer_move").kwargs({aid:a.aid}).liveMutate().send(),!1})}}),exports.AnswerMoveButton=Component.extend({onLoad:function(){var a=this;a.$("#@move").click(function(){if(a._dialog)return;return a._dialog=a.dialog().title("Confirm Moving Answer").ok(function(){a.serverCall("move_answer").kwargs({aid:a.aid,new_qid:a.new_qid}).success(function(a){windowManager.sameDomainURL(a)&&windowManager.navigateTo(a)}).liveMutate().send()},"Move Answer").cancel(null,"Cancel").load("confirm_answer_move",{kwargs:{new_qid:a.new_qid,aid:a.aid}}),!1})}});\'),require.installLazy("app/view/shuffle",\'var Component=require("w2.quora").Component,windowManager=require("window_manager");exports.ShuffleBarButton=Component.extend({setUrl:function(a){this.$("#@next").attr("href",a)},onLoad:function(){this.locked=!1,this.$("#@next").click(this.fnbind(function(a){return this.gotoNext(),!1})),$(document).keydown(this.fnbind(function(a){return this.docKeydown(a)}))},gotoNext:function(){this.serverCall("log_shuffle_click").send(),windowManager.navigateTo(this.$("#@next").attr("href"))},isLocked:function(){var a=!1;return $("input, textarea, .qtext_editor_content").each(function(){$(this).attr("focused")=="true"&&(a=!0)}),this.locked||a},docKeydown:function(a){var b=a||window.event;if(this.isLocked())return!0;if(b.keyCode==39)return this.gotoNext(),!1;if(b.keyCode==37)return window.history.back(),!1}}),exports.ShuffleBarOptionMenu=Component.extend({onLoad:function(){this.$("#@options").click(this.fnbind(function(a){return this.$("#@options_menu").menu(this.$("#@options")),!1}));var a={"#@only_open_questions":"/shuffle/open","#@only_answers":"/shuffle/answers","#@all":"/shuffle"};$.each(a,this.fnbind(function(a,b){var c=function(){this.$("#@all").removeClass("selected"),this.$("#@only_open_questions").removeClass("selected"),this.$("#@only_answers").removeClass("selected")};this.$(a).click(this.fnbind(function(d){return this.$(a).hasClass("selected")||(c.call(this),this.lookup("shuffle_bar_button").setUrl(b),this.$(a).addClass("selected")),!1}))}))}});\'),require.installLazy("app/view/topic/topic_create",\'var Component=require("w2.quora").Component,windowManager=require("window_manager"),W2=require("webnode2");exports.TopicCreateMain=Component.extend({onLoad:function(){this.submitted=!1,this.$("#@fake_editor").click(this.fnbind(function(){return this.$("#@fake_editor_row").hide(),this.$("#@editor_row").show(),this.lookup("editor").focus(),!1})),this.$("#@create").click(this.fnbind(function(){var a=this.getTopicName(),b=this.lookup("editor").serialize();return a&&!this.submitted&&(this.submitted=!0,this.serverCall("create_topic").kwargs({topic_name:a,about:b}).success(this.fnbind(function(a){windowManager.sameDomainURL(a)&&(document.location=a)})).liveMutate().send()),!1})),this.$("#@cancel").click(this.fnbind(function(){return this.cancelClicked(),!1}))},getTopicName:function(){return this.lookup("navigator").$("#@input").val()},cancelClicked:function(){}}),exports.TopicCreateDialog=exports.TopicCreateMain.extend({cancelClicked:function(){W2.Dialog.dialogFor(this).close_()}});\'),require.installLazy("app/view/question/reviews",\'var Component=require("w2.quora").Component,windowManager=require("window_manager"),W2=require("webnode2");exports.ReviewsRequestMain=Component.extend({onLoad:function(){this.submitted=!1,this.$("#@request").click(this.fnbind(function(){var a=this.getContextName(),b=this.isPrivate();return a&&!this.submitted&&(this.submitted=!0,this.serverCall("request_reviews").kwargs({topic_name:a,is_private:b}).success(this.fnbind(function(a){windowManager.sameDomainURL(a)&&windowManager.navigateTo(a)})).liveMutate().send()),!1}))},getContextName:function(){var a=this.cQuery(":context.topic_add").getTempTopicNamesAsArray();return a.length>0?a[0]:null},isPrivate:function(){return this.lookup("anon_checkbox").getValue()==0?1:0}}),exports.ReviewsRequestDialog=exports.ReviewsRequestMain.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@cancel").click(this.fnbind(function(){return W2.Dialog.dialogFor(this).close_(),!1}));var a=this;this.cQuery(":context").setCallback(function(){a.$("#@request").removeClass("submit_button_disabled disabled")}),this.cQuery(":context").setText(this.query),this.cQuery(":context").focus(!0),this.cQuery(":context").requestUpdate();var a=this;this.query&&this.query!=""&&setTimeout(function(){a.showContextResultsFrame()},10)},showContextResultsFrame:function(){this.cQuery(":context").showResultsDropdown()}}),exports.RequestReviewsDialogButton=Component.extend({onLoad:function(){this.$("#@request_reviews_link").click(this.fnbind(function(a){return this.showDialog(),!1}))},showDialog:function(){this._dialog=this.dialog().load("request_reviews_dialog")}});\'),require.installLazy("app/view/suggested_sig",\'var Component=require("w2.quora").Component,InlineEditor=require("view/inline_editor").InlineEditor;exports.SuggestSigInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@inline_editor_content").hover(this.fnbind(function(){this.$("#@inline_editor_link").removeClass("hidden")}),this.fnbind(function(){this.$("#@inline_editor_link").addClass("hidden")}))},_get_kwargs:function(){return{tid:this.tid,to_uid:this.to_uid,bio:this.get_value()}}}),exports.SuggestedSigAccept=Component.extend({onLoad:function(){this.$("#@accept").click(this.fnbind(function(){return this.serverCall("accept").kwargs({to_uid:this.uid,tid:this.tid}).liveMutate().send(),!1}))}}),exports.SuggestedSigDiscard=Component.extend({onLoad:function(){this.$("#@discard").click(this.fnbind(function(){return this._dialog=this.dialog().title("Discard Suggestion?").ok(this.fnbind(function(){this.serverCall("discard").kwargs({to_uid:this.uid,tid:this.tid}).liveMutate().send()}),"Discard Suggestion").cancel(null,"Cancel").html("Are you sure you want to delete this suggested biography?"),!1}))}}),exports.SuggestedSigOptions=Component.extend({onLoad:function(){this.$("#@close").click(this.fnbind(function(){return this.parent().parent().toggleSuggestion(),!1}))}});\'),require.installLazy("view/photo",\'var Component=require("w2.quora").Component,cookies=require("cookies");exports.InlinePhotoEditor=Component.extend({onLoad:function(){this.$("#@photo").hover(this.fnbind(function(a){this.$("#@edit").show(),this.$("#@x_photo").show()}),this.fnbind(function(a){this.$("#@edit").hide(),this.$("#@x_photo").hide()})),this.$("#@x_photo").click(this.fnbind(function(){return this.dialog().title("Remove Profile Photo").cancel(null,"Close").ok(this.fnbind(function(){this.serverCall("remove_photo").send()}),"Remove Photo").html("Are you sure you want to remove your profile photo?"),!1}))}}),exports.BoardPhoto=Component.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){cookies.setQfeedLog(this,"BoardClickthrough"),cookies.setQueryLog(this,"BoardClickthrough")}))}}),exports.TopicPhoto=Component.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){cookies.setQfeedLog(this,"TopicClickthrough"),cookies.setQueryLog(this,"TopicClickthrough")}))}});\'),require.installLazy("app/view/question/add_answer",\'var Component=require("w2.quora").Component,toggle=require("view/toggle");exports.AddAnswerInFeed=toggle.SwitchableComponent.extend({onLoad:function(){this._super.apply(this,arguments),this.open=!1,this.closeOnClickHandler=this.fnbind(this.closeOnClick),this.bindCloseOnClick(),this.onKeyCombination(this.$("#@wrapper"),"a",this.fnbind(function(){return this.$("#@fake_input_inner").mouseover().click(),!1}))},bindCloseOnClick:function(){$(document).bind("click",this.closeOnClickHandler)},unbindCloseOnClick:function(){$(document).unbind("click",this.closeOnClickHandler)},switchAction:function(){this.$("#@fake_input").hide(),this.$("#@wrapper").addClass("wide"),this.$("#@inline_editor").removeClass("hidden"),this.open=!0,this.cQuery(":toggled.editor_section.editor.editor").$("#@editor").focus()},closeOnClick:function(a){if(this.open&&this.cQuery(":toggled.editor_section.editor.editor").lastTypingReportTime===0){var b=a.pageX,c=this.$("#@wrapper").outerWidth();if(b>=this.$("#@wrapper").offset().left&&b<=this.$("#@wrapper").offset().left+c)return;if(this.$(a.target).parents().hasClass("dialog"))return;this.open=!1;var d=this.cQuery(":toggled.editor_section.editor.editor");d.editor.blur(),d.$("#@editor").addClass("ignore_interaction"),this.$("#@inline_editor").addClass("hidden"),this.$("#@wrapper").removeClass("wide"),this.$("#@fake_input").show(),this.$("#@fake_input_inner").parent().show()}}}),exports.AnswerInFeedEditor=Component.extend({onLoad:function(){this._super.apply(this,arguments),this.cQuery(":editor.editor").hideFakeEditorByDefault=!0,this.cQuery(":editor.editor").blurOnLoad=!this.parent().parent().open},onUnload:function(){this.parent().parent().unbindCloseOnClick()}}),exports.AskToAnswerSectionToggle=Component.extend({onLoad:function(){this.loaded=!1,this.$("#@ask_to_answer_link").click(this.fnbind(function(a){return this.loaded||this.serverCall("wanted_answer").contentFor(this.parent().$("#@wanted_answer_section"),{parentCID:this.parent().cid}).success(this.fnbind(function(a){this.loaded=!0})).send(),this.showAskToAnswer(),!1})),this.show_link?this.$("#@add_answer_link").click(this.fnbind(function(a){return this.showAddAnswer(),!1})):this.showAddAnswer()},showAskToAnswer:function(){this.parent().$("%@ask_to_answer_group").show(),this.parent().$("%@add_answer_group").hide(),this.$("%@ask_to_answer_group").show(),this.$("%@add_answer_group").hide()},showAddAnswer:function(){this.parent().$("%@ask_to_answer_group").hide(),this.parent().$("%@add_answer_group").show(),this.$("%@ask_to_answer_group").hide(),this.$("%@add_answer_group").show()}});\'),require.installLazy("app/view/review_answers",\'var Component=require("w2.quora").Component;exports.AnswerSendNotificationsLink=Component.extend({onLoad:function(){this.$("#@send_notifications").click(this.fnbind(function(a){return this.serverCall("send_notifications").liveMutate().send(),!1}))}}),exports.ReviewAnswerItem=Component.extend({onLoad:function(){this.$("#@view").click(this.fnbind(function(a){return this.$("#@answer").removeClass("hidden"),this.$("#@view_answer").addClass("hidden"),!1}))}}),exports.ReviewNewAnswersMain=Component.extend({onLoad:function(){this.$("#@show").click(this.fnbind(function(){return this.toggleAll(),!1})),this.$("#@hide").click(this.fnbind(function(){return this.toggleAll(),!1})),this.$("#@popout").click(this.fnbind(function(a){var b=window.open("/inbox/popout_arq","thread_arq","height=590,width=296,scrollbars=1");return!1}))},toggleAll:function(){this.$("#@instructions").toggle(),this.$("#@show").toggle(),this.$("#@hide").toggle()}});\'),require.installLazy("app/view/post/post_distribution",\'var Component=require("w2.quora").Component;exports.DistributionMenu=Component.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){return this.$("#@menu_items").menu(this.$("#@menu_link")),!1}))}}),exports.AddDistributionMenu=Component.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){return this.$("#@menu_items").menu(this.$("#@menu_link")),!1}));var a=this,b=function(b){var c=a.types[b],d="#@"+b.split("_")[0];a.$(d).click(function(){return a.$("#@value").val(c),a.setCurrent($(this)),!1}),a.default_type==c&&a.setCurrent(a.$(d))};b("anon"),b("all"),b("topic_followers")},getValue:function(){return this.$("#@value").val()>=0?this.$("#@value").val():null},setCurrent:function(a){this.deselectAll(),a.addClass("selected"),this.$("#@current").text(a.text())},resetValue:function(){this.$("#@value").val(this.types.all),this.setCurrent(this.$("#@all"))},deselectAll:function(){this.$("#@menu_items .selected").removeClass("selected")}}),exports.DistributeToLink=Component.extend({onLoad:function(){this.$("#@activate").click(this.fnbind(function(){return this.serverCall("activate").kwargs({object_id:this.object_id,distribution:this.distribution}).liveMutate().send(),!1})),this.$("#@deactivate").click(this.fnbind(function(){return this.serverCall("deactivate").kwargs({object_id:this.object_id}).liveMutate().send(),!1}))}});\'),require.installLazy("app/view/question/disclaimer",\'var Component=require("w2.quora").Component,windowManager=require("window_manager"),W2=require("webnode2");exports.AttachDisclaimer=Component.extend({onLoad:function(a){var b=this;b.$("#@add_disclaimer_link").click(function(){return b.attachDisclaimer(),!1}),b.$("#@remove_button").tooltip({contents:"Remove Disclaimer From Answer"}),b.$("#@remove_button").click(function(){return b.removeAttachedDisclaimer(),!1})},attachDisclaimer:function(){this.user_has_set_disclaimer?(this.$("#@add_disclaimer_link, #@disclaimer_attached").toggleClass("hidden"),this.lookup("content_editor")&&(this.lookup("content_editor").disclaimer_update="attach")):this.showDisclaimerDialog()},removeAttachedDisclaimer:function(){this.$("#@add_disclaimer_link, #@disclaimer_attached").toggleClass("hidden"),this.lookup("content_editor")&&(this.lookup("content_editor").disclaimer_update="remove")},showDisclaimerDialog:function(){this._dialog=this.dialog().title("Create Your Disclaimer").load("set_disclaimer_dialog")}}),exports.SetDisclaimerDialog=Component.extend({onLoad:function(a){var b=this;b.$("#@cancel").click(function(){return W2.Dialog.dialogFor(b).close_(),!1})},showEditor:function(){this.$("#@choose_profession_area").hide(),this.$("#@edit_disclaimer_area").show(),this.lookup("editor").focusInput(),this.$("#@cancel").hide()},showError:function(){this.$("#@choose_profession_area").hide(),this.$("#@wrong_profession_error").show()}}),exports.DisclaimerIndicateProfession=Component.extend({onLoad:function(){var a=this;a.$("%@profession").click(function(){return a.parent().showEditor(),!1}),a.$("%@other").click(function(){return a.parent().showError(),!1})}}),exports.DisclaimerAnnouncementButton=Component.extend({onLoad:function(){var a=this;a.$("#@learn").click(function(){a.serverCall("close_announcement").liveMutate().success(function(b){windowManager.navigateTo(a.url)}).send()})}});\'),require.installLazy("app/view/question/question_redirect",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.QuestionRedirectDialogContents=Component.extend({onLoad:function(){this.to_qid=null,this.$("#@cancel").click(this.fnbind(function(){return this.closeDialog(),!1})),this.$("#@redirect").click(this.fnbind(function(){var a=this.$("#@to_qid").val(),b=this.lookup("question_selector").$("#@input").val();if(a)this.createRedirect(a);else{if(!b)return!1;this.serverCall("add_question_redirect_from_url").kwargs({url:b}).except("public_to_private_redirect_warning",this.fnbind(function(a){this.confirmPublicToPrivateRedirect(a)})).error(function(){a1ert("There was a problem redirecting the question.")}).success(this.fnbind(function(a){a||(this.$("#@pick_redirect").show(),this.$("#@pick_redirect").text("The text you entered does not match a question or question URL."))})).liveMutate().send(),this.closeDialog()}return!1}))},createRedirect:function(a){if(!a)return;this.serverCall("add_question_redirect").kwargs({to_qid:a}).liveMutate().except("public_to_private_redirect_warning",this.fnbind(function(a){this.confirmPublicToPrivateRedirect(a)})).send(),this.closeDialog()},closeDialog:function(){W2.Dialog.openerFor(this).closeDialog()},setDialogTitle:function(a){W2.Dialog.openerFor(this).setTitle(a)},confirmPublicToPrivateRedirect:function(a){this.dialog().title("Make Anonymous and Redirect").cancel(null,"Cancel").ok(this.fnbind(function(){this.serverCall("make_anonymous_and_add_question_redirect").kwargs({from_qid:a.from_qid,to_qid:a.to_qid}).liveMutate().send()}),"Make Anonymous and Redirect").html("You are Anonymous on \\\'"+a.to_qid_text+"\\\', so you must be Anonymous on this question before you can redirect.")}}),exports.QuestionRedirectLinkWithDialog=Component.extend({onLoad:function(){this.$("#@redirect_question_with_dialog_link").click(this.fnbind(function(){return this._dialog=this.dialog().title("Redirect Into Existing Question or Review Page").load("redirect_question_dialog_contents"),!1}))},closeDialog:function(){this._dialog.close_()},setTitle:function(a){this._dialog.setTitle(a)}}),exports.QuestionRedirectQuestionLink=Component.extend({onLoad:function(){this.$("#@redirect").click(this.fnbind(function(){return this.parent().createRedirect(this.to_qid),!1}))}}),exports.QuestionRedirectReviewsLink=Component.extend({onLoad:function(){this.$("#@redirect").click(this.fnbind(function(){return this.serverCall("add_question_redirect").liveMutate().send(),!1}))}});\'),require.installLazy("app/view/context",\'var Component=require("w2.quora").Component,windowManager=require("window_manager");exports.TypeaheadContextText=Component.extend({setDefault:function(){this.default_text&&(this.context={type:this.context_type,id:this.context_id},this.setContext(this.default_text,this.default_url))},hasContext:function(){return this.default_text?!0:!1},getWidth:function(){return this.$("#@context").outerWidth()},hide:function(){this.$("#@context").hide()},show:function(){this.$("#@context").show()},removeContext:function(){this.default_text="",this.context={},this.$("#@context").removeClass("context_content"),this.$("#@context").text("")},setContext:function(a,b){var c=this;a.length>15&&(a=a.substr(0,13)+"..."),c.$("#@context").addClass("context_content"),c.$("#@context").text(a+":"),c.$("#@context").click(function(){windowManager.navigateTo(b)})}}),exports.ContextTopicEditor=Component.extend({onLoad:function(){var a=this;a.$("#@menu_link").click(function(b){return a.$("#@menu").menu(a.$("#@menu_link")),!1}),a.$("#@search").click(function(){return a.$("#@selector").show(),a.$("#@menu_link").hide(),a.lookup("selector").focus(),!1}),a.$("#@cancel").click(function(){return a.$("#@selector").hide(),a.$("#@menu_link").show(),!1})}}),exports.ContextTopicEditorLink=Component.extend({onLoad:function(){var a=this;a.$("#@set_context").click(function(b){return a.serverCall("set_context").kwargs({object_id:a.object_id,context_tid:a.context_tid}).liveMutate().send(),!1})}}),exports.RemoveContextTopicLink=Component.extend({onLoad:function(){var a=this;a.$("#@remove_context").click(function(b){return a.serverCall("remove_context").kwargs({object_id:a.object_id}).liveMutate().send(),!1})}});\'),require.installLazy("app/view/components",\'var Component=require("w2.quora").Component,cookies=require("cookies"),toggle=require("view/toggle"),windowManager=require("window_manager"),W2=require("webnode2"),ytplayer=require("ytplayer"),settings=require("settings");exports.TruncatePhraseList=Component.extend({onLoad:function(){var a=this;a.show_tooltip_on_more&&a.$("#@view_all_link").tooltip({contents:"Click to view all"}),a.$("#@view_all_link").click(function(){return a.$("#@view_all").addClass("hidden"),a.$("#@view_all_span").addClass("hidden"),a.$("#@all_phrases").removeClass("hidden"),!1})}}),exports.QTextDiff=Component.extend({onLoad:function(){var a=this;a.$("#@more_link").click(function(){return a.$("#@diff_snip").addClass("hidden"),a.$("#@full_diff").removeClass("hidden"),!1})}}),exports.PillTabs=Component.extend({setTab:function(a){this.$("#@tabs .selected").removeClass("selected"),this.$("#@"+a).addClass("selected")},getTab:function(a){return this.$("#@"+a)}}),exports.QtextTruncate=Component.extend({init:function(){this._super.apply(this,arguments),this.callback=null},onLoad:function(a){var b=this;b.show_more&&b.$("#@more_link, #@text_snip").click(function(){return b.viewMore(),b.callback&&b.callback(),!1})},setCallback:function(a){this.callback=a},viewMore:function(){this.$("#@text_snip").addClass("hidden"),this.$("#@full_text").removeClass("hidden")}}),exports.ExpandableQText=toggle.SwitchableComponent.extend({onLoad:function(a){this._super.apply(this,arguments);var b=this;b.$("#@truncated a.more_link").length>0?b.$("#@truncated:not").click(function(a){a.target.nodeName!="A"&&!$(a.target).hasClass("qtext_embed")&&b.$("#@truncated a.more_link").click()}):settings.new_grid?b.$("#@text_snip").removeClass("truncated_q_text"):b.$("#@text_snip").removeClass("expandable_qtext");var c=b.$("#@truncated a.more_link");b.onKeyCombination(c,"Enter",function(){return c.mouseover().click(),!1})},switchAction:function(){this.expand(),this.$("#@truncated").addClass("hidden"),this.$("#@expanded").removeClass("hidden")},expand:function(){var a=this;if(window.YT&&window.YT.players){var b=ytplayer.getYTPlayerStatuses(this.$("#@truncated"),function(a){$(a).parent().addClass("thumbnail").empty()});ytplayer.restoreYTPlayerStatuses(a.$("#@expanded"),b)}this.obj_type&&cookies.setQfeedLog(this,this.obj_type+"Expand"),require("action_log").logSecondaryAction("ContentExpand",null)}}),exports.TitleContentVerticalDisclosureItem=Component.extend({onLoad:function(){var a=this;a.$("#@body_content_disclosure_link").click(function(b){return a.$("#@body_content_to_disclose").toggle(),!1})}}),exports.TruncatedAnswerRequireLogin=Component.extend({onLoad:function(){var a=this;a.$("#@more_require_login,#@more_require_login_link_signup").click(function(){a.recordStep("login_required"),a.attempt_login()}),a.$("#@more_require_login_link_login").click(function(){a.recordStep("attempt_login",function(){windowManager.navigateTo("/?next="+encodeURIComponent(windowManager.getURL()))})})},attempt_login:function(){this.serverCall("attempt_login").liveMutate().send()},recordStep:function(a,b){this.serverCall("record_step").kwargs({step_name:a}).success(function(){b&&b()}).send()}}),exports.BlurredAnswer=Component.extend({onLoad:function(){this.blurred_html&&this.$("#@blurred_answer_container").html(this.blurred_html)}}),exports.BlurredAnswerWithImages=Component.extend({onLoad:function(){var a=this;a.$("#@blurred_answer_wrapper").hasClass("with_signup")||(a.$("#@blurred_answer_wrapper").css("cursor","pointer"),a.$("#@blurred_answer_wrapper").click(function(){a.serverCall("attempt_login").liveMutate().send()}))}}),exports.JSTest=Component.extend({onLoad:function(){var a=this;$.whenIdle(1,1e3,function(){setTimeout(function(){if(W2.atLeastOneServerCallIsSent)return;a.serverCall("noop").send()},1e3)},"Quora.JSTest.noop")}}),exports.SimpleMenu=Component.extend({onLoad:function(){this.options||(this.options={}),this.$("#@menu_link").click(this.fnbind(function(){return this.$("#@menu_items").menu(this.$("#@menu_link"),this.options),!1}))}}),exports.SimpleUserRequest=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(a){this.onClick(),a.preventDefault()}));var a;if(this.upvote||this.remove_upvote)a="u";else if(this.downvote||this.remove_downvote)a="d";else if(this.board_follow_button||this.board_request_follow_button||this.board_unfollow_button)a="f";a&&this.onKeyCombination(this.$("#@link"),a,this.fnbind(this.onClick))},onClick:function(){this.upvote&&(cookies.setQfeedLog(this,"BoardItemUpvote"),cookies.setQueryLog(this,"BoardItemUpvote"),cookies.setTlog({type:"BoardItemUpvote",board_item_id:this.board_item_id}),require("action_log").logSecondaryAction("BoardItemUpvote",{type:"board_item",board_item_id:this.board_item_id})),this.downvote&&(cookies.setQfeedLog(this,"BoardItemDownvote"),cookies.setTlog({type:"BoardItemVoteDown",board_item_id:this.board_item_id}));if(this.board_follow_button||this.board_request_follow_button)cookies.setQfeedLog(this,"BoardFollow"),cookies.setQueryLog(this,"BoardFollow"),cookies.setTlog({type:"BoardFollow",bid:this.bid}),require("action_log").logSecondaryAction("BoardFollow",{type:"board",bid:this.bid});this.serverCall("request").liveMutate().send()}}),exports.SimpleItemHover=Component.extend({onLoad:function(){var a=this;this.$("#@item").hover(function(b){a.$("#@item").addClass("hover")},function(b){a.$("#@item").removeClass("hover")})}}),exports.SimpleUserRequestConfirm=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){return this._dialog=this.dialog().title(this.title).cancel(null,"Cancel").ok(this.fnbind(function(){this.serverCall("request").liveMutate().send()}),this.button_text).html("Are you sure you want to "+this.confirm_text+"?"),!1}))}}),exports.OrderItemButtons=Component.extend({onLoad:function(){this.$("#@up").click(this.fnbind(function(){return this.serverCall("move_up").liveMutate().send(),!1})),this.$("#@down").click(this.fnbind(function(){return this.serverCall("move_down").liveMutate().send(),!1}))}});\'),require.install("qed/util",function(require,a,b){function d(a,b,d){return c(a),b.parentNode===a&&a.removeChild(b),d?a.insertBefore(b,d):a.appendChild(b)}function e(a,b){var d=a.parentNode,e=a,f=0;c(d);if(typeof b=="number"&&d.childNodes[b]===a)return b;while(e=e.previousSibling)++f;return c(d.childNodes[f]===a),f}function f(a){while(a&&a.firstChild)a=a.firstChild;return a}function g(a){while(a&&a.lastChild)a=a.lastChild;return a}function h(a){return a.ownerDocument||a}function i(a){a.nodeType===3&&(a=a.parentNode);for(var b=h(a).documentElement;a&&a!==b;a=a.parentNode)if(v.get(a,"isEditorRoot"\n))return a}function j(a,b){return b=b||i(a),a&&a!==b&&f(a.nextSibling||j(a.parentNode,b))}function k(a,b){return b=b||i(a),a&&a!==b&&g(a.previousSibling||k(a.parentNode,b))}function l(a,b){a.nodeType==3&&(a=a.parentNode);var c=h(a),d=c.defaultView,e=a.style[b],f;if(!e||e==="auto")d&&d.getComputedStyle?f=d.getComputedStyle(a,null):f=a.currentStyle,e=f&&f[b];return e==="auto"?null:e}function n(a){return m?!!a.metaKey:!!a.ctrlKey}function o(a){return!!a.shiftKey}function t(a,b){for(var c=h(b).documentElement;b&&b!==c;b=b.parentNode)if(b===a)return!0;return!1}function u(a){var b=a.parentNode,e=b&&b.parentNode;c(!v.get(b,"isEditorRoot")),c(e);if(!a.nextSibling)d(e,a,b.nextSibling);else if(!a.previousSibling)d(e,a,b);else{var f=V(b.cloneNode(!1),a.nextSibling);d(e,f,b.nextSibling),d(e,a,f),c(b.nextSibling===a)}return c(a.previousSibling===b||a.nextSibling===b),!0}function w(a,b){var c={},d;if(a===b)return a;a.nodeType===3&&(a=a.parentNode),b.nodeType===3&&(b=b.parentNode);while(a||b){if(a){d=v.key(a);if(d in c)return a;c[d]=a,a=a.parentNode}if(b){d=v.key(b);if(d in c)return b;c[d]=b,b=b.parentNode}}}function x(a,b){var c=w(a,b);return y(a,b,c)}function y(a,b,d){c(d),c(a!==d),c(b!==d),c(i(d));while(a.parentNode!==d)u(a);while(b.parentNode!==d)u(b);return d}function z(a){var b=a.parentNode;if(b){while(a.firstChild)b.insertBefore(a.firstChild,a);b.removeChild(a)}return a}function A(a){var b=0,c,d,e=[],f;while(d=a[b++])d.parentNode===c?f.push(d):(c=d.parentNode,e.push(f=[d]));return e}function B(a,b){var c=b.parentNode;c&&c.replaceChild(a,b);while(b.firstChild)a.appendChild(b.firstChild);return a}function C(a,b){var e=0,f=b[0],g=f&&f.parentNode;g&&g.nodeType===1?d(g,a,f):g=null;while(f=b[e++])g&&c(f.parentNode===g),a.appendChild(f);return a}function D(a){var b=a.cloneNode(!1);return v.set(b,"isStyleSpan",!0),b}function E(a){var b={},c=a.nodeName.toLowerCase();c==="b"||c==="strong"?b.fontWeight="bold":c==="i"||c==="em"?b.fontStyle="italic":c==="u"?b.textDecoration="underline":b=null;if(b){var d=h(a).createElement("span");v.set(d,"isStyleSpan",!0);for(var e in b)d.style[e]=b[e];return B(d,a)}var f=a.style;return!v.get(a,"isStyleSpan")&&f&&(f.fontWeight||f.fontStyle||f.textDecoration)&&v.set(a,"isStyleSpan",!0),a}function F(a){function i(c){c.parentNode!==a&&(b=!0),h.push(c)}function o(b){var c=b[0].parentNode;n?C(D(a),b):(n=!0,C(a,b))}c(v.get(a,"isStyleSpan"));if(!a.firstChild){a.parentNode.removeChild(a);return}var b,d=f(a),e=g(a),h=[];while(d&&d!==e)i(d),d=j(d);i(e);if(!b)return;z(a);var k=0,l,m=A(h),n;while(l=m[k++])o(l)}function G(a,b){return d(a.parentNode,b,a.nextSibling)}function H(a,b){return d(a.parentNode,b,a)}function I(a,b){for(var c=a,d=[];c&&c!==b;c=j(c))d.push(c);b&&d.push(b);var e=h(a).documentElement,f=0;while(c=d[f++])for(var g=c.parentNode;g&&g!==e;g=g.parentNode){g=E(g);if(v.get(g,"isStyleSpan")){F(g);break}}return d}function J(a){return a.createTextNode("\xef\xbb\xbf")}function K(){}function L(a,b){var c=a.previousSibling,e;return!c||c.nodeType!==3?(e=d(a.parentNode,J(h(a)),a),function(){W(e)}):K}function N(a,b,c,d){return b+(new Array(c.length)).join("\xc2\xa0")+" "+d}function O(a,b){c(a.nodeType===3);var d=a.nodeValue,e;if(d==="\xef\xbb\xbf"&&!b)return;e=d.replace(/\\ufeff/g,""),e=e.replace(M,N);if(e!==d)return e===""?a.parentNode.removeChild(a):a.nodeValue=e,!0}function P(a){return a.nodeType===3&&a.nodeValue==""}function Q(a,b){var c=b?"nextSibling":"previousSibling",d=a[c],e;while(d&&P(d))e=d[c],W(d),d=e}function R(a){if(a.nodeType===3)return!1;var b=a.nodeName.toLowerCase();if(b=="img"&&a.className&&a.className.indexOf("hr_img")>-1)return!0;switch(b){case"div":case"p":case"br":case"ol":case"ul":case"li":case"blockquote":case"address":case"h1":return!0;default:return!1}}function S(a,b,c,d,e,f){var g=h(a),i,j;b=b||g.documentElement;while(a&&a!==b){i=a[c];if(i){a=i;if(R(a))return e(a,g.createElement("span"));while(j=a[d]){a=j;if(R(a))return e(a,g.createElement("span"))}}else{a=a.parentNode;if(a&&R(a))return f(a,g.createElement("span"))}}}function T(a,b){return S(a,b,"nextSibling","firstChild",H,function(a,b){return a.appendChild(b)})}function U(a,b){return S(a,b,"previousSibling","lastChild",G,function(a,b){return d(a,b,a.firstChild)})}function V(a,b,c){while(b&&b!==c){var d=b.nextSibling;a.appendChild(b),b=d}return a}function W(a){for(var b,c=0,d=arguments.length;c<d;c+=1)(a=arguments[c])&&(b=a.parentNode)&&b.removeChild(a)}function X(a){return ab(a,"ul")||ab(a,"ol")}function Y(a){return ab(a,"li")}function Z(a){var b=a&&a.nodeName;return/h\\d/i.test(b)}function _(a,b,c){return a&&a.firstChild==b&&a.lastChild==c}function ab(a,b){return!a||a.nodeType===3?!1:a.nodeName.toLowerCase()===b}function bb(a,b,c){if(Z(a)){var d=c.nextSibling;if(_(a,b,c))return!0;if(d&&ab(d,"br")&&_(a,b,d))return!0}return!1}function cb(a){a.innerHTML="";while(a.firstChild)a.removeChild(a.firstChild);return a}function db(a,b,d){c(R(a));var e=h(a),i=f(a),k=[];I(i,g(a));while(i){c(t(a,i));var l=U(i),m=T(i),n=j(m,a),o=e.createElement(b);c(t(a,l)),c(t(a,m)),x(l,m);var p=l.parentNode;bb(p,l,m)?o.appendChild(p):V(o,l.nextSibling,m),d&&(o=d(o)),k.push(o),W(l,m),i=n;while(i&&R(i))i=j(i,a)}return C(cb(a),k)}function eb(a,b,c){return n(c)?fb(a,b):!0}function fb(a,b){var c=i(a);if(!c)return!0;var e=c.firstChild;return e&&ab(e,"a")&&(d(c,a,c.firstChild),c.appendChild(b),L(a,b)),!0}function gb(a,b){b=b||a.ownerDocument.documentElement;for(var c;a;a=a.parentNode){c={node:a,next:c};if(a===b)break}return c}function hb(a,b,c){for(var d=gb(a,c),e=gb(b,c),f;d&&e&&d.node===e.node;d=d.next,e=e.next)f=d.node;if(d&&e){a=d.node,b=e.node;while(a&&a!==b)a=a.nextSibling;if(!a){var g=d;d=e,e=g}}return[f,d,e]}function ib(a,b,c,d){var e=hb(a,b,c),f=e[0],g=e[1],h=e[2],i=[];return g&&h&&jb(f,g,h,d),i}function jb(a,b,c,d){if(d(a))return!0;if(b&&b.next&&jb(b.node,b.next,null,d))return!0;for(var e=b?b.node.nextSibling:a.firstChild,f=c?c.node:null;e&&e!==f;e=e.nextSibling)if(kb(e,d))return!0;if(c&&c.next&&jb(c.node,null,c.next,d))return!0}function kb(a,b){if(b(a))return!0;var c=a.firstChild;for(;c;c=c.nextSibling)if(kb(c,b))return!0}function lb(a,b){for(var c=h(a).documentElement;a&&a!==c;a=a.parentNode)if(b(a))return a}function mb(a){var b=lb(a,Z);return b&&lb(b,Y)}function nb(a){Q(a,!1);var b=a.previousSibling;return b?R(b)?!0:!1:!0}var c=a.assert=require("assert").ok;a.guid=function(){return((+(new Date)).toString(36)+Math.random().toString(36)).toLowerCase()},a.insertBefore=d,a.indexOfChild=e,a.firstLeaf=f,a.lastLeaf=g,a.getDocument=h,a.getEditorRoot=i,a.nextLeaf=j,a.prevLeaf=k,a.cloneObject=function(a,b){var c=function(){for(var a in b)this[a]=b[a]};return c.prototype=a,new c},a.getStyle=l,a.isVisible=function(a){return require("jquery"),$(a).is(":visible")};var m=navigator.platform.match("Mac");a.hasCtrlOrCmd=n,a.hasShift=o;var p=window&&window.navigator&&window.navigator.userAgent||"",q=p.indexOf("AppleWebKit/")>-1,r=p.indexOf("MSIE")>-1,s=p.indexOf("Gecko/")>-1&&p.indexOf("Chrome")<0;a.isIE=r,a.isWebKit=q,a.isGecko=s,a.addClass=function(a,b){for(var c=0,d=(a.getAttribute("class")||"").split(" ");c<d.length;++c)if(d[c]===b)break;c==d.length&&(d.push(b),a.setAttribute("class",d.join(" ")))},a.arraysEqual=function(a,b,c){if(a&&b){var d,e=a.length;if(e!=b.length)return!1;for(d=0;d<e;++d)if(c?!c(a[d],b[d]):a[d]!==b[d])return!1;return!0}return a||b?!1:!0},a.contains=t,a.splitParent=u;var v=require("./npd");a.nearestCommonAncestor=w,a.makeSiblings=x,a.splitParentsUntil=y,a.deleteContents=function(a,b){x(a,b);while(a.nextSibling!==b)a.parentNode.removeChild(a.nextSibling)},a.replaceWithChildren=z,a.replaceNode=B,a.wrapChildren=C,a.convertToStyleSpan=E,a.hugLeavesBetween=I,a.applyStyle=function(a,b,d){var e=h(a),f,g=A(I(a,b)),i=0;while(f=g[i++])v.get(f[0].parentNode,"isStyleSpan")||v.set(C(e.createElement("span"),f),"isStyleSpan",!0);var j=a.parentNode,k=b.parentNode;c(v.get(j,"isStyleSpan")),c(v.get(k,"isStyleSpan")),a.previousSibling&&H(j,V(D(j),j.firstChild,a)),b.nextSibling&&G(k,V(D(k),b.nextSibling)),L(a,b),i=0;while(f=g[i++]){var l=f[0].parentNode;c(v.get(l,"isStyleSpan"));for(var m in d)l.style[m]=d[m]}},a.addExtraSupport=L;var M=/(\\S)(\\u00a0+)(\\S)/g;a.cleanTextNode=O,a.cleanFEFFs=function(a,b){for(var c=b?k:j,d=i(a),e=c(a,d);e;e=c(e,d))if(e.nodeType===3&&O(e,!0))break},a.getText=function(a,b){var c=a.innerText;return c||(c=a.innerHTML.replace(/\\<[^>]*>/g," "),c=c.replace(/&amp;/g,"&")),c&&(c=c.replace(/\\ufeff/g,""),b||(c=c.replace(/^\\s+|\\s+$/g,""))),c},a.removeEmptyTextNodes=Q,a.causesLineBreak=R,a.findNextLine=T,a.findPrevLine=U,a.extractSiblings=V,a.remove=W,a.isList=X,a.isListItem=Y,a.isHeading=Z,a.spansChildren=_,a.hasTag=ab,a.formatBlock=function(a,b,c){I(a,b);var e=h(a),f=e.createElement(c),g=U(a),i=T(b);x(g,i);var j=g.parentNode,k=f,l=f;if(j&&X(j)&&!Y(f)){var m=e.createElement("li");m.appendChild(f),k=m;if(Y(g.nextSibling)&&!X(f)){var n=e.createElement(j.nodeName);f.appendChild(n),l=n}}return bb(j,g,i)?(d(j.parentNode,f,j),f.appendChild(j),W(g,i),f):(d(g.parentNode,k,g),V(l,g,i),W(g,i),f)},a.removeAllChildren=cb,a.wrapLines=db,a.handleSelectAll=eb,a.fixSelectAll=fb,a.getAncestors=gb,a.getPathsFromNCA=hb,a.traverseAllNodesBetween=ib,a.findAncestor=lb,a.findHeadingInLi=mb,a.checkBeginningOfLine=nb}),require.install("qed/unload",function(require,a,b){function g(){var a=f.onbeforeunload;if(a===e)return;e=f.onbeforeunload=function(){var b,e=0,f;if(!d)while(b=c[e++])if(f=b())return f;if(a)try{return++d,a.apply(this,arguments)}finally{--d}}}var c=[],d=0,e,f=window;a.checkBeforeUnload=function(a){g(),a&&c.push(a)},a.removeCheck=function(a){var b;for(b=0;b<c.length;b++)if(c[b]===a){c.splice(b,1);break}}}),require.installLazy("app/view/link",\'var Component=require("w2.quora").Component,qtexteditor=require("qtexteditor"),linkEditorProperties={onLoad:function(){this.$("#@link_no_image").click(this.fnbind(function(){return this.clearAllSelected(),this.setDisplayType("link_no_image"),this.$("#@link_no_image").addClass("selected"),!1})),this.$("#@link_small_image").click(this.fnbind(function(){return this.clearAllSelected(),this.setDisplayType("link_small_image"),this.$("#@link_small_image").addClass("selected"),!1})),this.$("#@link_large_image").click(this.fnbind(function(){return this.clearAllSelected(),this.setDisplayType("link_large_image"),this.$("#@link_large_image").addClass("selected"),!1})),this.$("#@remove_url").click(this.fnbind(function(){return this.parent().removeUrl(),!1}))},clearAllSelected:function(){this.$("#@link_no_image, #@link_small_image, #@link_large_image").removeClass("selected")},setDisplayType:function(a){var b;a=="link_no_image"?b=1:a=="link_small_image"?b=2:b=3,this.cQuery(":preview").setDisplayType(a,b)}};exports.LinkEditor=Component.extend(linkEditorProperties),exports.LinkVideo=Component.extend({onLoad:function(){this.$("#@video_wrapper").click(this.fnbind(function(){this.parent().playVideo(),this.$("#@video_wrapper .qtext_embed.thumbnail").css("width","100%").css("height","272px")}))}}),exports.LinkImageEditor=Component.extend({onLoad:function(){this.index=0,this.$("#@next_photo").click(this.fnbind(function(a){return this.cycle_photo(1),!1})),this.$("#@prev_photo").click(this.fnbind(function(a){return this.cycle_photo(this.keys_and_sources.length-1),!1})),this.$("#@link").click(this.fnbind(function(){this.serverCall("track").send()}))},get_image_keys:function(){if(this.keys_and_sources!={}){var a=[];for(var b=this.index,c=0,d=this.keys_and_sources.length;c<d;c++,b=(b+1)%d)a.push(this.keys_and_sources[b][0]);return a}return[]},cycle_photo:function(a){var b=this.index;this.index=(b+a)%this.keys_and_sources.length,this.$("#@img").attr("src",this.keys_and_sources[this.index][1])}}),exports.LinkTitle=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this.serverCall("track").send()}))}}),exports.EmbedLinkEditor=qtexteditor.EmbedComponentBase.extend($.extend({},linkEditorProperties,{onLoad:function(){linkEditorProperties.onLoad.apply(this,arguments),this.$("#@remove_url").unbind("click");var a=this;this.$("#@remove_url").click(function(){a.componentDeleted()});var b=function(){return setTimeout(function(){a.triggerDataChanged()},0),!0},c=this.cQuery("preview.title.editor.editor");c.$("#@editor").keydown(b);var d=this.cQuery("preview.snippet.editor.editor");d.$("#@editor").keydown(b),this.getLinkImageEditor().whenOnLoaded(function(){c.whenOnLoaded(function(){d.whenOnLoaded(function(){var c=a.previous_info=a.getInfo();a.registerWithParent(a.preview.url,c);var d=a.getLinkImageEditor();d.$("#@next_photo").click(b),d.$("#@prev_photo").click(b)})})})},triggerDataChanged:function(){var a=this.getInfo();a!==this.previous_data&&(this.dataChanged(a),this.previous_data=a)},initializeEmbedComponent:function(a,b,c){this._super.apply(this,arguments);var d=this,e=c.find(".link_photo img")||[];e.length?e.load(function(){d.updatePlaceholderImageSize(),d.parent().updateEmbedComponentPositions()}):d.updatePlaceholderImageSize()},setDisplayType:function(a){linkEditorProperties.setDisplayType.apply(this,arguments),this.triggerDataChanged()},getLink:function(){return this.cQuery("preview")},getLinkImageEditor:function(){return this.getLink().cQuery(":media")},getInfo:function(){var a=this.getLink().getLinkInfo();a.embed_type="link";var b=JSON.stringify(a);return b}})),exports.Link=Component.extend({getLinkInfo:function(){this.link_info.title=this.cQuery(":title.editor").get_value(),this.link_info.snippet=this.cQuery(":snippet.editor").get_value();var a=this.cQuery(":media");return a.editable&&(this.link_info.image_keys=a.get_image_keys()),this.link_info},disableInputs:function(){this.cQuery(":title.editor.editor").$("#@editor").addClass("qtext_editor_content_disabled"),this.cQuery(":snippet.editor.editor").$("#@editor").addClass("qtext_editor_content_disabled")},setDisplayType:function(a,b){this.$("#@link_wrapper").removeClass().addClass(a),this.link_info.display_type=b},playVideo:function(){var a=2;this.link_info["display_type"]==a&&(this.$("#@image_col, #@info_col").css("float","left"),this.$("#@image_col").css("width","100%"),this.$("#@image_and_info").css("display","block"))}});\'),require.installLazy("app/view/home/home_invite",\'var Component=require("w2.quora").Component;exports.PeopleCardRowBase=Component.extend({doNotSuggestKwargs:function(){return{}},onLoad:function(a){this.$("#@person").hover(this.fnbind(function(){this.$("#@person").addClass("hover"),this.$("#@buttons").removeClass("hidden")}),this.fnbind(function(){this.$("#@person").removeClass("hover"),this.$("#@buttons").addClass("hidden")})),this.$("#@remove").tooltip({contents:"Do not suggest"}).click(this.fnbind(function(){return this.serverCall("do_not_suggest").kwargs(this.doNotSuggestKwargs()).success(this.fnbind(function(){this.$("#@person").addClass("hidden")})).send(),!1}))}}),exports.PeopleCardRow=exports.PeopleCardRowBase.extend({doNotSuggestKwargs:function(){return this.fb_uid?{fb_uid:this.fb_uid}:{}}}),exports.FacebookInviteSuggestionListItem=exports.PeopleCardRowBase.extend({doNotSuggestKwargs:function(){return this.fb_uid?{fb_uid:this.fb_uid}:{}}}),exports.TwitterInviteSuggestionListItem=exports.PeopleCardRowBase.extend({doNotSuggestKwargs:function(){return this.tw_uid?{tw_uid:this.tw_uid}:{}}}),exports.LinkedinInviteSuggestionListItem=exports.PeopleCardRowBase.extend({doNotSuggestKwargs:function(){return this.li_uid?{li_uid:this.li_uid}:{}}}),exports.InviteFriendOfName=Component.extend({onLoad:function(){this.$("#@contact_name").click(this.fnbind(function(){return this.lookup("invite_button").invite(),!1})),this.$("#@contact_photo").click(this.fnbind(function(){return this.lookup("invite_button").invite(),!1}))}});\'),require.installLazy("app/view/board/item",\'var Component=require("w2.quora").Component,cookies=require("cookies"),toggle=require("view/toggle"),windowManager=require("window_manager"),BoardViewTracker=require("app/view/board/view_tracker"),InlineEditor=require("view/inline_editor").InlineEditor;exports.BoardItemTimestamp=Component.extend({onLoad:function(a){var b=this;b.$("#@link").mousedown(function(){cookies.setQfeedLog(b,"BoardItemClickthrough"),cookies.setQueryLog(b,"BoardItemClickthrough")}),b.onKeyCombination(b.$("#@link"),"Shift-Enter",function(){return windowManager.navigateTo(b.$("#@link").attr("href")),!1})}}),exports.BoardItemTitle=Component.extend({onLoad:function(a){var b=this;b.$("#@link").mousedown(function(){cookies.setQfeedLog(b,"BoardItemClickthrough"),cookies.setQueryLog(b,"BoardItemClickthrough")})}}),exports.BoardItemTopics=Component.extend({onLoad:function(a){var b=this;b.$("#@show_promote").click(function(){return b.toggleSections(),!1}),b.$("#@show_topics").click(function(){return b.toggleSections(),!1})},toggleSections:function(){this.$("#@promote").toggle(),this.$("#@topics").toggle()}}),exports.BoardItemView=toggle.SwitchableComponentWithComments.extend({onLoad:function(){this._super.apply(this,arguments);var a=this;a.$("#@show_promote").click(function(b){var c=a.$("#@promote");return c.hasClass("hidden")?c.removeClass("hidden"):c.addClass("hidden"),!1}),a.has_vote_controls&&a.$("#@item").hover(function(b){a.cQuery(":vote_controls").$("#@delete").show(),a.$("#@item").addClass("hover")},function(b){a.cQuery(":vote_controls").$("#@delete").hide(),a.$("#@item").removeClass("hover")});if(a.is_feed){var b=a.getCQueryString();a.$("#@rating").tooltip({contents:a.tt}).mouseover(function(){a.mouseover_toggled||(a.mouseover_toggled=!0,a.cQuery(b).$("#@truncated").mouseover())}).click(function(){return a.toggleTextViews(),!1}),a.cQuery(b).setCallback(function(){a.show()})}a.setCallback(a.switchAndViewComments)},getCQueryString:function(){return this.is_post_on_board?"expandable_qtext":"description.expandable_qtext"},toggleTextViews:function(){var a=this.getCQueryString(),b=this.cQuery(a).$("#@truncated a.more_link");b.length?b.click():(this.cQuery(a).switchIfReady(),this.show())},show:function(){this.lookup("voting")&&this.lookup("voting").$("#@voting").show(),this.lookup("voters")&&this.lookup("voters").$("#@voters").show(),this.$("#@timestamp").removeClass("hidden"),this.$("#@item").addClass("expanded_feed_content")}}),exports.LinkBoardItemView=exports.BoardItemView.extend({onLoad:function(){this._super.apply(this,arguments);var a=this;a.$("#@edit").click(function(){return a.showEditor(),!1}),a.$("#@item").hover(function(b){a.$("#@item").addClass("hover")},function(b){a.$("#@item").removeClass("hover")})},showEditor:function(){this.cQuery(":description.editor").toggle_editor()}}),exports.LinkBoardItemDescriptionInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments);var a=this;a.board_item=a.lookup("board_item"),a.setToggleCallback(function(){a.board_item.$("#@preview, #@edit").toggle()})},_get_kwargs:function(){return{input:this.get_value(),preview:this.cQuery(":link_editor.preview").getLinkInfo()}}}),exports.DeleteBoardItem=Component.extend({onLoad:function(){var a=this;a.$("#@link").click(function(){return a.parent().$("#@item").addClass("selected"),a._dialog=a.dialog().title("Delete Post").ok(function(){a.serverCall("delete").liveMutate().send()},"Delete").cancel(function(){a.parent().$("#@item").removeClass("selected")},"Cancel").html("Are you sure you want to delete this post?"),!1})}}),exports.BoardListItem=Component.extend({onLoad:function(){BoardViewTracker.instance&&BoardViewTracker.instance.addBoardItem(this.cid,this.board_item_id)},onUnload:function(){BoardViewTracker.instance&&BoardViewTracker.instance.removeBoardItem(this.cid,this.board_item_id)}});\'),require.installLazy("view/topic_selector",\'var Component=require("w2.quora").Component;exports.TypeBasedTempTopicSelectorAdd=Component.extend({onLoad:function(){this.$("#@add_btn").click(this.fnbind(function(){return this.select(),!1})),this.tempTopicList={}},select:function(){this.type=="to_tid"?$(".content").dialog({title:"Topic Merge",url:"/ajax/topic_merge_dialog",buttons:{Ok:this.fnbind(this._request),Cancel:null}}):this._request()},_get_kwargs:function(){var a,b,c={};return!(c.tid=this.oid)||!(c.type=this.type)||!(c.topic_name=this.parent().qValue)||/^\\\\s*$/.test(c.topic_name)||this.type=="to_tid"&&(a=require("app/view/topic").getTopicDialog())&&(b=a.lookup("editor"))&&b.isEmpty()?null:(b&&(c.comment=b.serialize()),c)},_request:function(){var a=this._get_kwargs();if(!a)return!1;this.serverCall("add_topic").kwargs(a).success(this.fnbind(function(){this.parent().reset()})).liveMutate().send(),this.hide&&this.parent().hideSelector()}}),exports.TempTopicSelectorAdd=exports.TypeBasedTempTopicSelectorAdd.extend({select:function(){this.saveTempTopic(this.parent().result)},setoid:function(a){this.oid=a},saveName:function(a){this.tempTopicList[a]=a},deleteName:function(a){delete this.tempTopicList[a]},getTempTopicNames:function(){return this.tempTopicList},getTempTopicNamesAsArray:function(){var a=[];for(var b in this.tempTopicList)a.push(b);return a},reset:function(){this.parent().resetTempTopics(),this.tempTopicList={}},saveTempTopic:function(a){var b=a.value;if(!b)return;this.saveName(b);var c=$("<li/>").addClass(this.tempTopicClass()).append($("<input/>").attr("type","hidden").attr("name","tidsugg_"+this.oid).val(b)).append($(this.topicNameTag()).text(this.tempTopicVisibleText(b)).addClass(this.topicNameClasses())).append($("<a/>").text(this.removeTopicText()).addClass(this.editLinkClasses()).attr("href","#").click(this.fnbind(function(){return this.deleteName(b),c.remove(),!1})));this.parent().addTempTopic(c)},topicNameTag:function(){return"<strong/>"},topicNameClasses:function(){return""},editLinkClasses:function(){return"light"},tempTopicClass:function(){return"p0_5"},onTempTopicAdded:function(a){this.parent().setText(""),this.parent().focus()},tempTopicVisibleText:function(a){return a},removeTopicText:function(){return" remove"}}),exports.TempReviewEditorTopicSelectorAdd=exports.TempTopicSelectorAdd.extend({onLoad:function(){this._super.apply(this,arguments),this.loaded=!1},editLinkClasses:function(){return"light edit o"},tempTopicClass:function(){return""},removeTopicText:function(){return"Edit"},tempTopicVisibleText:function(a){return"Review of: "+a},onTempTopicAdded:function(a){this._super.apply(this,arguments),this.parent().$("#@selector_wrapper, #@title").hide(),this.parent().$("#@input").blur(),this.lookup("section").$("#@editor").show()},deleteName:function(a){this._super.apply(this,arguments),this.parent().$("#@selector_wrapper, #@title").show(),this.parent().resetFocus()}}),exports.TempTopicExpertTopicSelectorAdd=exports.TempTopicSelectorAdd.extend({saveTempTopic:function(a){var b=a.value;if(!b)return;this.saveName(b);var c=$("<div/>").addClass("row removeable_item");this.serverCall("load_topic").kwargs({uid:this.oid,topic_name:b}).contentFor(c,{parentCID:this.cid}).success(this.fnbind(function(){c.append($("<div/>").addClass("demote_item").css("top",10).append($("<a/>").addClass("lil_button promote_down").attr("href","#").click(this.fnbind(function(){return this.deleteName(b),c.remove(),!1}))))})).send(),this.parent().addTempTopic(c)},checkClicked:function(a){var b=this.tempTopicList[a];b&&b!=="undefined"?this.deleteName(a):this.saveName(a)},deleteName:function(a){delete this.tempTopicList[a]},onTempTopicAdded:function(){this._super.apply(this,arguments);var a=this.lookup("form").$("#@buttons");a.is(":not(:visible)")&&a.show()}}),exports.TempBoardItemTopicSelectorAdd=exports.TempTopicSelectorAdd.extend({topicNameTag:function(){return"<span/>"},topicNameClasses:function(){return"topic_name"},editLinkClasses:function(){return"topic_remove"},removeTopicText:function(){return""},tempTopicClass:function(){return"topic_list_item"}}),exports.TempBoardItemTopicSuggestionsSelectorAdd=exports.TempBoardItemTopicSelectorAdd.extend({saveTempTopic:function(a){var b=a.value;if(!b)return;this.saveName(b);var c=$("<div/>").addClass("row").addClass("p0_5").addClass("feed_item").append($("<span/>").addClass(this.tempTopicClass()).append($(this.topicNameTag()).text(this.tempTopicVisibleText(b)).addClass(this.topicNameClasses()))).append($("<div/>").addClass("button_col").addClass("e_col").append($("<input/>").attr("type","checkbox").attr("checked","checked").attr("value",b).click(this.fnbind(function(){this.checkClicked(b)}))));this.parent().addTempTopic(c),this.updateFollowersCount()},updateFollowersCount:function(){this.serverCall("update_count").kwargs({names:this.getTempTopicNames()}).contentFor(this.parent().$("#@followers"),{parentCID:this.cid}).send()},checkClicked:function(a){var b=this.tempTopicList[a];b&&b!=="undefined"?this.deleteName(a):(this.saveName(a),this.updateFollowersCount())},deleteName:function(a){delete this.tempTopicList[a],this.updateFollowersCount()},onTempTopicAdded:function(){this.updateFollowersCount()}}),exports.TempTopicContextSelectorAdd=exports.TempTopicSelectorAdd.extend({onLoad:function(){this._super.apply(this,arguments),this.defaultTopicName&&this.saveTempTopic({value:this.defaultTopicName,type:"topic",id:this.defaultTid,follower_count:this.defaultTopicFollowerCount})},tempTopicVisibleText:function(a){return a+":"},editLinkClasses:function(){return"light edit o"},tempTopicClass:function(){return""},removeTopicText:function(){return"Edit"},onTempTopicAdded:function(){this._super.apply(this,arguments),this.parent().$("#@selector_wrapper, #@title").hide(),this.parent().$("#@input").blur()},deleteName:function(a){this._super.apply(this,arguments),this.parent().$("#@selector_wrapper, #@title").show(),this.parent().resetFocus()}}),exports.TempReviewTopicContextSelectorAdd=exports.TempTopicContextSelectorAdd.extend({tempTopicVisibleText:function(a){return"Reviews of: "+a}}),exports.TempTopicTaxonomySelectorAdd=exports.TempTopicSelectorAdd.extend({onLoad:function(){this._super.apply(this,arguments)},saveTempTopic:function(a){if(!a.value)return;this.lookup("tree_editor").newTopicAdded(a)}}),exports.TempTopicQuestionWizardSelectorAdd=exports.TempTopicSelectorAdd.extend({onLoad:function(){this._super.apply(this,arguments);var a=this.lookup("topic_selection").getTopicNames().concat(this.lookup("topic_selection").getUnselectedTopicNames());for(var b=0;b<a.length;b++){var c=a[b];this.saveName(c)}},saveTempTopic:function(a){var b=a.value;if(!b)return;this.getTempTopicNames()[b]||(this.saveName(b),this.lookup("topic_selection").newTopicAdded(a))}}),exports.ReviewQueueTempTopicSelectorAdd=exports.TempTopicSelectorAdd.extend({onLoad:function(){this._super.apply(this,arguments)},saveTempTopic:function(a){var b=a.value;if(!b)return;this.parent().parent().setTopic(b)}}),exports.TempBoardItemTopicSuggestionRow=Component.extend({onLoad:function(){var a=this;this.$("#@add_check").click(this.fnbind(function(){a.lookup("topic_add").checkClicked(a.topic_name)}))}}),exports.TopicSelectorAdd=Component.extend({onLoad:function(a){this.$("#@add_btn").click(this.fnbind(function(a){return this.select(),!1}))},getTopicName:function(){return this.parent().qValue},getKwargs:function(){return{selected_topic:this.getTopicName()}},select:function(){var a=this.getTopicName(),b=this.getKwargs();this.parent()&&this.parent().resetFocus(),a&&this.serverCall("add").kwargs(b).liveMutate().error(this.fnbind(function(){$(".content").dialog({title:"Unable to Add Topic",contents:"This topic may not be added.",buttons:{Close:null}})})).send()}}),exports.A2AInternalPageTopicSelectorAdd=exports.TopicSelectorAdd.extend({select:function(){var a=this.getTopicName(),b=this.getKwargs();this.parent()&&this.parent().resetFocus(),a&&this.serverCall("add").kwargs(b).liveMutate().success(this.fnbind(function(a){window.location="/internal/a2a/topic?tid="+a})).send()}}),exports.QuestionTopicSelectorAdd=exports.TopicSelectorAdd.extend({getKwargs:function(){return{selected_topics:this.getTopicName(),viewer_private:this.viewer_private,qid:this.qid}},getTopicName:function(){if(this.parent().qValue!=="")return $.makeArray(this.parent().qValue)}}),exports.UserContentFilterTempTopicSelectorAdd=exports.TempTopicSelectorAdd.extend({saveTempTopic:function(a){var b=a.value,c=a.id;if(!b)return;this.lookup("user_content_filter").tempTopicChosen(c,b)}});\'),require.installLazy("app/view/pmsg/pmsg",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.PMsg=Component.extend({onLoad:function(){this.$("#@x").click(this.fnbind(function(){return this.close(),!1}))},close:function(){this.$("#@container").hide(),$(".pmsg_container").hide()}}),exports.UndoTopicRemoval=exports.PMsg.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@undo").click(this.fnbind(function(a){return this.serverCall("undo").kwargs({poid:this.poid}).liveMutate().success(this.fnbind(function(a){clearTimeout(this.t),this.close()})).send(),!1}))}}),exports.UndoTopicReplacement=exports.PMsg.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@undo").click(this.fnbind(function(a){return this.serverCall("undo").kwargs({add_oid:this.add_oid}).liveMutate().success(this.fnbind(function(a){clearTimeout(this.t),this.close()})).send(),!1}))}}),exports.PMsgContainer=Component.extend({onLoad:function(a){W2.pmsgContainer=this;var b=$("#layout_header");b.length!==0&&(this.headerHeight=b.outerHeight(),this.mobile||this.$("#@pmsg_container").css("top",this.headerHeight+10)),this.$("#@pmsg_container").html()&&!this.mobile&&(this.$("#@pmsg_container").fadeIn(350),this.setFadeTimeout(5e3))},setFadeTimeout:function(a){var b=this;this.t=setTimeout(function(){b.$("#@pmsg_container").fadeOut(350)},a)},setContent:function(a,b){var c=this;c.$("#@pmsg_container").hover(function(){clearTimeout(c.t),c.$("#@pmsg_container").stop(),c.$("#@pmsg_container").css("opacity",100)},function(){c.setFadeTimeout(1e3)});var d=function(a){c.$("#@pmsg_container").setContent(a),c.$("#@pmsg_container").fadeIn(350),c.setFadeTimeout(5e3)};return this.$("#@pmsg_container").is(":visible")?(clearTimeout(this.t),this.$("#@pmsg_container").fadeOut(350,this.fnbind(function(){d(a)}))):d(a),this}});\'),require.installLazy("app/view/mobile_debug",\'var Component=require("w2.quora").Component,cookies=require("cookies");exports.MobileDebugLinkFullSite=Component.extend({onLoad:function(){var a=cookies.cookie;this.$("#@link").click(this.fnbind(function(b){return console.log("full"),a("iphone_app","",{expires:-1}),a("iphone_app_version","",{expires:-1}),a("android_app","",{expires:-1}),a("android_app_version","",{expires:-1}),a("m","0"),window.top.location.reload(!0),!1}))}}),exports.MobileDebugLinkMobileSite=Component.extend({onLoad:function(){var a=cookies.cookie;this.$("#@link").click(this.fnbind(function(b){return a("iphone_app","",{expires:-1}),a("iphone_app_version","",{expires:-1}),a("android_app","",{expires:-1}),a("android_app_version","",{expires:-1}),a("m","1"),window.top.location.reload(!0),!1}))}}),exports.MobileDebugLinkIphone=Component.extend({onLoad:function(){var a=cookies.cookie;this.$("#@link").click(this.fnbind(function(b){return a("iphone_app","1"),a("iphone_app_version","1.60:23"),a("android_app","",{expires:-1}),a("android_app_version","",{expires:-1}),a("m","1"),window.top.location.reload(!0),!1}))}}),exports.MobileDebugLinkAndroid=Component.extend({onLoad:function(){var a=cookies.cookie;this.$("#@link").click(this.fnbind(function(b){return a("iphone_app","",{expires:-1}),a("iphone_app_version","",{expires:-1}),a("android_app","1"),a("android_app_version","0.0.48:48.0"),a("m","1"),window.top.location.reload(!0),!1}))}}),exports.MobileDebugOrientationSwitcher=Component.extend({onLoad:function(){this.$("#@portrait").click(this.fnbind(function(a){return window.top.setDebugOrientation("portrait"),this.$("#@portrait").addClass("selected"),this.$("#@landscape").removeClass("selected"),!1})),this.$("#@landscape").click(this.fnbind(function(a){return window.top.setDebugOrientation("landscape"),this.$("#@landscape").addClass("selected"),this.$("#@portrait").removeClass("selected"),!1}))}});\'),require.installLazy("app/view/admin",\'var Component=require("w2.quora").Component,InlineEditor=require("view/inline_editor").InlineEditor,windowManager=require("window_manager");exports.AdminLogItemView=Component.extend({onLoad:function(){this.$("#@view").click(this.fnbind(function(){return this.$("#@details").toggleClass("hidden"),!1})),this.$("#@item").hover(this.fnbind(function(){this.$("#@item").addClass("hover"),this.$("#@buttons").removeClass("hidden")}),this.fnbind(function(){this.$("#@item").removeClass("hover"),this.$("#@buttons").addClass("hidden")})),this.$("#@remove").tooltip({contents:"Hide Log Item"}).click(this.fnbind(function(){return this.dialog().title("Hide Log Item").cancel(null,"Cancel").ok(this.fnbind(function(){this.serverCall("hide_log_item").send()}),"Hide Log Item").html("Are you sure you want to hide this log item?"),!1}))}}),exports.UserAdminMenuLink=Component.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(a){return this.$("#@menu").menu(this.$("#@menu_link")),!1}))}}),exports.AdminMode=Component.extend({toggle:function(){this.serverCall("toggle").liveMutate().send()},onLoad:function(){function b(){return a.toggle(),!1}var a=this;a.$("#@toggle").click(b),a.listen&&require("keystrokes").on([81,49,81,49],b)}}),exports.AdminModeListener=Component.extend({toggle:function(){this.serverCall("toggle").liveMutate().send()},onLoad:function(){function b(){return a.toggle(),!1}var a=this;require("keystrokes").on([81,49,81,49],b)}}),exports.AddAdminSelector=Component.extend({setTo:function(a){if(a&&a!==""){var b,c;this.yesno_reviewer?(b="Invite New Reviewer?",c="Invite Reviewer"):(b="Invite New Admin?",c="Invite Admin"),this._dialog=this.dialog().title(b).ok(this.fnbind(function(){this.serverCall("add_admin").kwargs({admin_uid:a}).success(this.fnbind(function(){this.clear()})).liveMutate().send()}),c).cancel(null,"Cancel").load("add_admin_dialog_contents",{kwargs:{admin_uid:a}})}},clear:function(){this.lookup("selector").inputBlur()}}),exports.NicknameInlineEditor=InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),windowManager.getHash().substr(0,9)=="#editname"&&this.toggle_editor()}}),exports.RemoveInboxMessagesLink=Component.extend({onLoad:function(){this.$("#@delete").click(this.fnbind(function(){return this.dialog().title("Delete Messages").cancel(null,"Cancel").ok(this.fnbind(function(){this.serverCall("delete_messages").liveMutate().send()}),"Delete Messages").html("Are you sure you want to delete all messages sent by this user?"),!1}))}}),exports.AdminRemoveUserPhoto=Component.extend({onLoad:function(a){this.$("#@remove_photo_link").click(this.fnbind(function(){return this.dialog().title("Remove Profile Photo").cancel().ok(this.fnbind(function(a){var b=a.dialogComponent.child("editor").serialize();this.serverCall("remove_photo").kwargs({ce:b}).liveMutate().send()}),"Remove Photo").load("remove_photo_dialog"),$("#admin_remove_profile_photo_comment").focus(),!1}))}});\'\n),require.installLazy("app/view/suggested_photo",\'var Component=require("w2.quora").Component;exports.SuggestProfilePhoto=Component.extend({onLoad:function(){this.$("#@photo").hover(this.fnbind(function(a){this.$("#@add, #@edit").show()}),this.fnbind(function(a){this.$("#@add, #@edit").hide()}))}}),exports.SuggestedPhotoPending=Component.extend({onLoad:function(){this.suggestion_from_viewer||this.$("#@photo").hover(this.fnbind(function(a){this.$("#@pending").show()}),this.fnbind(function(a){this.$("#@pending").hide()})),this.$("#@view").click(this.fnbind(function(){return this.parent().toggleSuggestion(),!1}))}}),exports.SuggestedPhotoAccept=Component.extend({onLoad:function(){this.$("#@accept").click(this.fnbind(function(){return this.serverCall("accept").kwargs({uid:this.uid}).liveMutate().send(),!1}))}}),exports.SuggestedPhotoDiscard=Component.extend({onLoad:function(){this.$("#@discard").click(this.fnbind(function(){return this._dialog=this.dialog().title("Discard Suggestion?").ok(this.fnbind(function(){this.serverCall("discard").kwargs({to_uid:this.to_uid}).liveMutate().send()}),"Discard Suggestion").cancel(null,"Cancel").html("Are you sure you want to delete this suggested profile photo?"),!1}))}});\'),require.installLazy("app/view/vc",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.RevertDialog=Component.extend({onLoad:function(){this.lookup("editor").focus(),W2.revertDialog=this}}),exports.BatchRevertDialog=Component.extend({onLoad:function(){this.lookup("editor").focus(),W2.batchRevertDialog=this}}),exports.OperationApprove=Component.extend({onLoad:function(){this.$("#@operation_undo_approve").click(this.fnbind(function(){return this._request("approve_revision_remove"),!1})),this.$("#@operation_approve").tooltip({contents:"Confirm this change has been reviewed"}).click(this.fnbind(function(){return this._request("approve_revision"),!1}))},_request:function(a){this.serverCall(a).kwargs({oid:this.oid}).liveMutate().send()}}),exports.OperationRevert=Component.extend({onLoad:function(){this.$("#@operation_revert").click(this.fnbind(function(){return $(".content").dialog({title:"Revert Edit",url:"/ajax/revert_dialog",mobile:this.mobile,buttons:{Revert:this.fnbind(function(){var a=W2.revertDialog.lookup("editor");if(a.isEmpty())return!1;this.serverCall("revert_revision").kwargs(this.getKwargs(a)).liveMutate().send()}),Cancel:null}}),!1}))},getKwargs:function(a){return{oid:this.oid,comment:a.serialize()}}});\'),require.installLazy("app/view/widgets",\'function delayedCloseWindow(){setTimeout(function(){window.close()},1e3)}var Component=require("w2.quora").Component;exports.WidgetsLoginAndFollowMain=Component.extend({onLoad:function(a){this.$("#@signup_link").click(this.fnbind(function(){delayedCloseWindow()}))}}),exports.WidgetsExampleFollowButton=Component.extend({clickHandlers:{change_target:function(){this.toggleSelector(!0)}},toggleSelector:function(a){this.$("#@selector_wrapper").toggle(a),this.$("#@button_wrapper").toggle(!a),a&&this.child("selector").$("#@input").focus()},updateTarget:function(a,b,c){this.serverCall("get_target_src").kwargs({target_object_id:a,target_is_user:b==="user",is_dark:this.is_dark}).success(this.fnbind(function(a){this.$("#@example_iframe").attr("src",a),this.toggleSelector(!1),c&&this.$("#@fill").effect("highlight",{},2e3)})).send()},blurSelector:function(){this.toggleSelector(!1)},setTo:function(a,b){var c="widgets_example_follow_button";this.is_dark||(c+="_dark"),this.updateTarget(a,b),this.lookup(c).updateTarget(a,b,!0);var d="widgets_example_follow_button_code_wrapper";this.lookup(d).updateCode(a,b),this.lookup(d+"_dark").updateCode(a,b)},onLoad:function(){this.installMouseHandlers()}}),exports.WidgetsExampleFollowButtonCodeWrapper=Component.extend({updateCode:function(a,b){this.serverCall("get_widget_code").kwargs({target_object_id:a,target_is_user:b==="user",is_dark:this.is_dark}).success(this.fnbind(function(a){this.$("#@code").text(a).effect("highlight",{},2e3)})).send()},onLoad:function(){var a=this.$("#@code");a.focus(function(){setTimeout(function(){a.select()},0),a.mouseup(function(b){a.unbind("mouseup"),b.stopPropagation()})})}}),exports.BookmarkletLinkAddButton=Component.extend({onLoad:function(){this.installMouseHandlers()},clickHandlers:{show_popup:function(){this.$("#@modal").show().css({opacity:.8}),$("html").animate({scrollTop:0},200),$("body").animate({scrollTop:0},200,this.fnbind(function(){this.dialog({verticalOffset:-10,dialogClass:"bookmarklet_instruction_dialog"}).cancel(null,"Close",!0).close(this.fnbind(function(){this.$("#@modal").hide()})).load("instructions")}))}}}),exports.IframeBuster=Component.extend({onLoad:function(){top.location=this.to_url}});\'),require.installLazy("app/view/question/answer_tag",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.AnswerTagLink=Component.extend({onLoad:function(){this.enabled?this.$("#@link").click(this.fnbind(function(a){return this.$("#@menu").menu(this.$("#@link")),!1})):this.$("#@link").click(this.fnbind(function(a){return this.lookup("tag_section").setTag(),!1}))}}),exports.AnswerTagMenuListItem=Component.extend({onLoad:function(){this.$("#@select_tag").click(this.fnbind(function(){return this.use_dialog?this._dialog=this.dialog().title("Collapse Answer").load("add_tag_dialog"):this.lookup("tag_section").setTag(this.tag),!1}))}}),exports.AddTag=Component.extend({onLoad:function(){this.$("#@cancel").click(this.fnbind(function(){return this.$("#@view_tag").hide(),!1}))},setTag:function(a){this.$("#@view_tag").show(),this.$("#@include_details").hide();if(a){this.tag=a;var b=this.tag_info[a];this.$("#@tag_summary_text").text(b.summary),this.lookup("editor").setHtml(b.description_html,b.description_data),this.lookup("editor").focus()}}}),exports.AddTagDialog=Component.extend({onLoad:function(){var a=this;this.$("#@cancel").click(this.fnbind(function(){return W2.Dialog.dialogFor(a).close_(),!1})),this.$("#@add_tag").click(this.fnbind(function(){var b=this.lookup("editor"),c=this.$("#@locked").is(":checked");return this.serverCall("add_tag").kwargs({comment:b.serialize(),lock:c}).liveMutate().success(this.fnbind(function(){W2.Dialog.dialogFor(a).close_()})).send(),!1}))}}),exports.AddTagButton=Component.extend({onLoad:function(){this.lock=!1,this.$("#@add_tag").click(this.fnbind(function(){return this.addTag(),!1}))},addTag:function(){var a=this.lookup("editor"),b=this.lookup("add_tag_section").tag;a.isEmpty()?this.lookup("add_tag_section").$("#@include_details").show():this.serverCall("add_tag").kwargs({comment:a.serialize(),tag:b,lock:this.lock}).liveMutate().success(this.fnbind(function(){this.parent()&&(this.parent().$("#@view_tag").hide(),this.parent().$("#@include_details").hide())})).send()}}),exports.AdminAddTagButton=exports.AddTagButton.extend({onLoad:function(){this.lock=!1,this.$("#@add_tag_link").click(this.fnbind(function(a){return this.$("#@add_tag_menu").menu(this.$("#@add_tag_link")),!1}))}}),exports.AdminAddTagMenu=Component.extend({onLoad:function(){this.$("#@collapse").click(this.fnbind(function(){return this.parent().addTag(),!1})),this.$("#@collapse_and_lock").click(this.fnbind(function(){return this.parent().lock=!0,this.parent().addTag(),!1}))}}),exports.AnswerTag=Component.extend({onLoad:function(){this.$("#@show_comment").click(this.fnbind(function(){return this.$("#@comment").show(),this.$("#@show_comment").hide(),!1})),this.$("#@remove").tooltip({contents:"Remove"}),this.$("#@remove").click(this.fnbind(function(){return this._dialog=this.dialog().title("Remove Flag").cancel().ok(this.fnbind(function(){var a=arguments[0].dialogComponent,b=a.lookup("editor").serialize();this.serverCall("remove_tag").kwargs({comment:b}).liveMutate().send()}),"Remove").load("remove_tag_dialog"),!1}))}}),exports.AnswerTagsMenuAdminOptions=Component.extend({onLoad:function(){this.$("#@collapse").click(this.fnbind(function(){return this.serverCall("collapse").kwargs({lock:!1}).liveMutate().send(),!1})),this.$("#@collapse_and_lock").click(this.fnbind(function(){return this.serverCall("collapse").kwargs({lock:!0}).liveMutate().send(),!1}))}});\'),require.installLazy("app/view/promote",\'var Component=require("w2.quora").Component;exports.PromoteContent=Component.extend({onLoad:function(){this.$("#@promote").click(this.fnbind(function(){var a=parseInt(this.$("#@price").text());return a&&this.serverCall("promote").liveMutate().kwargs({budget:a}).send(),!1}));var a="You have "+this.balance+" credits.";this.$("#@promote").tooltip({contents:a}),require("jquery.ui-1.8.17"),this.exponent=3.5;var b=Math.pow(this.initial,1/this.exponent),c=Math.pow(this.min,1/this.exponent),d=Math.pow(this.max,1/this.exponent),e=d<2e3?.1:.5;this.$("#@reach_slider").slider({range:"min",value:b,min:c,max:d,step:e,slide:this.fnbind(function(a,b){var c=Math.pow(b.value,this.exponent),d=Math.round(c/10)*10;this.updateReach(d)})}),this.$("%@slider_hash").click(this.fnbind(function(a){var b=parseInt($(a.target).attr("reach"));this.$("#@reach_slider").slider("value",b),this.updateReach(b)}))},updateReach:function(a){var b=a*this.multiplier;this.$("#@reach, #@remaining_reach").text(a),this.$("#@price").text(b)},toggleSection:function(){this.$("#@promote_section").toggleClass("hidden")}}),exports.CurrentPromotionStatus=Component.extend({onLoad:function(){this.$("#@end").tooltip({contents:this.tooltip}),this.$("#@end").click(this.fnbind(function(){return this.serverCall("end_promote").liveMutate().send(),!1})),this.$("#@promote_more").click(this.fnbind(function(){return this.lookup("promote_content").$("#@add_promotion_section").show(),this.$("#@promote_more_section").hide(),!1}))}}),exports.PromotedIcon=Component.extend({onLoad:function(){this.$("#@icon").tooltip({contents:this.promoted_sentence})}}),exports.PromoteContentLink=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){return this.lookup("promote").toggleSection(),this.$("#@link").hide(),!1}))}}),exports.CreditPageLink=Component.extend({onLoad:function(){this.$("#@link").tooltip({contents:"You have "+this.balance+" credits."})}});\'),require.installLazy("app/view/thread",\'var Component=require("w2.quora").Component,InlineEditor=require("view/inline_editor").InlineEditor;exports.ThreadComposeMessageBox=Component.extend({onLoad:function(){this.$("#@submit").click(this.fnbind(function(){return this.lookup("editor").request(),!1}))}}),exports.ThreadMessage=Component.extend({onLoad:function(){$(document).ready(this.fnbind(function(){setTimeout(this.fnbind(function(){this.$("#@message")[0].scrollIntoView()}),360)}))}}),exports.ThreadMessageInlineEditor=InlineEditor.extend({trigger_request:function(){this.typing_area&&this.lookup("editor").stopTyping(),this.lookup("editor").request()},server_call_method:"UNDEFINED_SERVER_CALL_METHOD",_get_kwargs:function(){throw $.serverLog("Tried to call ThreadMessageInlineEditor#_get_kwargs()","ERROR"),"UNDEFINED_KWARGS"}}),exports.CompactThread=Component.extend({onLoad:function(){this.scrollUp()},scrollUp:function(){this.$("#@messages").scrollTop(99999);var a=setTimeout(this.fnbind(function(){this.$("#@messages").scrollTop(99999)}),50)}}),exports.CompactThreadMessage=Component.extend({onLoad:function(){this.parent().parent().scrollUp()}});\'),require.installLazy("app/view/review_names",\'var Component=require("w2.quora").Component;exports.ApproveNameLink=Component.extend({onLoad:function(){this.$("#@approve_name").click(this.fnbind(function(a){return this.serverCall("approve_name").liveMutate().send(),!1}))}}),exports.ApproveNameMessageButton=exports.ApproveNameLink.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@approve_name").click(this.fnbind(function(){return this._dialog=this.dialog().load("approve_name_dialog_contents"),!1}))}}),exports.MuteNameLink=Component.extend({onLoad:function(){this.$("#@mute_name").click(this.fnbind(function(a){return this.serverCall("mute_name").liveMutate().send(),!1}))}}),exports.FakeNameLink=Component.extend({onLoad:function(){this.$("#@fake_name").click(this.fnbind(function(a){return this.serverCall("fake_name").liveMutate().send(),!1}))}}),exports.OrganizationLink=Component.extend({onLoad:function(){this.$("#@organization_name").click(this.fnbind(function(a){return this.serverCall("organization_name").liveMutate().send(),!1}))}});\'),require.installLazy("app/view/topic/topic_ontology",\'var Component=require("w2.quora").Component;exports.AddTopicParents=Component.extend({onLoad:function(){this.$("#@existing_link").click(this.fnbind(function(){return this.$("#@existing_link").addClass("hidden"),this.$("#@existing").removeClass("hidden"),this.lookup("parent_selector").focus(),!1}))}}),exports.AddTopicChildren=Component.extend({onLoad:function(){this.$("#@existing_link").click(this.fnbind(function(){return this.$("#@existing_link").addClass("hidden"),this.$("#@existing").removeClass("hidden"),this.lookup("child_selector").focus(),!1}))}}),exports.OrganizeChildItem=Component.extend({toggleInstruction:function(){this.$("#@instruction").toggleClass("hidden")}}),exports.EditTopicShortName=Component.extend({onLoad:function(){this.$("#@edit_link").click(this.fnbind(function(){return this.parent().toggleInstruction(),this.$("#@edit").addClass("hidden"),this.$("#@editor").removeClass("hidden"),this.$("#@input").focus(),!1})),this.$("#@cancel").click(this.fnbind(function(){return this.parent().toggleInstruction(),this.$("#@edit").removeClass("hidden"),this.$("#@editor").addClass("hidden"),!1})),this.$("#@update").click(this.fnbind(function(){return this.parent().toggleInstruction(),this.serverCall("edit_short_name").kwargs({short_name:this.$("#@input").val()}).liveMutate().send(),!1}))}}),exports.AddTopicSectionItem=Component.extend({onLoad:function(){this.$("#@add").click(this.fnbind(function(){return this.$("#@instruction").addClass("hidden"),this.$("#@create").removeClass("hidden"),this.lookup("selector").focus(),!1}))}});\'),require.installLazy("app/view/draft",\'var Component=require("w2.quora").Component;exports.ClearDraft=Component.extend({onLoad:function(){this.$("#@clear_draft").click(this.fnbind(function(){return $(".content").dialog({title:"Clear Draft",contents:"Are you sure you want to delete this draft? You will lose your work.",buttons:{"Clear Draft":this.fnbind(function(){this.serverCall("clear_draft").liveMutate().send()}),Cancel:null}}),!1}))}});\'),require.installLazy("app/view/board/follow",\'var Component=require("w2.quora").Component;exports.BoardMemberSelector=Component.extend({onLoad:function(a){this.focusOnload&&a&&this.focus()},focus:function(){this.lookup("selector").focus(!0)},clear:function(){this.lookup("selector").reset()},setTo:function(a){a&&a!==""&&this.serverCall("add").kwargs({bid:this.bid,target_uid:a}).success(this.fnbind(function(){this.focus()})).liveMutate().send()}});\'),require.installLazy("app/view/question/answer_flag",\'var Component=require("w2.quora").Component;exports.RemoveFlagAsNotForReproduction=Component.extend({onLoad:function(){this.$("#@reproduction").click(this.fnbind(function(a){return this.serverCall("available_for_reproduction").liveMutate().send(),!1}))}});\'),require.installLazy("view/mobile",\'var Component=require("w2.quora").Component;exports.Mobile=Component.extend({onLoad:function(){this.$("#download_app").click(this.fnbind(function(){var a=this.$("#phone_num").val(),b=/^[0-9\\\\-+]+$/;b.test(a)&&this.serverCall("text_download_link").args({num:a}).success(this.fnbind(function(a){a||(this._dialog=this.dialog().ok("Ok").title("Unable to text download link").html("We were unable to text a download link to your phone. Please ensure that you entered the correct number and try again."))})).send()}))}});\'),require.installLazy("view/notif",\'var Component=require("w2.quora").Component;exports.NotifQuestionLink=Component.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(){this.serverCall("link_clicked_callback").send()}))}});\'),require.install("init",function(require,a,b){(function(){var a="1.02"})(),require("frame_busting").check();var c=require("event").add,d=require("log").log;window.console=window.console||d.console,$.loaded||($.loaded=function(a){a()}),$.loaded(function(){function a(){var a=require("visibility").getFrameElement();if(a&&a.getAttribute("autoresize")==="true"){var b=$(document),c=b.width(),d=b.height();$(a).width(c).height(d)}}c(window,"resize",a),$(document).ready(a)})}),require.install("oauth",function(require,a,b){a.generateOAuthConnectFunction=function(b,c,d,e){return d=d||400,e=e||800,function(a,f){var g=null;$(document).one(b+"."+Math.random(),function(b,c){var d=c.accessToken,e=c.userData;g&&(clearInterval(g),g=null),a(d,e)});var h=screen.width/2-e/2,i=screen.height/2-d/2,j="width="+e+", height="+d+"location=no,toolbar=no,status=no,top="+i+",left="+h,k=window.open(c,"_BLANK",j);f&&(g=setInterval(function(){g&&k.closed&&(clearInterval(g),f())},200))}}}),require.install("twitter",function(require,a,b){function j(a){h?a():$(i).bind("initialized",a)}var c=require("webnode2"),d=require("w2.quora").Component,e=require("window_manager"),f=require("oauth").generateOAuthConnectFunction,g=require("cookies"),h=!1,i={};a.asyncInit=function(){require("win.load").add(function(){if(window.twttr)return;var a,b=document.createElement("script");window.twttr=a={_e:[],ready:function(b){a._e.push(b)}},b.async=!0,b.src="//platform.twitter.com/widgets.js",document.getElementById("tw-root").appendChild(b),twttr.ready(function(a){h=!0,$(i).trigger("initialized")})})};var k=f("twitter_oauth_approved","/twitter/oauth_window",400,800);a.connectToTwitter=k;var l=a.TwitterConnectButton=d.extend({oauthWindowOpen:!1,loginInterval:null,connect:function(){var a=this;if(a.oauthWindowOpen)return;a.oauthWindowOpen=!0,typeof localStorage!="undefined"&&(this.loginInterval=setInterval(function(){var b=localStorage.getItem("twloginresult");b!==null&&(b=JSON.parse(b),clearInterval(a.loginInterval),localStorage.removeItem("twloginresult"),a.oauthWindowOpen=!1,a.onLogin(b.accessToken,b.userData),a.trigger("tw_login",b.accessToken,b.userData))},300)),k(function(b,c){a.oauthWindowOpen=!1,clearInterval(a.loginInterval),a.onLogin(b,c),a.trigger("tw_login",b,c)},function(){a.oauthWindowOpen=!1,clearInterval(a.loginInterval),a.onLoginFailed(),a.trigger("tw_login_failed")})},onLogin:function(a,b){},onLoginFailed:function(){}});a.SignupTwitterConnectButton=l.extend({events:{"click #@twitter_connect_button":"onClick"},onClick:function(){return g.checkAgeGate(),this.connect(),this.serverCall("record_signup_step").kwargs({signup_action:"signup_connect_to_twitter"}).send(),!1},onLogin:function(a,b){this.serverCall("on_twitter_connected").kwargs({tw_uid:b.twitter_uid,access_token:a.key,screen_name:b.twitter_screen_name,"protected":b["protected"]}).send()},onLoginFailed:function(){this.serverCall("record_signup_step").kwargs({signup_action:"signup_twitter_connect_failed"}).send()}});var m=a.TwitterFollowButton=l.extend({events:{"click #@twitter_connect_button":"onClick"},onClick:function(){return this.needs_oauth&&(this.connect(),this.serverCall("record_signup_step").kwargs({signup_action:"signup_connect_to_twitter"}).send()),!1}});a.ShareSectionTweetButton=d.extend({onLoad:function(){var a=this;j(function(){twttr.events.bind("tweet",function(b){a.serverCall("record_tweet").send()})})}}),a.TwitterConnectCallbackPage=d.extend({onLoad:function(){g.cookie("twitter_oauth_access_key",this.access_token.key,{path:"/twitter/"}),window.opener&&window.opener.document?(window.opener.$(window.opener.document).trigger("twitter_oauth_approved",{accessToken:this.access_token,userData:this.user_data}),window.close()):(typeof localStorage!="undefined"&&localStorage.setItem("twloginresult",JSON.stringify({accessToken:this.access_token,userData:this.user_data})),window.close())}})}),require.install("google_",function(require,a,b){var c=require("webnode2"),d=require("w2.quora").Component,e=require("oauth").generateOAuthConnectFunction,f=!1,g={};a.connectToGoogleWithParams=function(a,b){var c=550,d=700;return b&&(c=800,d=400),e("google_oauth_approved",a,c,d)},a.GoogleConnectCallbackPage=d.extend({onLoad:function(){window.opener&&window.opener.document?(this.access_token&&this.user_data&&window.opener.$(window.opener.document).trigger("google_oauth_approved",{accessToken:this.access_token,userData:this.user_data}),window.close()):(typeof localStorage!="undefined"&&localStorage.setItem("googloginresult",JSON.stringify({accessToken:this.access_token,userData:this.user_data})),window.close())}})}),require.install("login",function(require,a,b){function j(){window.opener&&window.opener.showFollowingButton&&window.opener.showFollowingButton()}function k(){setTimeout(function(){window.close()},1e3)}require("jquery");var c=require("w2.quora").Component,d=require("window_manager"),e=require("siteuri").URI,f=require("webnode2"),g;$.loaded||($.loaded=function(a){a()}),$.loaded(function(){$(document).bind("w2rpcexception-login_required.default",function(a,b){b.rpc.__liveMutation&&require("w2.livenode").mutationDoneAfterVersion(b.rpc.__liveMutationInfo.transactionId,0),g.login(function(){var a=b.rpc.__success;b.rpc.__success=function(){typeof a=="function"&&a.apply(this,arguments),d.reload()},b.rpc.send()},function(){$(document).trigger("login_cancelled")})}),$(document).bind("quora_logout",function(a){d.reload()})}),a.LiveLogin=c.extend({init:function(){this._super.apply(this,arguments),this._dialog=null,g=this},login:function(a,b){var c=this;c._dialog=c._dialog||c.dialog().cancel(b).open(function(){c._loginListener=c.$(document).bind("quora_login",function(b){c._dialog.ok_(),typeof a=="function"&&a()})}).close(function(){c._dialog=null}).load("login_signup_combo_dialog",{kwargs:{default_tab:"signup"}})},_logout:function(){this.serverCall("_logout").send()}}),a.LiveLoginDialog=c.extend({onLoad:function(){var a=this;a.$("#@view").click(function(){return a.$("#view_live_login_dialog_login").addClass("hidden"),a.$("#live_login_dialog_login").removeClass("hidden"),!1}),a.$("#@show_login_link").click(function(){return a.$("#@inline_login").removeClass("hidden"),a.$("#@show_login_link").hide(),!1}),a.$("%@tabs").click(function(b){return a.select($(this).attr("show")),!1}),this.select(this.default_tab)},select:function(a){this.$("%@contents").hide(),this.$("#@"+a).show(),this.$("%@tabs").removeClass("selected"),this.$("#@"+a+"_select").addClass("selected")}}),a.LoginButton=c.extend({onLoad:function(){this.$("#@login_link").click(function(a){var b=e("/?next="+encodeURIComponent(d.getURL()));return d.navigateTo(b.unicode()),!1})}}),a.LoginProfile=c.extend({onLoad:function(){var a=this;a.$("#@link").click(function(b){return a.passwordless?a.passwordlessLoginAs():a.select(),!1}),a.$("#@container").hover(function(b){a.$("#@x_person").css("visibility",""),a.lookup("login_box").selected&&a.lookup("login_box").$(".@select_user").fadeTo("fast",1)},function(b){a.$("#@x_person").css("visibility","hidden"),a.lookup("login_box").selected&&a.lookup("login_box").$(".@select_user").fadeTo("fast",.3)}),a.$("#@x_person").click(function(b){f.rpc("/login/x_person_POST").kwargs({uid:a.uid}).liveMutate().send()}),a.passwordless&&a.$("#@passwordless").hover(function(b){a.$("#@x").css("visibility","")},function(b){a.$("#@x").css("visibility","hidden")}).click(function(b){return f.rpc("/login/x_passwordless_POST").kwargs({uid:a.uid}).liveMutate().send(),!1})},select:function(){this.lookup("login_box").select({uid:this.uid})},passwordlessLoginAs:function(){var a=this;f.rpc("/login/login_ajax_POST").kwargs({uid:a.uid}).success(function(b){var c=a.lookup("login_box").next||"/";d.navigateTo(c)}).error(function(){a1ert("There was a problem logging you in. :(")}).send()}}),a.LoginBox=c.extend({init:function(a){this._super.apply(this,arguments),this.selected=null,this.submitting=!1},onLoad:function(){var a=this;a.$("#@email").val()&&a.select({email:a.$("#@email").val()}),a.$("#@email").bind("focus",function(b){return a.deselect(),!0}).bind("blur",function(b){return a.select({email:a.$("#@email").val()}),!0}),a.$("#@email_form").submit(function(b){return a.$("#@email").blur(),!1})},select:function(a){var b=this,c={};b.selected=a;if(typeof a.uid=="undefined"){c={email:a.email};if(!a.email)return!1}else c={uid:a.uid};return b.$("#@password_placeholder").setContentFromAJAXComponent("/login/password_input_POST",c,b.cid,null,function(){b.$("#@login_uid").val(c.uid),b.$("#@login_email").val(c.email),b.$("#@next").val(b.next)},null,function(a,d){switch(d[0][0]){case"no_uid":b.$("#@password_placeholder").setContent(\'<span style="color: red; font-weight: bold;">No user registered with that e-mail address.</span>\');break;case"unconfirmed_email":b.$("#@password_placeholder").setContent(\'<span style="color: red; font-weight: bold;">You need to confirm that e-mail address before you can use it to login.  If you need, we can <a href="#" id="resend_confirmation">send another confirmation e-mail</a> to you.</span>\'),b.$("#resend_confirmation").click(function(a){return b.$("#@password_placeholder").setContent("Sending..."),f.rpc("/signup/resend_confirmation_email_POST").kwargs({email:c.email}).error(function(a){b.$("#@password_placeholder").setContent("There was a problem resending the confirmation e-mail.")}).success(function(a){b.$("#@password_placeholder").setContent("Sent.")}).send(),!1});break;default:console.error("UNKNOWN ERROR: "+d[0])}}).show(),b.$(".@select_user").fadeTo("slow",.3),b.$("#@email_form_buttons").hide(),b},deselect:function(){return this.selected=null,this.$("#@password_placeholder").hide(),this.$("#@email_form_buttons").show(),this.$(".@select_user").fadeTo("slow",1),this}});var h=a.InlineLogin=c.extend({onLoad:function(){var a=this;if($.browser.msie){var b=function(b){var c=b.keyCode||b.which;c==13&&a.$("#@submit_button").click()},c=a.fnbind(b);a.$("#@password").keydown(c),a.$("#@email").keydown(c)}a.$("#@resend_confirmation").click(function(b){return a.serverCall("resend_confirmation_link").kwargs({email:a._email()}).success(function(){a.hideAllErrors()}).send(),!1}),a.$("#@reset_password_link").click(this.fnbind(a.resetPasswordHandler)),a.$("#@email").blur(function(){setTimeout(function(){a.updatePreview()},10)}),a.$("#@submit_button").click(function(){return a.checkPassword(),!1}),a.$("#@submit_button").bind("touchend",function(){return a.checkPassword(),!1}),a.$("#@login_link").click(function(){return a.$("#@associated").addClass("hidden"),a.$("#@alt_login_row").addClass("hidden"),a.$("#@login_form").removeClass("hidden"),a.$("#@email").focus(),!1}),$(document).ready(function(){a.updatePreview()})},resetPasswordHandler:function(){var a=this;return a.serverCall("reset_password").kwargs({email:a._email()}).success(function(){a.hideAllErrors()}).send(),!1},updatePreview:function(){this._updatePreviewMemCache=this._updatePreviewMemCache||{};var a=this,b=a._email(),c=a._updatePreviewMemCache,d=function(d){c[b]=d;if(a.customSuccessUpdatePreviewCallback)a.customSuccessUpdatePreviewCallback(d),a.removeButtonDisabled();else{a.$(".usercard_big").fadeTo(1,1),a.$("#@preview").hide();var e=!1,f=d.name.split(" ")[0];a.$("%passwordless_users").find(".name_span:visible").each(function(a){$(this).text()!=f?$(this).parents(".usercard_big").fadeTo(1,.3):e=!0}),e||(a.$("#@associated").addClass("hidden"),a.$("#@alt_login_row").addClass("hidden"),a.$("#@login_form").removeClass("hidden"),a.$("#@password").focus(),a.$("#@name").text(d.name),a.$("#@pic").attr("src",d.photo_url),a.$("#@preview").show(),a.removeButtonDisabled()),a.hideAllErrors()}};if(c[b]){d(c[b]);return}a.serverCall("preview_info").kwargs({email:b}).success(d).except("email_not_found",function(b){return a.hideAllErrors(),a.showErrorOnComponent("#@email_not_found_error","#@email"),a.$("#@preview").hide(),a.addButtonDisabled(),!1}).except("no_email",function(b){a.hideAllErrors(),a.$("#@preview").hide(),a.addButtonDisabled()}).except("email_unconfirmed",function(b){a.$("#@preview").hide(),a.hideAllErrors(),a.showErrorOnComponent("#@email_not_confirmed_error","#@email"),a.addButtonDisabled()}).except("refused",function(b){a.hideAllErrors(),a.$("#@preview").hide()}).send()},removeButtonDisabled:function(){this.$("#@submit_button").removeClass("submit_button_disabled")},addButtonDisabled:function(){this.$("#@submit_button").addClass("submit_button_disabled")},loginKwargs:function(){var a=this.$("#@email").val(),b=this.$("#@password").val(),c=+this.$("#@allow_passwordless").is(":checked");return{email:a,password:b,passwordless:c}},loginSuccessCallback:function(a){if(this.customSuccessLoginCallback)this.customSuccessLoginCallback(a);else{var b=a;this.hideAllErrors(),(require("settings").uid==b||require("settings").pageMode=="post_reload")&&$(document).trigger("quora_login")}},checkPassword:function(){this.hideAllErrors();var a=this;a.serverCall("do_login").kwargs(a.loginKwargs()).success(a.fnbind(a.loginSuccessCallback)).except("email_not_found",function(){a.hideAllErrors(),a.showErrorOnComponent("#@email_not_found_error","#@email")}).except("incorrect_password",function(){a.hideAllErrors(),a.showErrorOnComponent("#@incorrect_password_error","#@password")}).except("email_unconfirmed",function(){a.hideAllErrors(),a.showErrorOnComponent("#@email_not_confirmed_error","#@email")}).except("banned_user",function(){a.hideAllErrors(),a.serverCall("login_user_is_banned").kwargs(a.loginKwargs()).send()}).liveMutate().send()},_email:function(){return this.$("#@email").val()},hideAllErrors:function(){this.$("#@email_not_found_error").hide(),this.$("#@email_not_confirmed_error").hide(),this.$("#@incorrect_password_error").hide(),this.$("#@email_menu","#@password_menu").hide(),this.$("#@email, #@password").removeClass("input_validation_error")},showErrorOnComponent:function(a,b){this.$(a).show(),this.$(b+"_menu").show(),this.$(b).addClass("input_validation_error")}});a.FacebookConnectInlineLogin=h.extend({loginKwargs:function(){var a=this._super.apply(this,arguments),b=require("facebook");return a.fb_uid=b.getFbUid(),a.fb_access_token=b.getAccessToken(),a.fb_expires=b.getExpiresIn(),a},loginSuccessCallback:function(a){var b=a[0],c=a[1];this.hideAllErrors();if(require("settings").uid==b||require("settings").pageMode=="post_reload")c?$(document).trigger("quora_login",{__pmsg__:c}):$(document).trigger("quora_login")}});var i=a.InlineLoginProfile=c.extend({loginKwargs:function(){return{}},loginSuccessCallback:function(a){require("settings").pageMode=="post_reload"&&$(document).trigger("quora_login")},onLoad:function(){var a=this;a.$("#@container").click(function(){if(require("settings").uid==a.uid)return $(document).trigger("quora_login"),!1;if(a.passwordless)a.serverCall("do_login").kwargs(a.loginKwargs()).success(a.fnbind(a.loginSuccessCallback)).liveMutate().send();else{var b=a.lookup("inline_login");b.$("#@email").val(a.email),b.$("#@allow_passwordless").removeAttr("checked"),b.updatePreview(),b.$("#@password").focus()}return!1}),a.$("#@x_person").click(function(){return a.serverCall("x_person").liveMutate().send(),!1})}});a.FacebookConnectInlineLoginProfile=i.extend({loginKwargs:function(){var a=require("facebook");return{fb_uid:a.getFbUid(),fb_access_token:a.getAccessToken(),fb_expires:a.getExpiresIn()}},loginSuccessCallback:function(a){var b=a[0],c=a[1];require("settings").pageMode=="post_reload"&&(c?$(document).trigger("quora_login",{__pmsg__:c}):$(document).trigger("quora_login"))}}),a.LoginSignal=c.extend({onLoad:function(a){if(!a){var b=this.uid,c=require("settings");c.uid==b&&$.serverLog("Strange... got a login signal for uid="+b+" but that uid was already logged in"),c.uid=b,$(document).trigger(b?"quora_login":"quora_logout")}}}),a.WidgetsLoginAndFollowInlineLogin=h.extend({clickHandlers:{email_not_found_signup_link:function(){window.open(this.parent().$("#@signup_link").attr("href")),k()}},onLoad:function(){this._super.apply(this,arguments),this.customSuccessLoginCallback=function(a){this.hideAllErrors(),a&&j(),k()},this.customSuccessUpdatePreviewCallback=function(a){this.hideAllErrors()},this.installMouseHandlers(),this.$("#@email").focus()}}),a.WidgetLoginAndFollowInlineLoginProfile=i.extend({clickHandlers:{container:function(){if(this.passwordless)this.serverCall("do_login").success(this.fnbind(function(a){a&&j(),k()})).liveMutate().send();else{var a=this.lookup("inline_login");a.$("#@login_link").click(),a.$("#@email").val(this.email),a.$("#@allow_passwordless").removeAttr("checked"),a.updatePreview(),a.$("#@password").focus()}}},onLoad:function(){this._super.apply(this,arguments),this.installMouseHandlers()}}),a.LoggedOutHomeHeaderInlineLogin=h.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@associated").find(".inline_login_profile_box"\n).is(":visible")&&this.showTOS(),this.$("#@email").focus(),this.$("#@forgot_password_link").click(this.fnbind(this.resetPasswordHandler)),this.$("#@password").focus(this.fnbind(function(){this.$("#@remember_me_option").removeClass("hidden")})),this.$("#@password").keyup(this.fnbind(function(){this.showTOS()}))},hideAllErrors:function(){this._super.apply(this,arguments),this.$("%@login_options").show()},showTOS:function(){this.$("#@login_tos").removeClass("hidden"),this.$("#@logged_out_header_login").removeClass("top_10")},showErrorOnComponent:function(a,b){this._super.apply(this,arguments),this.$("%@login_options").hide()}}),a.LoginPageLoginListener=c.extend({init:function(){this._super.apply(this,arguments),this._enabled=!0},onLoad:function(){var a=this;a.$(document).bind("quora_login.LoginPageLoginListener",function(b,c){if(a._enabled){var e=a.next,f=[],g;for(g in c)f.push(g+"="+encodeURIComponent(c[g]));f.length>0&&(e+=e.indexOf("?")==-1?"?":"&",e+=f.join("&")),d.navigateTo(e)}})}})}),require.install("qtext",function(require,a,b){a.tooltip=function(a,b){return a=$(a),a.attr("data-tooltip")?!1:(a.attr("data-tooltip","attached"),a.tooltip({contents:b,parent_class:"external_link_tooltip",prepend:!0}),setTimeout(function(){a.trigger("mouseenter")},10),!1)}}),require.install("email",function(require,a,b){a.isValidEmail=function(){var a="[^\\\\x0d\\\\x22\\\\x5c\\\\x80-\\\\xff]",b="[^\\\\x0d\\\\x5b-\\\\x5d\\\\x80-\\\\xff]",c="[^\\\\x00-\\\\x20\\\\x22\\\\x28\\\\x29\\\\x2c\\\\x2e\\\\x3a-\\\\x3c\\\\x3e\\\\x40\\\\x5b-\\\\x5d\\\\x7f-\\\\xff]+",d="\\\\x5c[\\\\x00-\\\\x7f]",e="\\\\x5b("+b+"|"+d+")*\\\\x5d",f="\\\\x22("+a+"|"+d+")*\\\\x22",g=c,h="("+g+"|"+e+")",i="("+c+"|"+f+")",j=h+"(\\\\x2e"+h+")*",k=i+"(\\\\x2e"+i+")*",l=k+"\\\\x40"+j,m="^"+l+"$",n=new RegExp(m);return function(a){return n.test(a)}}()}),require.install("mobile",function(require,a,b){var c=require("w2.quora").Component,d=window.Quora,e=require("lang/fun").bind,f=require("webnode2"),g=require("settings"),h=require("w2.livenode"),i=require("facebook"),j=a.isAndroid=function(){return navigator.userAgent.match(/Android/i)},k=a.isIOS=function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},l=!1;$.loaded(function(){(j()||k())&&require("fastclick")(document.body)}),a.MobileHeader=c.extend({onLoad:function(){var a=this;a.viewer=g.uid,a.logo=a.$("#@logo_text"),a.nav_menu=a.$("#@notif_nav"),a.profile_menu=a.$("#@profile_nav"),a.profile=a.$("#@profile_wrapper"),a.viewer&&a.registerClickHandlers(),i.onInit(function(){FB.getLoginStatus(function(b){b.status==="connected"&&a.tryLoginFacebook(b.authResponse.accessToken)})})},registerClickHandlers:function(){var a=this;a.logo.click(this.fnbind(function(b){b.preventDefault(),a.clickQuoraLogo()})),a.profile.click(this.fnbind(function(b){b.preventDefault(),a.clickProfilePhoto()})),$(document).click(function(b){var c=$(b.target).is(a.logo)||$(b.target).is(a.profile)||$(b.target).parents(a.profile).is(a.profile);c||a.hideMenus()})},hideMenus:function(){this.nav_menu.addClass("hidden"),this.profile.removeClass("selected"),this.profile_menu.addClass("hidden")},clickQuoraLogo:function(){this.nav_menu.removeClass("hidden"),this.profile.removeClass("selected"),this.profile_menu.addClass("hidden"),this.newNotifs&&this.serverCall("clear_new").liveMutate().send()},clickProfilePhoto:function(){this.profile.addClass("selected"),this.profile_menu.removeClass("hidden"),this.nav_menu.addClass("hidden")},tryLoginFacebook:function(a){var b=this;if(l===!0)return;l=!0,b.serverCall("try_login_facebook").kwargs({fb_access_token:a,code:b.code}).success(function(a){a&&b.completeLogin(),l=!1}).error(function(){l=!1}).send()},completeLogin:function(){require("settings").pageMode=="post_reload"&&$(document).trigger("quora_login")}}),a.MobileHeaderSignUpLogin=c.extend({onLoad:function(){var a=this;this.signupButton=this.$("#@signup_button"),this.loginButton=this.$("#@login_button"),this.signupDropdown=this.$("#@signup_dropdown"),this.loginDropdown=this.$("#@login_dropdown"),this.signupButton.click(this.fnbind(function(){this.signupDropdown.hasClass("hidden")?(this.signupDropdown.removeClass("hidden"),this.logSignupOpen()):(this.signupDropdown.addClass("hidden"),this.logSignupClose()),this.closeLoginDropdown()})),this.loginButton.click(this.fnbind(function(){this.loginDropdown.hasClass("hidden")?(this.loginDropdown.removeClass("hidden"),this.logLoginOpen()):(this.loginDropdown.addClass("hidden"),this.logLoginClose()),this.closeSignupDropdown()})),$(document).click(function(b){var c=$(b.target),d=c.is(a.signupButton)||c.is(a.loginButton)||c.parents(a.signupDropdown).is(a.signupDropdown)||c.parents(a.loginDropdown).is(a.loginDropdown);d||a.hideMenus()})},hideMenus:function(){this.closeLoginDropdown(),this.closeSignupDropdown()},closeLoginDropdown:function(){this.loginDropdown.hasClass("hidden")||(this.loginDropdown.addClass("hidden"),this.logLoginClose())},closeSignupDropdown:function(){this.signupDropdown.hasClass("hidden")||(this.signupDropdown.addClass("hidden"),this.logSignupClose())},logSignupOpen:function(){this.logStep("header_signup_open")},logSignupClose:function(){this.logStep("header_signup_close")},logLoginOpen:function(){this.logStep("header_login_open")},logLoginClose:function(){this.logStep("header_login_close")},logStep:function(a){this.serverCall("log_browser_step").kwargs({step:a}).send()}}),a.MobileProductFeedsHeader=c.extend({onLoad:function(){this.$("#@current_feed").click(this.fnbind(function(){this.$("#@current_feed").toggleClass("selected"),this.$("#@feeds_nav").toggleClass("hidden")}))}}),a.MobileTutorialBanner=c.extend({onLoad:function(){this.org=this.$("#@mobile_tutorial_more_buttons").html(),this.$("#@mobile_tutorial_more_buttons").click(this.fnbind(function(){var a=this.$("#@mobile_tutorial_details");return a.hasClass("hidden")?a.removeClass("hidden"):a.addClass("hidden"),!1}))}})}),require.install("view/voter_list",function(require,a,b){var c=require("w2.quora").Component;a.VoterListNonToggled=c.extend({onLoad:function(){this.$("#@more_link").click(this.fnbind(function(a){return this._dialog=this.dialog({showXButton:!0,width:495}).title("Voters").close(this.fnbind(function(){this._dialog=null})).load("voter_dialog_contents",{kwargs:{object_id:this.object_id}}),!1}))}})}),require.install("view/paged_list",function(require,a,b){var c=require("log").log,d=require("w2.quora").Component,e=require("webnode2"),f=require("w2.errors"),g=require("event"),h=g.add,i=g.remove,j=require("window_manager"),k=".pagedlist_item:not(.pagedlist_hidden):not(.pagedlist_invisible)",l=require("settings"),m=require("spin").Spinner;a.PagedList=d.extend({init:function(a){this._super.apply(this,arguments),this.model_count=a.initial_count,this.first_hidden_index=0,this.visible_count=0,this.invisible_count=0,this.total_count=0,this.initializeCounts(),this.max_should_show=this.buffer_count,this.hidden_count=0,this.currently_fetching=!1,this.waiting_for_updates=!1,this.show_hidden_when_done_updating=!1,this.showHiddenCallback=null,this.lastGetMoreSucceeded=!0,this.retarget_links&&this.retarget()},onLoad:function(){var a=this,b=$("#"+e.getLiveDomId(this.cid)),c=this.capture_global_keyevents?document.body:b;this.onKeyCombination(b,"j",a.focusNextItem.bind(a,!1),c),this.onKeyCombination(b,"k",a.focusNextItem.bind(a,!0),c)},getFocusedItem:function(){var a=e.getLiveDomId(this.cid),b=$("#"+a+" .pagedlist_item:focus").first();return b.length?b:null},maybeScrollToItem:function(a,b,c){var d=a.height(),e=a.position().top,f=e+d,g=$(document).scrollTop()+j.headerOffset,h=$(window).height()-j.headerOffset,i=g+h;if(!b.length){if(c&&e>=g){j.scrollAndFocus(0);return}if(!c&&f<=i){j.scrollAndFocus($(document).height());return}b=a}if(f<g||e>i){j.scrollAndFocus(e);return}var k=c&&e>=g-5||!c&&f<=i+5;k&&(d=b.height(),e=b.position().top,f=e+d);var l=g;if(c)k&&d>h?l=f-h:e<g&&(l=e);else{var m=$(window).height()*.25;e>g+m?l=e-m+5:k||(l=g+h)}l=g+Math.max(Math.min(l-g,h),-h),j.scrollAndFocus(l,k&&b)},focusNextItem:function(a){$("html,body").stop(!0,!0);var b=this.getFocusedItem();if(b){var c=a?$.fn.prev:$.fn.next,d=b;do d=c.call(d,k);while(d.length&&d.height()==0);this.maybeScrollToItem(b,d,a)}else{var f=e.getLiveDomId(this.cid),g=$(document).scrollTop()+j.headerOffset,h=$("#"+f+" "+k);h.each(function(a,b){if($(b).offset().top>g)return $(b).focus(),!1})}},onMoreButtonClick:function(a){a==null&&(a=!1),a||f.beginCanBeRelatedToUserActionBlock(100),c&&c.enabled&&c("paged_list.PagedList.onMoreButtonClick",this.cid,"\'More...\' button clicked",a?"(auto)":"");var b=this.showHiddenAndMaybeGetMore();return b||(this.show_hidden_when_done_updating=!0),this.currently_fetching&&this.showLoading(),!1},loadMoreButton:function(){this.child("more_button").$("#@more").click(this.fnbind(function(){return this.onMoreButtonClick()})),!this.crawler&&this.has_more&&$.whenIdle(500,2e3,this.fnbind(function(){setTimeout(this.fnbind(function(){this.maybeGetMore()}),50)}))},initializeCounts:function(a){var b=e.getLiveDomId(this.cid);if(!b)return;var c=document.getElementById(b);if(!c)return;var d=c.childNodes;for(var f=0;f<d.length;f++){var g=$(d[f]),h=g.attr("id");h&&g.hasClass("pagedlist_item")&&(this.first_hidden_index+=1,this.total_count+=1,g.hasClass("pagedlist_invisible")?this.invisible_count+=1:this.visible_count+=1)}},setShowHiddenCallback:function(a){this.showHiddenCallback=a},showHiddenAndMaybeGetMore:function(){return this.showHidden(this.buffer_count),this.showHiddenCallback&&this.showHiddenCallback(),this.maybeGetMore()},showHidden:function(a){var b=e._domids[this.cid];if(!b){e.reportPageNeedsReload("domid_missing "+this.cid);return}var c=0,d=0,f=document.getElementById(b),g=f.childNodes,h=!1;for(var i=0;i<g.length;i++){var j=$(g[i]);if(j.hasClass("pagedlist_item")&&j.hasClass("pagedlist_hidden")){j.hasClass("pagedlist_invisible")||(c+=1),h||(h=!0),j.removeClass("pagedlist_hidden"),g[i].style.display="",d+=1;if(c>=a)break}}this.visible_count+=c,this.hidden_count-=c,this.first_hidden_index+=d,this.visible_count>this.max_should_show&&(this.max_should_show=this.visible_count)},hideLoading:function(){c&&c.enabled&&c("paged_list.PagedList.hideLoading","Hide loading...");var a=this.child("more_button");a.$("#@loading").hide(),this.lastGetMoreSucceeded?a.updateAutoClickCapable():a.auto_click_capable=!1,a.maybeEnableOrDisableAutoClick(),this.showMoreButton()},showLoading:function(){c&&c.enabled&&c("paged_list.PagedList.showLoading","Show loading...");if(l.new_grid){this.spinner||(this.spinnerWrapper=$("<div class=\'__contentfor_paged_list_loading_spinner\'/>"),this.spinner=(new m).spin()),this.spinnerWrapper.append(this.spinner.el);var a=this.child("more_button").$("#@loading");a.append(this.spinnerWrapper),a.show()}else this.child("more_button").$("#@loading").show()},hideMoreButton:function(){var a=this.child("more_button");a.isVirtual||a.maybeHideButton()},showMoreButton:function(){var a=this.child("more_button");a.isVirtual||a.maybeShowButton()},maybeGetMore:function(){return this.currently_fetching||this.waiting_for_updates?!1:(this.visible_count+this.hidden_count>=this.model_count&&this.hidden_count<=this.buffer_count/4?this.getMore():this.hidden_count==0&&this.hideMoreButton(),!0)},getMore:function(){return this.currently_fetching=!0,this.waiting_for_updates=!0,this.serverCall("increase_count").kwargs({cid:this.cid,num:this.buffer_count,current:this.model_count}).success(this.fnbind(function(a){return this.lastGetMoreSucceeded=!0,this.currently_fetching=!1,!this.currently_fetching&&!this.waiting_for_updates&&(this.hideLoading(),this.show_hidden_when_done_updating&&(this.show_hidden_when_done_updating=!1,this.showHiddenAndMaybeGetMore())),!1})).error(this.fnbind(function(a){return this.lastGetMoreSucceeded=!1,this.currently_fetching=!1,setTimeout(this.fnbind(function(){this.waiting_for_updates=!1,this.hideLoading()}),2e3),!1})).send(),!1},getDebugStr:function(a,b){var c="hidden_count: "+this.hidden_count;return c+=" visible_count: "+this.visible_count,c+=" model_count: "+this.model_count,c+=" buffer_count: "+this.buffer_count,c+=" first hidden index: "+this.first_hidden_index,c+=" op position: "+a.position,c+=" invisible_count: "+this.invisible_count,c+=" total_count: "+this.total_count,c+=" hidden per JS?: "+b,c},checkState:function(a){var b=e._domids[this.cid],c=document.getElementById(b),d=c.childNodes,f=0,g=0,h=0,i=0;for(var j=0;j<d.length;j++){var k=$(d[j]);k.hasClass("pagedlist_item")&&(f+=1,k.hasClass("pagedlist_hidden")?h+=1:k.hasClass("pagedlist_invisible")?i+=1:g+=1)}var l="total_count: "+this.total_count;l+=", dom_total_count: "+f,l+=" || visible_count: "+this.visible_count,l+=", dom_visible_count: "+g,l+=" || hidden_count: "+this.hidden_count,l+=", dom_hidden_count: "+h,l+=" || invisible_count: "+this.invisible_count,l+=", dom_invisible_count: "+i,l+=" || model_count: "+this.model_count,l+=" || first hidden index: "+this.first_hidden_index,(this.total_count!=f||this.visible_count!=g||this.hidden_count!=h||this.invisible_count!=i)&&$.serverLog("qfeed_check_state_fail: "+a+" "+l,"DEBUG")},onInsertNode:function(a,b){var c=this.$("#"+b);if(!c.hasClass("pagedlist_item"))return;this.retarget_links&&c.find(\'a[href!="#"]\').attr("target","_blank");var d=c.hasClass("pagedlist_invisible");this.total_count+=1;if(a.position>0&&a.position>=this.first_hidden_index)c.addClass("pagedlist_hidden"),a.transition.type="none",d||(this.hidden_count+=1,this.fixed_size_paged_list&&this.first_hidden_index<this.max_should_show?this.showHidden(1):this.showMoreButton());else{c.removeClass("pagedlist_hidden"),c[0].style.display="initial";var f=!0;if(!d){this.visible_count+=1;if(this.fixed_size_paged_list&&this.visible_count>=this.first_hidden_index&&this.first_hidden_index>=this.max_should_show){f=!0;var g=e._domids[this.cid],h=document.getElementById(g),i=h.childNodes,j=0;for(var k=0;k<i.length;k++){var l=$(i[k]);if(l.hasClass("pagedlist_item")&&!l.hasClass("pagedlist_hidden")&&!l.hasClass("pagedlist_invisible")){j+=1;if(j>this.first_hidden_index){l.addClass("pagedlist_hidden"),i[k].style.display="none",this.hidden_count+=1,this.visible_count-=1,this.showMoreButton();break}}}}}else this.invisible_count+=1;if(!this.fixed_size_paged_list||!f)this.first_hidden_index+=1}},onDeleteNode:function(a,b){var c=this.$("#"+b);if(!c.hasClass("pagedlist_item"))return;var d=c.hasClass("pagedlist_invisible"),e=c.hasClass("pagedlist_hidden");this.total_count-=1,a.position>=this.first_hidden_index?d||(this.hidden_count-=1,(this.hidden_count<0||!e)&&$.serverLog("qfeed_hidden_count_broken delete hidden: "+this.getDebugStr(a,e),"DEBUG")):(this.first_hidden_index-=1,d?this.invisible_count-=1:(this.visible_count-=1,this.fixed_size_paged_list&&this.showHidden(1)),e&&$.serverLog("qfeed_hidden_count_broken delete shown: "+this.getDebugStr(a,e),"DEBUG"))},onUpdate:function(a){var b=this.model_count;this.model_count=a.count;var c=this.child("more_button");c.isVirtual||(c.maybeEnableOrDisableAutoClick(),this.hidden_count==0?this.hideMoreButton():this.showMoreButton()),this.waiting_for_updates=!1,this.visible_count<this.buffer_count&&this.hidden_count>0&&(this.show_hidden_when_done_updating=!0);var d=!0;!this.currently_fetching&&!this.waiting_for_updates&&(this.hideLoading(),this.show_hidden_when_done_updating&&(this.show_hidden_when_done_updating=!1,this.showHiddenAndMaybeGetMore(),d=!1)),d&&this.maybeGetMore()},orderedVisibleChildren:function(){var a=e.getLiveDomId(this.cid),b=document.getElementById(a),c=b.childNodes,d=[],f;for(f=0;f<c.length;f++){var g=$(c[f]),h=g.attr("id");h&&g.hasClass("pagedlist_item")&&!g.hasClass("pagedlist_invisible")&&d.push(h)}return d},allOrderedChildren:function(){var a=e.getLiveDomId(this.cid),b=document.getElementById(a),c=b.childNodes,d=!1,f=[],g;for(g=0;g<c.length;g++){var h=$(c[g]),i=h.attr("id");i&&h.hasClass("pagedlist_item")&&(d||!h.hasClass("pagedlist_invisible"))&&(d=!0,f.push(i))}return f},retarget:function(){this.$(".pagedlist_item").find(\'a[href!="#"]\').attr("target","_blank")}}),a.PagedListMoreButton=d.extend({init:function(a){this._super.apply(this,arguments),this.last_check_time=0,this.rate_limiter_ms=245,this.auto_click_enabled=!1,this.updateAutoClickCapable()},updateAutoClickCapable:function(){this.auto_click_capable=this.auto_click_period!=null&&this.auto_click_period>0},checkButtonPosition:function(a){if(!this.auto_click_capable)return;if(!this.parent())return;var b=+(new Date);if(!a&&b<this.last_check_time+this.rate_limiter_ms)return;var c=this.parent().model_count;this.parent().waiting_for_updates&&(c+=this.parent().buffer_count);var d=this.shouldEnableAutoClickFromModelCount(c);this.last_check_time=b;var e=this.$("#@more");if(e.length==0)return;var f=this.$("#@sentinel"),g=Math.ceil($(window).height()),h=!1;f.is(":in-viewport")?h=!0:$.belowthefold(f,{threshold:g})||(h=!0);if(!h)return;if(this.parent().currently_fetching||this.parent().waiting_for_updates){this.parent().showLoading(),d&&(this.parent().show_hidden_when_done_updating=!0);return}if(!d)return;this.parent().onMoreButtonClick()},onLoad:function(){this.parent().loadMoreButton(),this.parent().setShowHiddenCallback(this.fnbind(function(){if(!this.auto_click_capable)return;!this.auto_click_enabled&&this.shouldEnableAutoClickFromModelCount(this.parent().model_count+this.parent().buffer_count)&&this.$("#@more").is(":visible")&&this.maybeHideButton()}));if(this.auto_click_capable){var a=this.fnbind(function(){setTimeout(this.fnbind(this.checkButtonPosition,!1),125)});this._mousemove_handler=h(document,"mousemove",a),this._keypress_handler=h(document,"keypress",a),this._scroll_handler=h(document,"scroll",a)}this.maybeEnableOrDisableAutoClick(),this.auto_click_enabled&&$.whenIdle(500,2e3,this.fnbind(function(){setTimeout(this.fnbind(function(){this.checkButtonPosition(!0)}),125)}))},onUnload:function(){this._mousemove_handler!=undefined&&i(document,"mousemove",this._mousemove_handler),this._keypress_handler!=undefined&&i(document,"keypress",this._keypress_handler),this._scroll_handler!=undefined&&i(document,"scroll",this._scroll_handler)},maybeShowButton:function(){this.auto_click_enabled||this.$("#@more").show()},maybeHideButton:function(){this.$("#@more").hide()},shouldEnableAutoClickFromModelCount:function(a){return a%this.auto_click_period!=0},maybeEnableOrDisableAutoClick:function(){if(!this.auto_click_capable){this.auto_click_enabled=!1;return}var a=this.shouldEnableAutoClickFromModelCount(this.parent().model_count);a&&!this.auto_click_enabled?(this.auto_click_enabled=!0,this.parent().hideMoreButton()):!a&&this.auto_click_enabled&&(this.auto_click_enabled=!1)}})}),require.install("app/view/share",function(require,a,b){var c=require("w2.quora").Component,d=require("webnode2"),e,f=a.ShareAction=c.extend({onLoad:function(){},showDialog:function(){return e?!1:(e=!0,this._dialog=this.dialog().title("Share "+this.what).close(function(){e=!1}).load("share_dialog"),!1)},events:{"click #@share":"showDialog"}}),g;a.AutoShowShareAction=f.extend({onLoad:function(){g=this},show:function(a){this.__js_init=a,setTimeout(this.fnbind(this.showDialog),1500)}}),a.showShareAction=function(a){g&&g.show(a)};var h=c.extend({regexUrl:/(https?:\\/\\/[a-zA-Z0-9](?:[\\-a-zA-Z0-9]*\\.)+[a-zA-Z]{2,}(?:\\/[^\\/\\s]+)*\\/?)(?:\\s|$)/gi,tweetLength:function(a){if(!a)return 0;var b=a.length,c=[];return a.replace(this.regexUrl,function(a,b){c.push(b)}),b-=c.join("").length,$.each(c,function(a,c){b+=c.match(/https:/)?21:20}),b},countCharacters:function(){var a=this.fnbind(function(){var a=140-this.tweetLength(this.$("#@tweet").val());this.showCount&&(this.$("#@counter").text(a),a<0?this.$("#@counter").addClass("diffdelete"):this.$("#@counter").removeClass("diffdelete")),this.shareButton&&(this.showCount&&(a<0||a===140)?this.$(this.shareButton).addClass("submit_button_disabled"):this.$(this.shareButton).removeClass("submit_button_disabled"))});return this.$("#@tweet").bind("keyup",a).bind("focus",a),a}});a.TwitterShare=h.extend({onLoad:function(){this.countCharacters(),this.showCount=!0,this.shareButton="#@tweet_button",this.tweeted=!1},events:{"click #@tweet_button":"onClickTweetButton","click #@close":"onClickClose"},onClickTweetButton:function(){var a=this.$("#@tweet").val();return!a||this.tweetLength(a)>140||this.tweeted?!1:(this.tweeted=!0,this.serverCall("tweet").kwargs({tweet:a}).success(this.fnbind(function(){d.Dialog.dialogFor(this).close_()})).send(),this.$("#@tweet_button").addClass("submit_button_disabled"),this.$("#@tweet_form").hide(),this.$("#@tweet_sending").show(),!1)},onClickClose:function(){return d.Dialog.dialogFor(this).close_(),!1}}),a.EmailShare=c.extend({onLoad:function(){this.email=""},setTo:function(a){this.email=a},events:{"click #@send":"onClickSend","click #@close":"onClickClose"},onClickSend:function(){var a=this.email;return a||(a=this.lookup("selector").getValue()),!a||!this.$("#@subject").val()||!this.$("#@body").val()?!1:(this.serverCall("email").kwargs({email:a,subject:this.$("#@subject").val(),body:this.$("#@body").val()}).success(this.fnbind(function(){d.Dialog.dialogFor(this).close_()})).send(),!1)},onClickClose:function(){return d.Dialog.dialogFor(this).close_(),!1}}),a.LinkedinShare=c.extend({onLoad:function(){this.shareButton="#@linkedin_share_button",this.sent=!1,this.child("linkedin_connect_button").bind("linkedin_connected",this.fnbind(function(){this.$("#@linkedin_connect_button_wrapper").hide(),this.$("#@linkedin_form").show(),this.$("#@linkedin_share_button").show()}))},events:{"click #@linkedin_share_button":"onClickLinkedinShareButton","click #@close":"onClickClose"},onClickLinkedinShareButton:function(){if(this.sent)return!1;var a=this.$("#@linkedin_message").val();return this.sent=!0,this.serverCall("linkedin_share").kwargs({message:a}).success(this.fnbind(function(){d.Dialog.dialogFor(this).close_()})).send(),this.$("#@linkedin_share_button").addClass("submit_button_disabled"),this.$("#@linkedin_form").hide(),this.$("#@linkedin_sending").show(),!1},onClickClose:function(){return d.Dialog.dialogFor(this).close_(),!1}}),a.BlogShare=c.extend({onLoad:function(){},events:{"click #@share":"onClickShare","click #@close":"onClickClose"},onClickShare:function(a){var b=this.$("#@post_title").val(),c=this.lookup("editor").serialize();return b&&c&&this.serverCall("share").kwargs({title:b,msg:c}).liveMutate().success(this.fnbind(function(){d.Dialog.dialogFor(this).close_()})).send(),!1},onClickClose:function(){return d.Dialog.dialogFor(this).close_(),!1}}),a.PublishCheckboxes=c.extend({onLoad:function(){this.$("#@twitter_label").tooltip({contents:"Share With Your Twitter Followers"}),this.$("#@facebook_label").tooltip({contents:"Share With Your Facebook Friends"}),require("facebook").asyncUpdatePermissions();var a=this.child("facebook_connect");$(a).bind("fb_login_failed",this.fnbind(function(){this.check("facebook",!1)}))},check:function(a,b){this.$("#@"+a).attr("checked",b)},saveCheckedState:function(a,b){b&&a==="twitter"&&!this.tw_uid?require("app/view/settings").onTwitterConnect():b&&a==="facebook"&&!this.fb_uid&&this.child("facebook_connect").connect()},shouldPublishToFacebook:function(){return this.$("#@facebook").is(":checked")},shouldPublishToTwitter:function(){return this.$("#@twitter").is(":checked")},hide:function(){this.$("#@publish_checkboxes").hide()},show:function(){this.$("#@publish_checkboxes").show()},events:{"click #@twitter_label":"onClickTwitterLabel","click #@facebook_label":"onClickFacebookLabel"},onClickTwitterLabel:function(a){var b=this.$("#@twitter").is(":checked");a.target!==this.$("#@twitter")[0]&&(this.check("twitter",!b),b=!b),this.saveCheckedState("twitter",b)},onClickFacebookLabel:function(a){var b=this.$("#@facebook").is(":checked");a.target!==this.$("#@facebook")[0]&&(this.check("facebook",!b),b=!b),this.saveCheckedState("facebook",b)}})}),require.install("app/view/threaded_comments",function(require,a,b){var c=require("w2.quora").Component,d=require("view/inline_editor").InlineEditor,e=require("window_manager").isInHash,f=require("view/toggle");a.TComments=f.ToggledComponent.extend({onLoad:function(){this._super.apply(this,arguments),this.initState("expanded",this.default_expanded);var a=null;try{a=this.lookup("comment_link")}catch(b){}a&&a.state("loading")&&(a.state("loading",!1),this.state("expanded",!0));if(this.should_auto_expand_for_notif)for(var c=0;c<this.all_comment_ids.length;c++){var d=this.all_comment_ids[c];if(e("comment"+d)){this.toggle(!0,!0);break}}},viewComments:function(){this.state("expanded",!this.state("expanded"))},stateHandlers:{expanded:function(a){var b=this.$("#@comments"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a);var d=this.child("t_comment_list_wrapper");d&&d.state("visible",a)}}}),a.TCommentListWrapper=c.extend({onLoad:function(a){this.initState("visible",this.parent().state("expanded")||this.default_expanded),this.first_level_all_loaded=!1},hasSingleChild:function(){var a=this.child("t_comment_list");return a&&a.hasSingleChild()},focusAddRoot:function(){var a=this.child("t_comment_add_root");a&&a.focusEditor()},loadChildren:function(){this.lazy_load_children=!1,this.serverCall("load_child_list").kwargs({object_id:this.object_id,reply_to_id:this.reply_to_id,level:this.level}).success(this.fnbind(function(a){this.state("visible",!0)})).contentFor(this.$("#@comment_list_placeholder"),{parentCID:this.cid}).send()},loadAllFirstLevel:function(){this.first_level_all_loaded=!0,this.lookup("placeholder_toggled").toggle(!0,!0)},stateHandlers:{highlighted:function(a){var b=this.$("#@comment_list"),c=b.hasClass("selected");if(arguments.length<1)return c;b.toggleClass("selected",a)},visible:function(a){var b=this.$("#@comment_list_wrapper"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a);var d=this.child("t_comment_list");if(d){var e=this.hasSingleChild(),f=!this.is_root;d.eachChildInAnyOrder(function(b){b.state("visible",a),a&&e&&f&&b.hasSingleChild&&b.hasSingleChild()&&b.state("expanded",!0)})}else a&&this.lazy_load_children&&this.loadChildren();a&&this.$("#@comment_list_first_level_placeholder").size()>0&&!this.first_level_all_loaded&&this.loadAllFirstLevel()}}}),a.TCommentList=c.extend({onLoad:function(a){if(this.should_auto_expand_for_notif)for(var b=0;b<this.all_comment_ids.length;b++){var c=this.all_comment_ids[b];if(e("comment"+c)){this.lookup("comments_list").viewComments();break}}},hasSingleChild:function(){return this.children()&&this.children().length===1},eachChildInAnyOrder:function(a){var b=this.children();if(b)for(var c=0;c<b.length;c++)a(b[c])}}),a.TComment=c.extend({parentComment:function(){return this.parent().parent().parent()},clickHandlers:{delete_link:function(){this.deleteComment()},show_downvoted_link:function(){this.state("showDownvotedLinkVisible",!1)}},hasSingleChild:function(){var a=this.child("t_comment_list_wrapper");return a?a.hasSingleChild():!1},onLoad:function(){this.initState("expanded",!1),this.initState("showDownvotedLinkVisible",this.is_downvoted_and_hidden),this.initState("visible",this.is_root||this.default_visible||this.parentComment().state("expanded")),this.installMouseHandlers(),this.expandOnNotif()},addNotifHighlight:function(a){a.addClass("highlighter");var b=!1,c=function(){var b=a.offset().top,c=b+a.height(),d=$(window).scrollTop(),e=d+$(window).height();return c>=d&&b<=e},d=c(),e=function(){b=!0};$(window).scroll(e);var f=setInterval(function(){if(b){var g=c();d&&!g&&(a.removeClass("highlighter"),clearInterval(f),$(window).unbind("scroll",e)),d=g,b=!1}},500)},expandOnNotif:function(){if(!this.initState("first_call",!0)&&e("comment"+this.id)){var a=[],b=this;while(!b.is_root)b=b.parentComment(),a.unshift(b);for(var c=0;c<a.length;c++)a[c].state("expanded",!0);var d=this.lookup("comments_list");d&&d.state("expanded",!0),this.addNotifHighlight(this.$("#@comment_highlight_wrapper"))}},deleteComment:function(){var a="Are you sure you want to delete this comment?";this.dialog().title("Delete Comment").cancel(null,"Close").ok(this.fnbind(function(){this.serverCall("delete_comment").kwargs({cid:this.id,oid:this.object_id}).liveMutate().send()}),"Delete Comment").html(a)},stateHandlers:{expanded:function(a){var b=this.$("#@comment_inner"),c=b.hasClass("expanded");if(arguments.length<1)return c;b.toggleClass("expanded",a);var d=this.child("t_comment_replies_collapsed");d&&d.state("visible",!a);var e=this.child("t_comment_list_wrapper");e&&e.state("visible",a),this.$("#@comment").toggleClass("last_expanded",a&&this.is_last)},visible:function(a){var b=this.$("#@comment"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a)},showDownvotedLinkVisible:function(a){var b=this.$("#@show_downvoted_link_wrapper"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a),this.$("#@full_comment_text, #@footer_wrapper").toggleClass("hidden",a)}}}),a.TCommentReplyBox=c.extend({clickHandlers:{add_comment_link:function(){this._request()},cancel_link:function(){this._cancel()}},onLoad:function(a){this.initState("visible",!1),this.installMouseHandlers()},_cancel:function(a){this.state("visible",!1),this.lookup("t_comment_action_bar").state("visible",!0)},stateHandlers:{visible:function(a){var b=this.$("#@reply_box"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a);if(a){var d=this.lookup("editor");setTimeout(function(){d!=null&&d.focus()},0)}this.$("#@reply_box").toggleClass("parent_expanded",this.parent().state("expanded"))}},_request:function(){var a=this.lookup("editor");if(a.isEmpty())return;var b=a.serialize();this._cancel(),this.serverCall("add_comment").kwargs({oid:this.object_id,comment:b,reply_to_id:this.reply_to_id}).success(this.fnbind(function(b){this.parent().state("expanded",!0),a.clear()})).liveMutate().sendOnlyOnce()}}),a.TCommentAddRoot=c.extend({clickHandlers:{add_root_link:function(){this._request()}},onLoad:function(){this.installMouseHandlers()},focusEditor:function(){var a=this.lookup("editor");a.focus()},_request:function(){var a=this.lookup("editor");if(a.isEmpty())return;this.serverCall("add_comment").kwargs({oid:this.object_id,comment:a.serialize()}).success(this.fnbind(function(b){a.clear()})).liveMutate().sendOnlyOnce()}}),a.TCommentRepliesCollapsed=c.extend({clickHandlers:{show_child_link:function(a){this.parent().state("expanded",!0)}},onLoad:function(a){this.initState("visible",!this.parent().state("expanded")),this.installMouseHandlers()},stateHandlers:{visible:function(a){var b=this.$("#@show_child_link_wrapper"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a)}}}),a.TCommentActionBar=c.extend({vote:function(a,b){this.serverCall("comment_vote").kwargs({oid:this.object_id,cid:this.id,is_upvote:a,cancel:b}).liveMutate().sendOnlyOnce()},clickHandlers:{comment_downvote:function(){this.vote(!1,!1)},comment_upvote:function(){this.vote(!0,!1)},comment_downvote_cancel:function(){this.vote(!1,!0)},comment_upvote_cancel:function(){this.vote(!0,!0)}},startEditing:function(){this.state("visible",!1),this.lookup("t_comment_reply_box").state("visible",!0)},mouseDownHandlers:{show_reply_box_link:function(){this.startEditing()}},onLoad:function(a){this.initState("visible",!0),this.installMouseHandlers(),this.$("#@show_reply_box_link").focus(this.fnbind(this.startEditing))},stateHandlers:{visible:function(a){var b=this.$("#@action_bar"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a)}}}),a.TCommentFullTextInlineEditor=d.extend({onLoad:function(){this._super.apply(this,arguments),this.setToggleCallback(this.fnbind(function(){if(this.parent()){var a=this.lookup("t_comment_"+this.id);a&&a.$("#@comment_inner").toggleClass("comment_editor_focused")}}))}}),a.TCommentStandalone=c.extend({onLoad:function(){this.initState("expanded",!0),this.initState("comment_log_visible",!1),this.installMouseHandlers()},clickHandlers:{change_log_toggle:function(){this.state("comment_log_visible",!this.state("comment_log_visible"))}},stateHandlers:{expanded:function(a){var b=this.$("#@comments"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a);var d=this.child("t_comment_"+this.comment_id);if(!d)return;d.state("expanded",!0)},comment_log_visible:function(a){var b=this.$("#@comment_log"),c=!b.hasClass("hidden");if(arguments.length<1)return c;b.toggleClass("hidden",!a),this.$("#@view_label").toggle(!a)}}}),a.DeleteCommentButton=c.extend({onLoad:function(){this.$("#@delete").click(this.fnbind(function(a){return this.deleteComment(),!1}))},deleteComment:function(){this.serverCall("delete").liveMutate().send()}})}),require.install("inspector",function(require,a,b){a.load=function(a,b,c,d,e){function j(a){return i[a]||(i[a]=u(a)),i[a]}function r(a){return(a.init_time_ms||0)+(a.tree_time_ms||0)+(a.js_init_time_ms||0\n)+(a.prime_time_ms||0)}function t(b){if(s[b])return s[b];var c=a._allChildren[b],d={path:[],cost:0};if(typeof c!="undefined")for(var e=0;e<c.length;e++){if(!q(c[e]))continue;var f=t(c[e]);f.cost>d.cost&&(d=f)}var g=pb(b);return d.path=[b].concat(d.path),g&&(d.cost+=r(g)),s[b]=d,d}function u(a){var b=pb(a),c=0,d=0,e=0,g=0,h=f.components[a];h&&h.l&&(d=h.l),b&&(c=r(b),e=g=b.html_size);var i=c,k=1,l=p(a),n=0,o=d;if(l)for(var q=0;q<l.length;q++){var s=l[q],t=j(s);i+=t.time,k+=t.components,o+=t.onLoadIncl,e+=t.htmlSizeIncl}return{time:m(i),exclusive:m(c),components:k,onLoadIncl:m(o),onLoadExcl:m(d),htmlSizeIncl:e/1024,htmlSizeExcl:g/1024}}var f=require("w2.timing").timing,g=require("siteuri").URI,h="*ROOT*",i={},k={removed:{},parents:{},debugInfo:{}},l=function(b,c){if(!c)return;var d=c;k.removed[d]=!0,k.parents[d]=a._parents[d],k.debugInfo[d]=a._debugInfo[d]},m=function(a){return Math.round(a*1e3)/1e3},n=function(a,b){return b===undefined&&(b=1),typeof a=="number"?a.toFixed(b):a},o=!1,p=function(b){var c=a._allChildren[b];mb===null&&nb(),mb[b]&&(c||(c=[]),c=c.concat(mb[b]));if(o||b===h||!c)return c;var d=[];for(var e=0;e<c.length;e++){var f=c[e];q(f)&&d.push(f)}return d.length>0?d:undefined},q=function(a){var b=f._components[a];if(b){var c=b.addDebugInfo;if(c<f.postOnLoad)return!0}return!1},s={},v={inclusive:"Time taken by component and descendants (component\'s exclusive + total inclusive time of child components)",exclusive:"Time taken by the component itself (tree_excl + init_excl + js_init + prime)",tree:"Total time spent in the tree method",init:"Time spent in the init method of the component",jsInit:"Total time spent in the js_init method (from invocation till exit)",prime:"Total time spent in the prime methods",count:"Number of instances of this component type",average:"Average time taken by each component instance (value in previous column divided by number of instances)",childComponent:"Component id of child component",components:"Total number of components in the subtree rooted at the current component (1 + total number of descendants)","class":"Type of the component",cid:"Component id",onLoadIncl:"Time taken by the onLoad methods on the client side by the current component and descendants",onLoadExcl:"Time taken by the onLoad methods on the client side by the current component",htmlSizeIncl:"Size (in characters) of HTML code of a current component and its descendants",htmlSizeExcl:"Size (in characters) of HTML code of a current component"},w=[["Id","cid","cid"],["Class","type","class"],["Components","components","components"],["Oplog","oplog","oplog","nosort"],["Worker ID","worker_id","worker_id","nosort"],["Inclusive","total","inclusive"],["Exclusive","exclusive","exclusive"],["HTML Size Incl.","htmlSizeIncl","htmlSizeIncl"],["Tree","tree","tree"],["Init","init","init"],["JsInit","jsInit","jsInit"],["Prime","prime","prime"],["OnLoad Incl.","onLoadIncl","onLoadIncl"],["OnLoad Excl.","onLoadExcl","onLoadExcl"]],x={},y=[["Name","name","class"],["Count","num","count"],["Inclusive","total","inclusive"],["Avg","totalAvg","average"],["Exclusive","exclusive","exclusive"],["Avg","exclusiveAvg","average"],["Tree","tree","tree"],["Avg","treeAvg","average"],["Init","init","init"],["Avg","initAvg","average"],["JsInit","jsInit","jsInit"],["Avg","jsInitAvg","average"],["Prime","prime","prime"],["Avg","primeAvg","average"],["OnLoad Incl","onLoadIncl","onLoadIncl"],["Avg","onLoadInclAvg","average"],["OnLoad Excl","onLoadExcl","onLoadExcl"],["Avg","onLoadExclAvg","average"]],z=function(a,b){if(!b.data("original")){b.wrap("<div style=\'position:relative\'></div>");var c=$("tr:first",b);c.before(c.clone(!0));var d=$("tr:first",b);d.css("position","absolute"),d.css("top","0px"),d.css("left",b.css("margin-left")),d.css("visibility","hidden"),b.data("original",c),b.data("cloned",d)}var c=b.data("original"),e=b.data("cloned"),f=b.offset(),g=$(a).scrollTop();g>f.top&&g<f.top+b.height()?(e.css("visibility","visible"),e.css("top",Math.min(g-f.top,b.height()-e.height())+"px"),$("th",e).each(function(a){var b=$("th",c).eq(a),d=$("div",b),e=d.css("width");$(this).css("width",e),$("div",this).css("width",e)}),e.css("width",b.css("width"))):(e.css("visibility","hidden"),e.css("top","0px"))},A="        table {             border-collapse: collapse;         }         tr.even {             background-color: white;         }         tr.odd {             background-color: rgb(234, 236, 239);         }         tr.header {             background-color: rgb(242, 240, 229);         }         th, td {             border: 1px lightgray solid;             padding: 5px;             line-height: 1em;         }         td {         }         td.tree {             font-size: 1.2em;            padding: 1px;             font-family: Courier New;             white-space: nowrap;         }         .oplog {             font-size: 0.8em;            padding-left: 15px;             font-family: Courier New;             color: black;         }         .oplog_link {             font-weight: bold;             color: #0000FF;         }         span.text {             font-size: 10pt;             line-height: 1em;             font-family: Arial;         }         span.expensive {             color: red;         }         td.number {             text-align: right;             font-size: 0.8em;         }         .arrow {             cursor: pointer;         }         span.symbol {             color: darkgray;         }         span.percent {             color: rgb(128, 128, 128);             font-size: 0.9em;             line-height: 1em;         }         td.text {             padding: 1px 5px;         }         td.pre_percent {             border-right: 0px;         }         td.percent {             border-left: 0px;         }     ",B=function(a){return a%2?"odd":"even"},C={total:!0,totalAvg:!0,exclusive:!0,exclusiveAvg:!0},D={htmlSizeIncl:!0},E=function(a,b,c,d){if(!(c in C))return;a.push("<td class=\'number percent\'>");if(d!==undefined){var e=b.total,f=(d/b.total*100).toFixed(1);a.push("<span class=\'percent\'>"+f+"%</span>")}a.push("</td>")},F=function(a,b){var c=function(){var b="Include ";o&&(b="Exclude"),a.text(b+" post-page-load components")},d=function(){return o=!o,c(),b(),!1};a.click(d),c()},G=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=!1;if(!d.window||d.window.closed)d.window=window.open(),m=!0;var n=d.window;n.focus();if(!m&&!i)return!1;$(n.document.body).empty();var o=b.replace(/<b>/g,"").replace(/<\\/b>/g,"");n.document.title=a+" ("+o+")";var p=!1,q=$("<table>"),r=function(){p||($(n).scroll(r),$(n).resize(r),p=!0),z(n,q)};q.data("updateTable",r);var s=$("<tr class=\'header\'>");q.append(s);for(var t=0;t<c.length;t++)(function(){var a=c[t],b=a[0],g=a[1],h="";a.length>2&&(h=v[a[2]]);var i=g===d.sortKey,j=d.sortAsc;i&&(b=(j?"\xe2\x96\xb2":"\xe2\x96\xbc")+b);var k=$("<th>");g in C&&k.attr("colspan",2),s.append(k);var l=$("<a>");a.length>3&&a[3]=="nosort"?l.text(b).attr("title",h):l.text(b).attr("href","#").attr("title",h).click(function(){return e(d,g,i?!j:!1),f(!0),!1}),k.append($("<div>").append(l))})();$("head",n.document).append($("<style type=\'text/css\'>").html(A));var u=$(n.document.body);u.append($("<h4>").html(a)),u.append($("<p>").html(b)),f===g?u.append("Flat view"):u.append($("<a>").attr("href","#").text("Flat view").click(function(){return g(),!1})),u.append(" "),f===h?u.append("Tree view"):u.append($("<a>").attr("href","#").text("Tree view").click(function(){return h(),!1})),u.append(" ("+j+": "),u.append($("<a>").attr("href","#").text("Flat view").click(function(){return k(),!1})),u.append(" "),u.append($("<a>").attr("href","#").text("Tree view").click(function(){return l(),!1})),u.append(")"),u.append(" ");var w=$("<a>").attr("href","#");return u.append(w),F(w,function(){lb(),f(!0)}),u.append($("<br>")),u.append(q),q},H,I=function(){if(H!==undefined)return H;H=0;for(var b in a._debugInfo){var c=pb(b);if(c){var d=c.prime_flush;d!==undefined&&(H+=d)}}return H=m(H),H},J=function(){if(!window.performance||!window.performance.timing)return-1;var a=window.performance.timing;return a.loadEventStart-a.navigationStart},K=function(){var a=I(),b=j(h).time,c=f.page,d=f.request,e=f.webserver,g=f.longestpath,i=require("settings").isParallel,k=J();return i?e+" / <b>page.py</b>: "+c+" / <b>request</b>: "+d+" "+(k>0?" / <b>load</b>: "+k:"")+(typeof g=="undefined"?"":\' / <font color="red"><b>longest path</b>: \'+g+"</font> "):e+" / <b>prime_flush</b>: "+a+" / <b>"+h+"</b>: "+b+" / <b>page.py</b>: "+c+" / <b>request</b>: "+d+(k>0?" / <b>load</b>: "+k:"")},L=function(a){X();var b=x,c=b.data,d="Component Types Listing ("+c.length+" component types) on "+document.location.href,e=K(),f=y;U(d,e,f,b,Z,L,L,ab,a,"Component Instances",N,Q)},M={},N=function(a){O();var b=M,c=b.data,d="Component Instances Listing ("+c.length+" components) on "+document.location.href,e=K(),f=w;U(d,e,f,b,Z,N,N,Q,a,"Component Types",L,ab)},O=function(){if(M.computed)return;var a=[];for(var b in qb()){if(!o&&!q(b))continue;var c=S(b);a.push(c)}var d=j(h);M.data=a,M.total=d.time,M.computed=!0,Z(M,"total",!1)},P={},Q=function(a){R();var b=P.count,c="Component Instances Tree ("+b+" components) on "+document.location.href,d=K(),e=w;bb(c,d,e,P,fb,Q,N,Q,a,"Component Types",L,ab)},R=function(){function a(b,c){var d=S(c);d=d?d:{},b.rows.push(d);var e=p(c);if(!e)return;d.rows=[];for(var f=0;f<e.length;f++){var g=e[f];a(d,g)}}if(P.computed)return;var b=P;b.rows=[],a(b,h);var c=j(h);P.total=c.time,P.count=eb(P),P.computed=!0,fb(P,"total",!1)},S=function(a){var b=pb(a),c=j(a),d=b?b.py_class:undefined;a===h?d=h:ob(a)&&(a+=" (Unloaded)");var e=!1,f=t(h);for(var g=0;g<f.path.length;g++)f.path[g]==a&&(e=!0);var i=undefined;if(b&&b.oplog&&b.oplog.length>0){var k=a+"_oplog";i=" <div id=\'"+k+"\' class=\'oplog_link\'\'>(show)",i+="<div id=\'"+k+"_data\' class=\'oplog\' style=\'display: none; white-space: nowrap;\'>";for(var g=0;g<b.oplog.length;g++)i+=b.oplog[g]+"<br />";i+="</div></div>"}var l={onExpensivePath:e,oplog:i,worker_id:b?b.worker_id?b.worker_id.toString():undefined:undefined,cid:a,type:b?d:undefined,components:c.components,total:c.time,exclusive:a===h?c.time:c.exclusive,htmlSizeIncl:c.htmlSizeIncl,init:b?m(b.init_time_ms||0):undefined,tree:b?m(b.tree_time_ms||0):undefined,jsInit:b?m(b.js_init_time_ms||0):undefined,prime:b?m(b.prime_time_ms||0):undefined,onLoadIncl:c.onLoadIncl,onLoadExcl:c.onLoadExcl};return l},T=function(a){a.click(function(a){var b=$(a.target);b.hasClass("oplog_link")&&b.children().first().toggle()})},U=function(a,b,c,d,e,f,g,h,i,j,k,l){function o(){var a=d.data,b=[];for(var e=0;e<a.length;e++){var f=a[e],g=B(e),h=["<tr class=\'"+g+"\'>"];for(var i=0;i<c.length;i++){var j=c[i][1],k=f[j],l=typeof k=="string";if(l)h.push("<td class=\'text\'>"),h.push("<span class=\'text\'>");else{var o="number";j in C&&(o+=" pre_percent"),h.push("<td class=\'"+o+"\'>")}k=n(k,j in D?3:undefined),h.push(k),l&&h.push("</span>"),h.push("</td>"),E(h,d,j,k)}b.push(h.join(""))}m.append(b.join("")),m.data("updateTable")(),T(m)}var m=G(a,b,c,d,e,f,g,h,i,j,k,l);if(!m&&!i)return;cb(m,o,i)},V=function(a,b,c){var d=pb(b),e=j(b),f=d?d.py_class:undefined;b===h&&(f=h);var g={name:f,num:d?1:undefined,total:e.time,exclusive:b===h?e.time:e.exclusive,tree:d?m(d.tree_time_ms||0):undefined,init:d?m(d.init_time_ms||0):undefined,jsInit:d?m(d.js_init_time_ms||0):undefined,prime:d?m(d.prime_time_ms||0):undefined,onLoadIncl:e.onLoadIncl,onLoadExcl:e.onLoadExcl,cids:[b]},i=a[f];if(i)for(var k in g){if(k==="name"||i[k]===undefined)continue;k==="cids"?i[k]=i[k].concat(g[k]):i[k]=m(i[k]+g[k])}else a[f]=g,c.push(g)},W=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=["total","exclusive","tree","init","jsInit","prime","onLoadIncl","onLoadExcl"];for(var e=0;e<d.length;e++){var f=d[e],g=f+"Avg",h=c[f];if(h!==undefined&&c.num!==undefined){var i=m(h/c.num);c[g]=i}else c[g]=undefined}}},X=function(){if(x.computed)return;var a={},b=[];for(var c in qb()){if(!o&&!q(c))continue;V(a,c,b)}var d=j(h);W(b),x.total=d.time,x.data=b,x.computed=!0,Z(x,"total",!1)},Y=function(a,b,c){var d=typeof a[0][b]=="string";a.sort(function(a,e){var f=a[b],g=e[b];return d?f<g?c?-1:1:f===g?0:c?1:-1:(c?1:-1)*(f-g)})},Z=function(a,b,c){a.sortKey=b,a.sortAsc=c;var d=a.data;Y(d,b,c)},_={},ab=function(a){db();var b=_.count,c="Component Types Tree ("+b+" rows) on "+document.location.href,d=K(),e=y;bb(c,d,e,_,fb,ab,L,ab,a,"Component Instances",N,Q)},bb=function(a,b,c,d,e,f,g,h,i,j,k,l){function u(a,b,c){var d=a,e=o[d],f=e.depth;b(e),d++;while(d<p){e=o[d];if(e.depth<=f)break;c(e),d++}return d}function v(a,b){a.expanded=b,s(a)}function w(a){function c(b){var c=b.tr;a?z(c):y(c),v(b,a)}var b=0;while(b<p)b=u(b,function(b){v(b,a)},c);t()}function x(a,b,c){var d=a,e=o[d],f=e.expanded,g=e.depth;f=!f,e.expanded=f,e.index=d,s(e);var h=b.next();e=o[++d];while(h.length&&e.depth>g){if(f){z(h);if(e.hasChildren&&!e.expanded){var i=e.depth;h=h.next(),e=o[++d];while(h.length&&e.depth>i)h=h.next(),e=o[++d];continue}}else y(h);h=h.next(),e=o[++d]}t()}function y(a){a.css("display","none")}function z(a){a.css("display","")}function F(a,b,e,f){function g(a,c,d){function e(){var a="<span class=\'symbol\'>";for(var c=0;c<b;c++)a+=q[c]?"&nbsp;":"\xe2\x94\x82";return q[b]?a+="\xe2\x94\x94":a+="\xe2\x94\x9c",a}var f=["<td class=\'tree\'>"];f.push(e());if(a){var g="<span class=\'arrow\'>";f.push(g),f.push(r(d.expanded)),f.push("</span>")}else f.push("\xe2\x94\x80");return f.push("</span>"),d.onExpensivePath?f.push("<span class=\'text expensive\'> "):f.push("<span class=\'text\'> "),f.push(c),f.push("</span>"),f.push("</td>"),f.join("")}function h(a){o.push(a);var h=e?"display: none;":"",i="",j="";e||(A++,j=" class=\'"+B(A)+"\'");var k="style=\'"+h+"\'",l=["<tr id=\'"+p+"\' "+k+" "+j+">"],m="rows"in a;a.depth=b,a.expanded=b===0,a.hasChildren=m,l.push(g(m,a[c[0][1]],a));for(var q=1;q<c.length;q++){var r=c[q][1],s=a[r],t=typeof s=="string";if(t)l.push("<td class=\'text\'>"),l.push("<span class=\'text\'>");else{var u="number";r in C&&(u+=" pre_percent"),l.push("<td class=\'"+u+"\'>")}s=n(s,r in D?3:undefined),l.push(s),E(l,d,r,s),t&&l.push("</span>"),l.push("</td>")}l.push("</tr>"),f.push(l.join("")),p++,m&&F(a.rows,b+1,b>0,f)}q.push(!1);for(var i=0;i<a.length;i++){var j=a[i];i===a.length-1&&(q[q.length-1]=!0),h(j)}q.pop()}function H(a){a.click(function(a){var b=$(a.target);if(b.hasClass("arrow")){var c=b.parents("tr"),d=parseInt(c.attr("id"));x(d,c,b)}})}function I(){var a=$("#0",m);for(var b=0;b<p;b++){var c=o[b];c.tr=a,c.arrow=$(".arrow",a),a=a.next()}m.before($("<a>").attr("href","#").text("Expand all").click(function(){return w(!0),!1})),m.before(" "),m.before($("<a>").attr("href","#").text("Collapse all").click(function(){return w(!1),!1}))}function J(){var a=[];F(d.rows,0,!1,a),m.append(a.join("")),I(),m.data("updateTable")(),T(m),H(m)}var m=G(a,b,c,d,e,f,g,h,i,j,k,l);if(!m&&!i)return;var o=[],p=0,q=[],r=function(a){return a?"\xe2\x96\xbf":"\xe2\x96\xb9"},s=function(a){a.hasChildren&&a.arrow.text(r(a.expanded))},t=function(){var a=0;for(var b=0;b<p;b++){var c=o[b],d=c.tr;d.is(":visible")&&(d.attr("class",B(a)),a++)}},A=0;cb(m,J,i)},cb=function(a,b,c){if(c){b();return}a.hide();var d=$("<div>").text("Loading, please wait ...");a.before(d),setTimeout(function(){b(),a.show(),d.remove()},10)},db=function(){function a(b,c){V(b.childrenDict,c,b.rows);var d=p(c);if(!d)return;var e=c===h?c:pb(c).py_class,f=b.childrenDict[e];"childrenDict"in f||(f.childrenDict={},f.rows=[]);for(var g=0;g<d.length;g++){var i=d[g];a(f,i)}}function e(a){W(a);for(var b=0;b<a.length;b++){var c=a[b];"rows"in c&&e(c.rows)}}if(_.computed)return;var b={childrenDict:{},rows:[]},c=_;c.childrenDict={},c.rows=[],a(c,h);var d=j(h);_.total=d.time,e(_.rows),_.count=eb(_),_.computed=!0,fb(_,"total",!1)},eb=function(a){function b(a){var c=a.length;for(var d=0;d<a.length;d++){var e=a[d];"rows"in e&&(c+=b(e.rows))}return c}return b(a.rows)},fb=function(a,b,c){function d(a){Y(a,b,c);for(var e=0;e<a.length;e++){var f=a[e];"rows"in f&&d(f.rows)}}a.sortKey=b,a.sortAsc=c,d(a.rows)},gb=[["Child component","childComponent"],["Class","class"],["Inclusive","inclusive"],["Exclusive","exclusive"],["Components","components"],["HTML Size Incl.","htmlSizeIncl"],["Tree","tree"],["Init","init"],["JsInit","jsInit"],["Prime","prime"],["OnLoad Incl.","onLoadIncl"],["OnLoad Excl.","onLoadExcl"]],hb=function(b){var c=b.live_id;if(c&&a._liveDepInfo)return a._liveDepInfo[c]},ib="border: 1px lightgray solid; padding: 1px;",jb="text-align: right",kb=function(a){var b=p(a),c="";if(b){var d=[];for(var e=0;e<b.length;e++){var f=b[e],g=j(f);d.push({cid:f,info:g})}d.sort(function(a,b){return b.info.time-a.info.time}),c=$("<table style=\'font-size: 0.8em; border-collapse: collapse\'>");var h=$("<tr>");for(var e=0;e<gb.length;e++){var i=gb[e][0],k=v[gb[e][1]];h.append($("<th style=\'"+ib+"\'>").attr("title",k).text(i))}c.append(h);for(var e=0;e<d.length;e++){var f=d[e].cid,g=d[e].info,l=pb(a),m=l.py_class;l.live_class&&(m+=" ("+l.live_class+")");var o=[f,m,g.time,g.exclusive,g.components,g.htmlSizeIncl,l.tree_time_ms||0,l.init_time_ms||0,l.js_init_time_ms||0,l.prime_time_ms||0,g.onLoadIncl,g.onLoadExcl],q=$("<tr>");for(var r=0;r<o.length;r++){var s=o[r],t=ib,u=undefined;typeof s=="number"&&(t+=jb,r==6&&(u=3)),q.append($("<td style=\'"+t+"\'>").text(n(s,u)))}c.append(q)}}return c},lb=function(){i={},M={window:M.window},P={window:P.window},x={window:x.window},_={window:_.window},mb=null},mb=null,nb=function(){mb={};var a=k.parents;for(var b in a){var c=a[b];mb[c]||(mb[c]=[]),mb[c].push(b)}},ob=function(a){return k.removed[a]},pb=function(b){var c=a._debugInfo[b];return c?c:k.debugInfo[b]},qb=function(){var b={};for(var c in a._debugInfo)b[c]=!0;for(var c in k.debugInfo)b[c]=!0;return b},rb=null,sb=!1;c.ComponentInspector=b.extend({init:function(){this._super.apply(this,arguments),this._lastHighlightedCID=null,this._lastNodeOver=null},_ANNOTATION_ATTR:null,_labelId:"__w2inspector_label",_turnOffLinkId:"__w2inspector_label_turn_off_link",_makeStickyLinkId:"__w2inspector_label_sticky_link",_makeCenterLinkId:"__w2inspector_label_center_link",_moreLinkId:"__w2inspector_label_more_link",_showComponentTypesId:"__w2inspector_label_show_component_types",_showComponentsId:"__w2inspector_label_show_components",onLoad:function(){function i(a,b){f.on([a],function(){if(h._active)return b.apply(h,arguments)})}rb=this,$("body",d).append($(\'<div id="\'+this._labelId+\'" class="\'+this._labelId+\'"> </div>\').hide()),this.$("#@page_timing").click(this.fnbind(function(a){return L(),!1})),this._active=!1;var b=this.$("#@toggle").click(this.fnbind(function(a){return this.toggle(),!1})),c=this.$("#@gadget_toggle").click(this.fnbind(function(a){return this.gadgetOn(),!1}));require("keystrokes").on([71,53,71,53],this.fnbind(this.gadgetOn));var e=this.fnbind(function(){this.$("#@show_component_timings").show();var a=[["show_component_types_flat",L],["show_component_types_tree",ab],["show_component_instances_flat",N],["show_component_instances_tree",Q]],b=this.fnbind(function(a){var b=a[0],c=a[1];this.$("#@"+b).click(function(){return c(),!1})});for(var c=0;c<a.length;c++){var d=a[c];b(d)}});this._showMore=!1,this.show_link&&(b.show(),c.show(),e()),this.$("#@on_msg").show();var f=require("keystrokes"),g=require("qed/util"),h=this;f.on([87,50,87,50],function(){h.toggle()}),f.on([67,50,67,50],function(){h.toggleColorMap()}),i(81,this.off),i(27,this.off),i(70,function(){var a=this._lastHighlightedCID;$("["+this._ANNOTATION_ATTR+"="+a+"]").effect("highlight",1e3)}),i(80,function(){var b=this._lastHighlightedCID,c=a._parents[b];this.unhighlightCID(b),this.highlightCID(c,this._lastHighlightEvent)}),i(84,function(){var b=this._lastHighlightedCID;b?(window.this_=a._components[b],window.this_?console.info("`this_` is now set to the JS Component for cid "+b):(window.this_=a._safeGetComponentByCID(b),console.warn("No JS Component exists for cid "+b+" so `this_` is being set to a VirtualComponent"))):console.error("Move the mouse over a Component and hit the \'T\' key to set `this_` to be the JS Component for that Component"),this._lastHighlightedCID&&(window.cid_=this._lastHighlightedCID,console.log("window.cid_ now set to "+window.cid_))}),i(72,function(){a1ert("Component Inspector Help\\n\\nF=flash, T=this_=this, Q|[ESC]=close, H=help, M=more/less\\n\\nType \'w2w2\' anytime to turn the Inspector on or off, or use the link at the bottom of the page.")}),i(77,this.toggleMore),i(83,this.toggleSticky),i(67,function(a){g.hasCtrlOrCmd(a)||this.toggleCenter()}),$(document).bind("webnode_before_remove_component_metadata",l),sb&&this.fillPageTiming()},addLinks:function(a){var b=[[this._turnOffLinkId,"Turn off"],[this._makeStickyLinkId,this.getStickyLinkText()],[this._makeCenterLinkId,"Toggle Center"],[this._moreLinkId,this.getMoreLinkText()],[this._showComponentTypesId,"Component types"],[this._showComponentsId,"Component instances"]];for(var c=0;c<b.length;c++){var d=b[c][0],e=b[c][1],f=$("<a>").attr("href","#").attr("id",d).text(e).css("padding-left","10px");a.append(f)}},topLevelChildren:function(a){var b=$("["+this._ANNOTATION_ATTR+"="+a+"]"),c=this,d=b.get().filter(function(b){return!b.parentNode||b.parentNode.getAttribute(c._ANNOTATION_ATTR)!=a});return d},inclusiveSize:function(a){var b=this.topLevelChildren(a),c=0;return b.forEach(function(a){c+=a.offsetHeight*a.offsetWidth}),c},weightedInclusiveTime:function(a){var b=this.inclusiveSize(a),c=j(a).time;return b==0?-1:c<10?0:c/b},hexColor:function(a){var b=window.innerWidth*window.innerHeight,c=b/48e4,d=a*c,e=.00125,f=Math.ceil(255*Math.max(1-d/(10*e),0));return"rgba(255, "+f+", "+f+", 1.0)"},addColor:function(a){var b=this.weightedInclusiveTime(a);if(b==-1)return;var c=this.hexColor(b),d=this.topLevelChildren(a);d.forEach(function(a){a.originalBackgroundColor==undefined&&(a.originalBackgroundColor=a.style.background),a.style.background=c})},removeColor:function(a){var b=this.topLevelChildren(a);b.forEach(function(a){a.originalBackgroundColor!=undefined&&(a.style.background=a.originalBackgroundColor)})},toggleColorMap:function(){var b=this;b.isColorMapped?$.each(a._debugInfo,function(a,c){b.removeColor(a)}):$.each(a._debugInfo,function(a,c){b.addColor(a)}),b.isColorMapped=!b.isColorMapped},highlightCID:function(b,c){var e=c.target,f=$("["+this._ANNOTATION_ATTR+"="+b+"]");f.addClass("__w2inspector_highlight");var g=f.offset(),h=a._components[b],i=c.pageY-80;i<0&&(i=c.pageY+10);var k=function(a){return a.substr(0,13)=="__w2inspector"?"":(a.substr(0,5+b.length)=="__w2_"+b&&(a="@"+a.substr(6+b.length)),a)},l=e.tagName,o,q;if(o=e.id)l+=" id="+k(o);if(q=e.className)if(q=$.map(q.split(/\\s+/),k).join(" ").replace(/^\\s+|\\s+$/g,""))l+=" class="+q;var r=$("<div></div>");r.addClass(this._lastId);var s=a._debugInfo[b],t=b,u=null;s&&(u=s.inst,s.live_class?t=s.py_class+" ("+s.live_class+")":t=s.py_class,t+=" <span style=\'color: gray;\'>"+b+"</span"),r.append($("<h2>"+t+"</h2>")),u&&r.append($("<pre style=\'font-size: 0.7em;\'></pre>").addClass("__w2inspector_code").text(u)),this.addLinks(r);if(s&&s.src_url){var w=s.src_url;s.src_url=="*INFO*"&&(w="javascript:alert(\'This will let you open components directly in TextMate/Sublime/whatever you use on your laptop. To configure it (once you have set up a remotely mounted filesystem, add a line like\\\\n\\\\nCLIENT_ANS_ROOT = \\"/Volumes/ec2-204-236-190-45.us-west-1.compute.amazonaws.com/ans\\"\\\\n\\\\nto your $ANS_ROOT/web/lib/a/config.py\\\\n\\\\nOr to disable this link with instructions, add the line\\\\n\\\\nCLIENT_ANS_ROOT = False\');");var x=$("<a>").attr("href",w).text("Open in Editor").css("padding-left","10px");r.append(x)}var y=$("<div><hr></hr></div>");if(s){var z=hb(s);if(z){var A=$("<ul></ul>");for(var B=0;B<z.length;B++){var C=z[B],w=document.location.href+"?__break_depkey_token=",D=s.live_id;w+=a._depKeysBreakpointTokens[D+":"+C];var x="<a href=\'"+w+"\' target=\'_blank\'>"+C+"</a>";A.append($("<li></li>").html(x))}y.append($("<h4>Live Deps</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").html(A))}}h&&y.append($("<h4>JS init data</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(JSON.stringify(h.__data))),y.append($("<h4>Named Children</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(JSON.stringify(a._children[b]))),y.append($("<h4>All Children</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(JSON.stringify(p(b)))),y.append($("<h4>Knows About</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(JSON.stringify(a._knowsAbout[b]))),y.append($("<h4>Parent</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(a._parents[b])),this._showMore&&r.append(y);if(s){var E=j(b);this._showMore&&(r.append($("<h4>Total number of descendants</h4>")),r.append($("<div>").addClass("__w2inspector_small_code").text(E.components-1)));var F=function(){var a="http://graphite-single.quora.net/render?width=800&from=-4weeks&until=now&height=500&fgcolor=black&bgcolor=white&lineMode=connected&target=qstats.time.parallel_component_stats_v2.",b=s.py_class.split(".").join("_");return $("<a></a>").attr("href",a+b+".time.day.p*").attr("target","_blank").text("View Trends")};r.append($("<hr></hr>")).append($("<h4>Timing (ms) </h4>").append(F()));var G=function(){function a(a,b,c,d){c||(c="");var e=ib;return typeof b=="number"&&(e+=jb),b=n(b,d),"<"+a+" style=\'"+e+"\' "+c+">"+b+"</"+a+">"}var b=["<table style=\'border-collapse: collapse; font-size: 0.8em\'>"];b.push("<tr>"),b.push(a("th","")),b.push(a("th","Total")),b.push(a("th","Tree")),b.push(a("th","Init")),b.push(a("th","Prime")),b.push(a("th","JsInit")),b.push(a("th","OnLoad")),b.push(a("th","Html Size")),b.push("</tr>"),b.push("<tr>"),b.push(a("th","Inclusive")),b.push(a("td",E.time,"title=\'"+v.inclusive+"\'")),b.push(a("td",s.tree_time_ms||0,"title=\'"+v.tree+"\' rowspan=\'2\'")),b.push(a("td",s.init_time_ms||0,"title=\'"+v.init+"\' rowspan=\'2\'")),b.push(a("td",s.prime_time_ms||0,"title=\'"+v.prime+"\' rowspan=\'2\'")),b.push(a("td",s.js_init_time_ms||0,"title=\'"+v.jsInit+"\' rowspan=\'2\'")),b.push(a("td",E.onLoadIncl,"title=\'"+v.onLoadIncl+"\'")),b.push(a("td",E.htmlSizeIncl,"title=\'"+v.htmlSizeIncl+"\'",3)),b.push("</tr>"),b.push("<tr>"),b.push(a("th","Exclusive")),b.push(a("td",E.exclusive,"title=\'"+v.exclusive+"\'")),b.push(a("td",E.onLoadExcl,"title=\'"+v.onLoadExcl+"\'")),b.push(a("td",E.htmlSizeExcl,"title=\'"+v.htmlSizeExcl+"\'")),b.push("</tr>"),b.push("</table>"),r.append(b.join(""))},H=[["Inclusive",E.time,"inclusive"],["Exclusive",E.exclusive,"exclusive"],["Tree",s.tree_time_ms||0,"tree"],["Init",s.init_time_ms||0,"init"],["OnLoad Incl.",E.onLoadIncl,"onLoadIncl"]],I="<span style=\'padding-right: 5px; padding-left: 15px; font-weight: bold; font-size: 0.8em;\'>";for(var B=0;B<H.length;B++){var t=H[B][0],J=H[B][1],K=v[H[B][2]];r.append($(I+t+"</span>").attr("title",K)).append($("<span></span>").attr("title",K).text(n(J)).addClass("__w2inspector_code"))}this._showMore&&(r.append($("<br>")),r.append($("<span style=\'font-size: 0.8em\'>").text("Mouseover values for explanations")),G());var g=s.prime;if(g&&this._showMore){var L="";for(var M in g){var N=m(g[M]);L+=M+": "+N+"ms; "}L&&r.append($("<h4>Prime functions</h4>")).append($("<div></div>").addClass("__w2inspector_small_code").text(L))}if(this._showMore){var O=kb(b);if(O){r.append($("<h4>").text("Children")),r.append($("<span style=\'font-size: 0.8em\'>").text("Mouseover column headers for explanations")),r.append(O);var P=$("<a>").attr("href","#").attr("id","toggleIncludePostPageLoad");r.append(P)}}}var Q=$("["+this._ANNOTATION_ATTR+"="+b+"]").length,R=e.outerHTML.length;r.append($("<hr></hr>")).append($("<h4>DOM</h4>")).append($("<div></div>").text(l).addClass("__w2inspector_code").append($("<div style=\'float: right;\'>&nbsp;"+Q+" tags</div>"))),$("#"+this._labelId,d).html(r.html()),this.positionLabel(c),this.bindEvents(),this._lastHighlightedCID=b,this._lastHighlightEvent=c},positionLabelAtCursor:function(a){var b=d.defaultView.innerWidth,c=d.defaultView.innerHeight,f=10,g="",h="",i="",j="";if(a){var k=a.pageX,l=a.pageY;if(e){var m=$(e).offset(),n=$(e).contents();k-=n.scrollLeft(),k+=d.defaultView.scrollX,k+=m.left,l-=n.scrollTop(),l+=d.defaultView.scrollY,l+=m.top}this._mouseX=k,this._mouseY=l}b-this._mouseX>this._mouseX?g=this._mouseX+f:h=b-(this._mouseX-f),c-this._mouseY>this._mouseY?i=this._mouseY+f:j=c-(this._mouseY-f),$("#"+this._labelId,d).css("left",g).css("right",h).css("top",i).css("bottom",j).css("position","absolute").show()},positionLabelAtCenter:function(){var a=10;$("#"+this._labelId,d).css("left",a).css("right",a).css("top",a).css("bottom",a).css("position","fixed")},positionLabel:function(a){this._isCenter?this.positionLabelAtCenter():this.positionLabelAtCursor(a)},toggleCenter:function(){this._isCenter=!this._isCenter,this.positionLabel()},bindEvents:function(){$("#"+this._labelId,d).find("*").off(),$("#"+this._turnOffLinkId,d).click(this.fnbind(function(){return this.off(),!1})),$("#"+this._makeStickyLinkId,d).click(this.fnbind(function(){return this.toggleSticky(),!1})),$("#"+this._makeCenterLinkId,d).click(this.fnbind(function(){return this.toggleCenter(),!1})),$("#"+this._moreLinkId,d).click(this.fnbind(function(){return this.toggleMore(),!1})),$("#"+this._showComponentTypesId,d).click(this.fnbind(function(){return L(),!1})),$("#"+this._showComponentsId,d).click(this.fnbind(function(){return N(),!1}));var a=$("#toggleIncludePostPageLoad",d);F(a,this.fnbind(function(){lb(),this.labelVisible()&&this.highlightCID(this._lastHighlightedCID,this._lastHighlightEvent)}))},getMoreLinkText:function(){var a=this._showMore?"less":"more";return"Show "+a},getStickyLinkText:function(){return this._isSticky?"Undo Sticky":"Make Sticky"},unhighlightCID:function(a){$("["+this._ANNOTATION_ATTR+"="+a+"]").removeClass("__w2inspector_highlight")},unhighlightCIDWithTimeout:function(a){clearTimeout(this.unhighlightTimeout),this.unhighlightCallback=this.fnbind(function(){this.unhighlightCID(a),this._lastNodeOver=null}),this.unhighlightTimeout=setTimeout(this.fnbind(function(){this.unhighlightCallback(),this.unhighlightTimeout=undefined,this.unhighlightCallback=undefined,this.hideLabel()}),300)},hideLabel:function(){$("#"+this._labelId,d).hide()},labelVisible:function(){return $("#"+this._labelId+":visible",d).length>0},inLabel:function(a){var b=$("#"+this._labelId,d)[0];if(b)if(a===b||$(a).parents("#"+this._labelId,d).length>0)return!0;return!1},_onMouseover:function(a){if(this.inLabel(a.target)){this.unhighlightTimeout&&clearTimeout(this.unhighlightTimeout);return}var b=a.target.getAttribute(this._ANNOTATION_ATTR);b&&(this.unhighlightCallback&&(clearTimeout(this.unhighlightTimeout),this.unhighlightCallback()),this.highlightCID(b,a)),this._lastNodeOver=a.target},_onMouseout:function(a){if(this.inLabel(a.target)){this.unhighlightCIDWithTimeout(this._lastHighlightedCID);return}var b=a.target.getAttribute(this._ANNOTATION_ATTR);b&&this.unhighlightCIDWithTimeout(b)},on:function(){return this._active?(console.warn("Component Inspector already active.  Not turning on."),!1):(this._msgFlash("Component Inspector On"),this.onMouseout=this._onMouseout,this.onMouseover=this._onMouseover,this._isSticky=!1,this._isCenter=!1,$("body").bind("mouseover.w2inspector",this.fnbind(function(a){this.onMouseover(a)})).bind("mouseout.w2inspector",this.fnbind(function(a){this.onMouseout(a)})),this.$("#@toggle").css("background","yellow"),this.$("#@page_class").show(),this.$("#@kb").show(),this._active=!0)},off:function(){return this._active?(this._msgFlash("Component Inspector Off"),$("body").unbind("mouseover.w2inspector").unbind("mouseout.w2inspector").removeClass("__w2inspector_highlight"),this.unhighlightCID(this._lastHighlightedCID),this.hideLabel(),this.$("#@toggle").css("background","inherit"),this.$("#@page_class").hide(),this.$("#@kb").hide(),this._active=!1):(console.warn("Component Inspector not active.  Not turning off."),!1)},toggle:function(){return this._active?this.off():this.on()},resetMouseHandlers:function(){this.onMouseout=this._onMouseout,this.onMouseover=this._onMouseover},disableMouseHandlers:function(){this.onMouseout=function(){},this.onMouseover=function(){}},toggleSticky:function(){(this._isSticky=!this._isSticky)?(this._msgFlash("Enabled Sticky Mode"),this.disableMouseHandlers()):(this._msgFlash("Disabled Sticky Mode"),this.resetMouseHandlers()),this.labelVisible()&&this.highlightCID(this._lastHighlightedCID,this._lastHighlightEvent)},toggleMore:function(){(this._showMore=!this._showMore)?this._msgFlash("Showing More JS Metadata about Components"):this._msgFlash("Showing Less JS Metadata about Components"),this.labelVisible()&&this.highlightCID(this._lastHighlightedCID,this._lastHighlightEvent)},_msgFlash:function(a){this.$("#@msg").html(a).fadeIn(400,this.fnbind(function(a){setTimeout(this.fnbind(function(a){this.$("#@msg").fadeOut\n(400)}),200)}))},gadgetOn:function(){var a=["livenode_op_start","livenode_finish_operations","webnode_add_component_metadata","webnode_after_remove_component_metadata","rpc_content_for_done"];if(!window.gadgetWindow||window.gadgetWindow.closed){var b=g("/internal/gadget/index");window.gadgetWindow=window.open(b.unicode(),"gadgetWindow")}window.gadgetWindow.focus();var c=function(b,c){var d=c,e=b;$(document).bind(a[d],e.fnbind(function(b,c){window.gadgetWindow.$(window.gadgetWindow.document).trigger(a[d],[c])}))};for(var d=0;d<a.length;d++)c(this,d)},fillPageTiming:function(){this.$("#@page_timing").html(K())}}),c.on=function(){rb.on()},c.off=function(){rb.off()},c.toggle=function(){rb.toggle()},c.isActive=function(){return rb._active},c.fillPageTiming=function(){rb!=null?rb.fillPageTiming():sb=!0},c.highlightCID=function(a){rb.highlightCID(a)},c.unhighlightCID=function(a){rb.unhighlightCID(a)},c.getAnnotationAttr=function(){return rb._ANNOTATION_ATTR},c.toggleColorMap=function(){rb.toggleColorMap()},c.showComponents=N}}),require.installLazy("w2.inspector",\'var W2=require("webnode2"),Component=require("w2.quora").Component;require("inspector").load(W2,Component,exports,document);\'),require.installLazy("perf",\'function getMergedHistory(){var a=rec.dump();if(!window.performance)return a;var b,c=window.performance.timing,d=[];for(b in c)d.push({time:c[b],tags:["window.performance",b]});d.sort(function(a,b){return a.time-b.time});var e=0,f=a.length,g,h=0,i=d.length,j,k=new Array(f+i);while(e<f&&h<i)g=a[e],j=d[h],j.time<g.time?k[e+h++]=j:k[e++ +h]=g;for(;h<i;++h)k[e+h]=d[h];for(;e<f;++e)k[e+h]=a[e];return k}exports.process=function(){var a=getMergedHistory(),b=require("lang/arr").map,c={tags:[]},d={},e=0;return c.history=b(a,function(a,f){var g=a.time-e;return e=a.time,[g,b(a.tags,function(a){var b=d[a];return b||(b=d[a]={pair:[a,[]],count:0},b.pos=c.tags.push(b.pair)-1),b.count+=1,b.pair[1].push(f),b.pos})]}),c};\'),require.installLazy("view/embed_editor",\'var W2=require("webnode2");exports.EmbedInlineEditor=require("view/inline_editor").InlineEditor.extend({onLoad:function(){this._super.apply(this,arguments),this.initial_positioning=!1;var a=this.editor=this.lookup("editor");this.setToggleCallback(this.fnbind(function(){this.initial_positioning||(this.initial_positioning=!0,a.updateEmbedComponentPositions(),a.getEmbedComponents(function(b,c){a.updatePlaceholderImageSize(b)}),a.updateEmbedComponentPositions())}))},submitHandler:function(){this.input_button_obj.click(this.fnbind(function(){return this.editor.notifySubmit(),W2.InputValidator.validate(this,{valid:this.fnbind(this.trigger_request),invalid:function(){}}),!1}))}});\'),require.install("view/trackback",function(require,a,b){var c=require("w2.quora").Component,d=require("window_manager");a.TrackbackLink=c.extend({onLoad:function(){this.$("#@link").click(this.fnbind(function(a){return this.parent().lookup("trackbacks").toggle(),this.lookup("comments_list",!0)&&this.lookup("comments_list").state("expanded",!1),!1}))}}),a.Trackbacks=c.extend({onLoad:function(){this.loaded=!1,d.getHash().substr(0,8)=="#reposts"&&this.object_id==d.getHash().substr(8)&&(this.toggle(),this.$("#@trackbacks").show())},toggle:function(){this.loaded||this.serverCall("trackback_list").contentFor(this.$("#@trackback_list"),{parentCID:this.cid}).success(this.fnbind(function(a){this.loaded=!0})).send(),this.$("#@trackbacks").toggle()},hideTrackbacks:function(){this.$("#@trackbacks").hide()}})}),require.installLazy("app/view/inbox",\'var Component=require("w2.quora").Component,W2=require("webnode2"),windowManager=require("window_manager");exports.InboxMain=require("app/view/home").HomeMain.extend(),exports.InboxMessage=require("app/view/home").HomeMain.extend(),exports.NewThreadMain=Component.extend({onLoad:function(a){this.$("#@submit_button").click(this.fnbind(function(a){this.serverCall("send_message").kwargs({msg:this.lookup("editor").serialize()}).success(this.fnbind(function(){location.reload(!0)})).liveMutate().send()}))}}),exports.InboxThreadInformation=Component.extend({onLoad:function(){this.$("#@report_spam").click(this.fnbind(function(){return this._dialog=this.dialog().title("Report Spam").ok(this.fnbind(function(){this.serverCall("report_spam").success(this.fnbind(function(a){window.location.href=a})).send()}),"Report Spam").cancel("Cancel").html("Reporting this thread to be spam or harassing will result in a permanent loss of all the messages in this thread. Further, this person will be blocked preventing them from sending you messages, following you, commenting on your answers, suggesting edits to your answer and asking you to answer questions. Some of these rules may not apply if you\\\'re posting anonymously."),!1}))}}),exports.InboxThreadPreviewItem=Component.extend({onLoad:function(a){this.linked&&this.$("#@item").click(this.fnbind(function(a){return windowManager.handleClick(unescape(this.url),a),!1})),this.$("#@item a").each(function(){$(this).click(function(){return event.which==2||event.metaKey?window.open($(this).attr("href")):windowManager.navigateTo($(this).attr("href")),!1})})}});\'),require.installLazy("app/view/messages",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.MessagesMain=Component.extend({onLoad:function(){this.resizeMessages(),$(window).resize(this.fnbind(function(){this.resizeMessages()}))},resizeMessages:function(){var a=$(window).height()-$(".SiteHeader").height();this.$(".MessagesMain").height(a-20-1),this.$(".MessagesMain").show()}}),exports.MessagesThreadDetail=exports.MessagesMain.extend({onLoad:function(){this._super.apply(this,arguments);var a=this;a.scrollMessageThread(),a.$(".thread_list").bind("DOMSubtreeModified",function(){setTimeout(function(){a.scrollMessageThread()},1)})},scrollMessageThread:function(){var a=this.$(".thread_list")[0].scrollHeight;this.$(".thread_list").scrollTop(a),this.$(".thread_list").addClass("is_shown")}});\'),require.installLazy("app/view/review_topic_experts",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.UndecidedTopicExpertApplication=Component.extend({onLoad:function(){this.$("#@accept").click(this.fnbind(function(){return this.previouslyRemoved?this.showConfirmDialog():this.triggerAccept(),!1})),this.$("#@reject").click(this.fnbind(function(){return this._dialog=this.dialog().load("reject_application_dialog"),!1}))},triggerAccept:function(){this.serverCall("accept").liveMutate().send()},showConfirmDialog:function(){var a="Please note that the RTB for this user has been previously removed.";this.dialog().title("Confirm Application Approval").cancel(null,"Cancel").ok(this.fnbind(function(){this.triggerAccept()}),"Approve").html(a)}}),exports.RejectTopicExpertApplicationDialog=Component.extend({onLoad:function(){this.$("#@cancel").click(this.fnbind(function(){return W2.Dialog.dialogFor(this).close_(),!1})),this.$("#@submit").click(this.fnbind(function(){var a=this.lookup("editor").serialize();return this.serverCall("reject").kwargs({comment:a}).success(this.fnbind(function(){W2.Dialog.dialogFor(this).close_()})).liveMutate().send(),!1}))}});\'),require.installLazy("app/view/question/wanted_answer",\'var Component=require("w2.quora").Component;require("dialog");var ManageAttributionOnAnswer=exports.ManageAttributionOnAnswer=Component.extend({onLoad:function(){this.$("#@remove").tooltip({contents:"Hide"}),this.$("#@remove").click(this.fnbind(function(){return this.$("#@attribution_row, #@toggle_visibility_row").toggle(),this.hideAttribution(),!1})),this.$("#@show_answer_attribution").click(this.fnbind(function(){return this.$("#@attribution_row, #@toggle_visibility_row").toggle(),this.showAttribution(),!1}))},showAttribution:function(){this.lookup("content_editor")&&(this.lookup("content_editor").answer_attribution_update="attach")},hideAttribution:function(){this.lookup("content_editor")&&(this.lookup("content_editor").answer_attribution_update="remove")}});exports.ManageAttributionOnQuestion=ManageAttributionOnAnswer.extend({showAttribution:function(){this.serverCall("show_answer_attribution").liveMutate().send()},hideAttribution:function(){this.serverCall("hide_answer_attribution").liveMutate().send()}}),exports.AnswerAttributionName=Component.extend({onLoad:function(){this.$("#@hide").click(this.fnbind(function(){this.dialog().title("Confirm Removal").ok(this.fnbind(function(){this.serverCall("hide_answer_attribution").liveMutate().send()}),"Remove").cancel().html("Are you sure you want to remove your name?")}))}}),exports.AskedBy=Component.extend({onLoad:function(){this.$("#@vote_count").click(this.fnbind(function(){return this.$("#@vote_count").hide(),this.$("#@vote_list").show(),!1}))}});var WantedAnswerInviteComponentBase=Component.extend({setEmailTo:function(a){this._dialog=this.dialog().title(null).cancel(null,"Cancel").ok(this.fnbind(function(){var b=arguments[0].dialogComponent,c=b.lookup("msg").serialize(),d=b.lookup("subject").serialize(),e=b.name;this.serverCall("invite_to_answer").kwargs({name:e,email:a,msg:c,subject:d}).liveMutate().success(this.fnbind(function(){this._dialog.close_(),this.lookup("selector").clear()})).send()}),"Invite to Answer").load("invite_dialog",{kwargs:{email:a}})}});exports.WantedAnswerInviteSection=WantedAnswerInviteComponentBase.extend({setTo:function(a){this.setEmailTo(a)},setUserTo:function(a){}}),exports.WantedAnswerInviteEmailButton=WantedAnswerInviteComponentBase.extend({onLoad:function(){this.$("#@invite").click(this.fnbind(function(){return this._dialog=this.dialog().title(null).cancel(null,"Cancel").ok(this.fnbind(function(){var a=arguments[0].dialogComponent,b=a.lookup("msg").serialize(),c=a.lookup("subject").serialize(),d=a.name;this.serverCall("invite_to_answer").kwargs({name:d,email:this.email,msg:b,subject:c}).liveMutate().success(this.fnbind(function(){this._dialog.close_()})).send()}),"Invite to Answer").load("invite_dialog",{kwargs:{email:this.email}}),!1}))}}),exports.WantedAnswerInviteTwitterButton=Component.extend({onLoad:function(){this.$("#@invite").click(this.fnbind(function(){return console.log(this.tw_uid),this._dialog=this.dialog().title(null).cancel(null,"Cancel").ok(this.fnbind(function(){console.log("Invite")}),"Invite").load("invite_twitter_dialog",{kwargs:{tw_uid:this.tw_uid}}),!1}))}}),exports.WantedAnswerResonseRate=Component.extend({onLoad:function(){this.$("#@rate").tooltip({contents:this.name+" has answered "+this.responses+" of "+this.requests+" requests."})}}),exports.SpendCurrencyButton=Component.extend({onLoad:function(){this.$("#@spend").click(this.fnbind(function(){var a=this.getAmount();return require("cookies").setQfeedLog(this,"AskToAnswer"),this.type=="AskToAnswerButton"&&require("cookies").setTlog({type:"AskToAnswer",qid:this.qid}),this.serverCall("spend").kwargs({amount:a}).liveMutate().send(),require("action_log").logPrimaryAction("AskToAnswer",{type:this.impression_type,hash:this.impression_hash}),!1})),this.$("#@undo").click(this.fnbind(function(){return this.serverCall("undo").liveMutate().send(),require("action_log").logPrimaryAction("UndoAskToAnswer",{type:this.impression_type,hash:this.impression_hash}),!1})),this.tooltip_text&&this.$("#@spend").tooltip({contents:this.tooltip_text})},getAmount:function(){return this.default_price}}),exports.CreditsPriceControl=Component.extend({onLoad:function(){this.$("#@price").tooltip({contents:"Use more credits to ask"}),this.$("#@price").click(this.fnbind(function(){return this.$("#@price, #@selector").toggleClass("hidden"),this.$("#@free_text").addClass("hidden"),this.$("#@paid_text").removeClass("hidden"),this.cQuery(":choose_amount").focus(),!1}))}}),exports.InviteToAnswerDialogContents=Component.extend({onLoad:function(){this.lookup("msg").focus()}}),exports.GiveCreditsSection=Component.extend({onLoad:function(){this.$("#@give").click(this.fnbind(function(){return this._dialog=this.dialog().title("Give Credits").load("give_credits_dialog"),!1}))}}),exports.GiveCreditsDialog=ComposeMessageDialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.$("#@send").click(this.fnbind(function(){return this.giveCredits(),!1})),this.$("#@close").click(this.fnbind(function(){return require("webnode2").Dialog.dialogFor(this).close_(),!1}))},giveCredits:function(){var a=null;this.$("#@compose_message_to_uid").length>0&&(a=this.$("#@compose_message_to_uid").val());var b=null;this.cQuery(":credit_amount").$("#@credit_amount").length>0&&(b=this.cQuery(":credit_amount").$("#@credit_amount").val());var c="";this.lookup("editor").isEmpty()||(c=this.lookup("editor").serialize()),a&&b>0&&c&&this.serverCall("send_credits").kwargs({to_uid:a,amount_credits:b,message:c}).liveMutate().success(this.fnbind(function(){require("webnode2").Dialog.dialogFor(this).close_()})).send()},overMax:function(){this.$("#@gift_max_warning").show()},underMax:function(){this.$("#@gift_max_warning").hide()}}),exports.ChooseCreditAmount=Component.extend({onLoad:function(a){this.$("#@credit_amount").bind("blur",this.fnbind(function(a){this.amountChangedCallback(),this.preventBelowMin(),this.shiftDown=!1})),this.shiftDown=!1,this.$("#@credit_amount").bind("keydown",this.fnbind(function(a){a.which==38?(this.changeAmountBy(1),a.preventDefault()):a.which==40?(this.changeAmountBy(-1),a.preventDefault()):a.which==16&&(this.shiftDown=!0,a.preventDefault())})),this.$("#@credit_amount").bind("keyup",this.fnbind(function(a){a.which==16?(this.shiftDown=!1,a.preventDefault()):a.which>=48&&a.which<=57&&this.amountChangedCallback()}))},changeAmountBy:function(a){var b=a;this.shiftDown&&(b*=10),this.$("#@credit_amount").val(parseInt(this.$("#@credit_amount").val())+b),this.amountChangedCallback(),this.preventBelowMin()},amountChangedCallback:function(){var a=parseInt(this.$("#@credit_amount").val());this.checkForNaN();var b=this.lookup("credit_amount_wrapper");b&&(a>this.max?b.overMax():b.underMax()),this.$("#@credit_amount").val(a),this.preventAboveMax(),this.setWidth(a)},preventBelowMin:function(){this.checkForNaN();var a=parseInt(this.$("#@credit_amount").val());a=Math.max(a,this.min),this.$("#@credit_amount").val(a)},preventAboveMax:function(){var a=parseInt(this.$("#@credit_amount").val());a=Math.min(a,this.max),this.$("#@credit_amount").val(a)},checkForNaN:function(){var a=parseInt(this.$("#@credit_amount").val());isNaN(a)&&(a=this.start),this.$("#@credit_amount").val(a)},setWidth:function(a){a<=999?this.$("#@credit_amount").width("2em"):a<=9999?this.$("#@credit_amount").width("2.5em"):a>9999&&this.$("#@credit_amount").width("3em")},focus:function(){this.$("#@credit_amount").focus()},getAmount:function(){return this.$("#@credit_amount").val()}}),exports.WantedAnswerDecline=Component.extend({onLoad:function(){this.$("#@ignore").click(this.fnbind(function(){return this.allow_reason?this.showIgnoreReasonDialog():this.serverCall("decline").liveMutate().send(),!1}))},showIgnoreReasonDialog:function(){this._dialog=this.dialog().title("Decline Request").load("decline_dialog")}}),exports.DeclineRequestDialog=Component.extend({onLoad:function(){this.lookup("editor").focus(),this.$("#@give").click(this.fnbind(function(){var a="";return this.lookup("editor").isEmpty()||(a=this.lookup("editor").serialize()),this.serverCall("decline").kwargs({reason:a}).liveMutate().success(this.fnbind(function(){require("webnode2").Dialog.dialogFor(this).close_()})).send(),!1})),this.$("#@close").click(this.fnbind(function(){return require("webnode2").Dialog.dialogFor(this).close_(),!1}))}}),exports.AdjustRate=Component.extend({onLoad:function(){this.$("#@menu_link").click(this.fnbind(function(){return this.$("#@menu_items").menu(this.$("#@menu_link")),!1}))}}),exports.AdjustRateMenuOption=Component.extend({onLoad:function(){this.$("#@adjust_rate").click(this.fnbind(function(){this.serverCall("adjust_rate").liveMutate().send()}))}}),exports.AskToAnswerFromFeedlink=Component.extend({onLoad:function(){this.$("#@show").click(this.fnbind(function(a){this.parent().lookup("ask_to_answer").toggleSection(),a.preventDefault()}))}}),exports.AskToAnswerFromFeed=Component.extend({onLoad:function(){this.loaded=!1},toggleSection:function(){this.$("#@a2a_container").toggleClass("hidden"),this.loaded||this.serverCall("ask_to_answer_section").contentFor(this.$("#@a2a_list"),{parentCID:this.cid}).success(this.fnbind(function(a){this.loaded=!0})).send()}}),exports.WantedAnswerSuggestions=Component.extend({onLoad:function(){this.$("#@search_link").click(this.fnbind(function(a){return this.showSearch(),!1}))},showSearch:function(){this.$("#@search_link_container, #@people_selector").toggle(),this.lookup("selector").focus(!0)},setTo:function(a){this.serverCall("ask_to_answer").liveMutate().kwargs({to_uid:a}).success(this.fnbind(function(){this.show_outstanding_requests_after_request_made&&this.lookup("header").countClicked()})).send()},a2aHeaderCountClicked:function(){this.$("#@suggestions").hide(),this.$("#@outstanding_requests").show()},a2aHeaderTitleClicked:function(){this.$("#@suggestions").show(),this.$("#@outstanding_requests").hide()}}),exports.AskToAnswerHeader=Component.extend({onLoad:function(){this.$("#@title_link").click(this.fnbind(function(a){return this.titleClicked(),!1})),this.$("#@count_link").click(this.fnbind(function(a){return this.countClicked(),!1}))},countClicked:function(){this.$("#@count, #@count_link, #@title, #@title_link").toggle(),this.parent().a2aHeaderCountClicked()},titleClicked:function(){this.$("#@count, #@count_link, #@title, #@title_link").toggle(),this.parent().a2aHeaderTitleClicked()}}),exports.WantedAnswerSuggestionMultiSelectRow=Component.extend({onLoad:function(){var a=this;this.$("#@row").click(this.fnbind(function(b){if(b.target.nodeName!="INPUT"){var c=this.$("#@checkbox");return c.attr("checked",!c.attr("checked")),a.checkboxToggled(),!1}})),this.$("#@checkbox").change(this.fnbind(function(){a.checkboxToggled()}))},checkboxToggled:function(){this.$("#@checkbox").is(":checked")?(this.lookup("multiselect_section").addRequest(this.uid,this.price),this.$("#@row").addClass("selected")):(this.lookup("multiselect_section").removeRequest(this.uid,this.price),this.$("#@row").removeClass("selected"))}}),exports.WantedAnswerMultiSelectSection=Component.extend({onLoad:function(){this.people=[],this.price=0,this.$("#@button").click(this.fnbind(function(){return this.serverCall("ask_to_answer").liveMutate().success(this.fnbind(function(){this.people=[],this.price=0,this.updateButton()})).kwargs({uids:this.people}).send(),!1})),this.$("#@search_link").click(this.fnbind(function(a){return this.showSearch(),!1}))},setTo:function(a){this.people.push(a),this.serverCall("ask_to_answer").liveMutate().kwargs({uids:this.people}).success(this.fnbind(function(){this.show_outstanding_requests_after_request_made&&this.lookup("header").countClicked()})).send()},addRequest:function(a,b){this.people.push(a),this.price+=b,this.updateButton()},removeRequest:function(a,b){this.people.pop(a),this.price-=b,this.updateButton()},updateButton:function(){var a=this.$("#@button");if(this.people.length==0)a.addClass("disabled"),a.text("Ask to Answer");else{a.removeClass("disabled");var b="Ask "+this.people.length;this.people.length==1?b+=" Person":b+=" People ",this.price>0&&(b+=" for ",b+=this.price,b+=" Credits"),a.text(b)}},showSearch:function(){this.$("#@search_link_container, #@people_selector").toggle(),this.lookup("selector").focus(!0)},a2aHeaderCountClicked:function(){this.$("#@suggestions, #@button_row").hide(),this.$("#@outstanding_requests").show()},a2aHeaderTitleClicked:function(){this.$("#@suggestions, #@button_row").show(),this.$("#@outstanding_requests").hide()}}),exports.ActionBarA2ALink=Component.extend({onLoad:function(){this.$("#@toggle_link").click(this.fnbind(function(){return this.parent().toggleA2ASection(),!1})),this.$("#@toggle_link").hover(this.fnbind(function(){return this.parent().loadA2ASection(),!1}))}}),exports.ActionBarA2ASection=Component.extend({onLoad:function(){this.a2a_loaded=!1},toggleSection:function(){this.$("#@section").toggle()},loadSection:function(){this.a2a_loaded||this.serverCall("load_a2a").contentFor(this.$("#@a2a_section"),{parentCID:this.cid}).success(this.fnbind(function(){this.a2a_loaded=!0})).send()}});\'),require.install("app/view/board",function(require,a,b){var c=require("w2.quora").Component,d=require("webnode2"),e=require("view/floating_voting_buttons"),f=require("cookies");a.BoardMain=c.extend({onLoad:function(){this.installScrollHandlers(this.setPosition)},onUnload:function(){this.uninstallScrollHandlers()},setPosition:function(){var a=this,b=$(window).height(),c=200,d=$(".header").outerHeight()+10,f=38,g=$(".header").css("position");clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this.fnbind(function(){var a=$(window).scrollTop();$(this.$("#@board_main").find(".board_blog_item").get().reverse()).each(function(){var b=$(this).find(".rating_buttons_wrapper").eq(0);if(b.find(".rating_options").is(":visible")){var h=$(this).find(".board_item_content").find(".row").eq(0),i=h.height()+15;if(b.offset().top>a-c&&b.offset().top<a+c&&i>c&&g=="fixed"){f=55;var j=0;e.enableFloatingVotingButtons(a,b,h.offset().top,i,d,f,j)}else a<b.offset().top&&(b.removeClass("voting_buttons_fixed"),b.removeClass("voting_buttons_absolute"),b.removeAttr("style"))}})}),0)}}),a.BoardItemMain=c.extend({onLoad:function(){this.installScrollHandlers(this.setPosition)},onUnload:function(){this.uninstallScrollHandlers()},setPosition:function(){var a=this,b=$(".header").outerHeight()+10,c=38,d=$(".header").css("position");clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this.fnbind(function(){var a=$(window).scrollTop(),f=this.$("#@board_item").find(".rating_buttons_wrapper").eq(0);if(f.find(".rating_options").is(":visible")&&d=="fixed"){var g=this.$("#@board_item").find(".board_item_content").find(".row").eq(0),h=g.height()+15;c=55;var i=0;e.enableFloatingVotingButtons(a,f,g.offset().top,h,b,c,i)}else f.removeClass("voting_buttons_fixed"),f.removeClass("voting_buttons_absolute"),f.removeAttr("style")}),0)}}),a.BoardMuteLink=c.extend({onLoad:function(){this.$("#@board_mute_link").click(this.fnbind(function(){this.serverCall("mute").kwargs({bid:this.bid}).liveMutate().send()}))}}),a.BoardUnmuteLink=c.extend({onLoad:function(){this.$("#@board_unmute_link").click(this.fnbind(function(){this.serverCall("unmute").kwargs({bid:this.bid}).liveMutate().send()}))}}),a.AddFollowersToBoardListItem=c.extend({onLoad:function(){var a=this;this.$("#@link").hover(function(b){a.$("#@link").addClass("action_button")},function(b){a.$("#@link").removeClass("action_button")}),this.$("#@link").click(this.fnbind(function(){return this.serverCall("request").liveMutate().send(),!1}))}}),a.BoardNameLink=c.extend({onLoad:function(a){this.$("#@link").mousedown(this.fnbind(function(){f.setQfeedLog(this,"BoardClickthrough"),f.setQueryLog(this,"BoardClickthrough")}))}}),a.BoardDialogComposer=c.extend({onLoad:function(){this.lookup("input").$("#@name").focus(),this.lookup("input").$("#@controls").show()}}),a.CreateBoard=c.extend({onLoad:function(){this.submitted=!1,this.$("#@name").focus(this.fnbind(function(){this.$("#@controls").show()})),this.$("#@create").click(this.fnbind(function(){var a=this.$("#@name").val();if(a&&!this.submitted){this.submitted=!0;var b=this.lookup("privacy").getType();this.$("#@name").addClass("disabled"),this.serverCall("create").kwargs({name:a,privacy:b}).success(this.fnbind(function(a){this.$("#@name").val(""),a[0]=="/"&&(document.location=a)})).liveMutate().send()}return!1}))}}),a.BoardSelectorWrapper=c.extend({onLoad:function(){this.cQuery(":selector").$("#@input").bind("focus",this.fnbind(function(a){this.removeBoardMissingError()}))},addMissingBoardError:function(){this.cQuery(":selector").$("#@input").addClass("input_validation_error"),this.$("#@no_board_error").show()},removeBoardMissingError:function(){this.cQuery(":selector").$("#@input").removeClass("input_validation_error"),this.$("#@no_board_error").hide()}})}),require.installLazy("app/view/topic/topic_list",\'var Component=require("w2.quora").Component;exports.TopicListItems=Component.extend({onLoad:function(){this.$("#@view_more_link a").click(this.fnbind(function(){return this.$("#@view_more_link, #@additional_topics").toggleClass("hidden"),!1}))}}),exports.QuestionTopicSuggestionRow=Component.extend({onLoad:function(){var a=this;a.timeout=100,this.$("#@active_suggestion_row").hover(function(b){a.$("#@remove_suggestion").removeClass("hidden")},function(b){a.$("#@remove_suggestion").addClass("hidden")}),this.$("#@add").click(this.fnbind(function(){this.serverCall("add_topic").liveMutate().send();var b=this.fnbind(function(){this.hideSuggestion()});return setTimeout(b,a.timeout),!1})),this.$("#@remove_suggestion a").click(this.fnbind(function(){this.serverCall("remove_suggestion").send();var b=this.fnbind(function(){this.hideSuggestion()});return setTimeout(b,a.timeout),!1}))},hideSuggestion:function(){this.$("#@suggestion_row").hide(),this.parent().suggestionHiddenCallback()}}),exports.QuestionTopicSuggestions=Component.extend({onLoad:function(a){a&&this.should_open_suggestions&&this.toggleSuggestionsSection(),this.$("#@show_selector a").click(this.fnbind(function(){this.$("#@show_selector").hide(),this.$("#@topic_selector").removeClass("hidden"),this.lookup("selector").focus()}))},toggleSuggestionsSection:function(){this.lookup("topics_editor")&&this.lookup("topics_editor").do_toggle()},suggestionHiddenCallback:function(){this.suggestion_count--,this.suggestion_count<=0&&this.$("#@section").hide()}}),exports.TopicListItem=Component.extend({onLoad:function(){this.$("#@remove_topic").tooltip({contents:"Remove"}).click(this.fnbind(function(a){return this.serverCall("remove_topic").liveMutate().send(),!1})),this.$("#@make_primary").click(this.fnbind(function(a){return this.serverCall("make_primary").liveMutate().send(),!1})),this.$("#@clear_primary").click(this.fnbind(function(a){return this.serverCall("clear_primary").liveMutate().send(),!1})),this.$("#@remove_topic").hover(this.fnbind(function(a){this.$("#@topic_list_item").addClass("hover")}),this.fnbind(function(a){this.$("#@topic_list_item").removeClass("hover")}))}});\'),require.installLazy("app/view/topic/topic_redesign",\'var Component=require("w2.quora").Component,windowManager=require("window_manager");exports.RelatedTopicsSection=Component.extend({onLoad:function(a){var b=this;b.$("#@more").click(this.fnbind(function(){return b.$("#@truncated").hide(),b.$("#@expanded").show(),!1}))}}),exports.TopicReviewsSection=Component.extend({onLoad:function(a){this.$("#@request").click(this.fnbind(function(){return this.serverCall("request_reviews").success(this.fnbind(function(a){this.successCallback(a)})).liveMutate().send(),!1}))},successCallback:function(a){windowManager.sameDomainURL(a)&&windowManager.navigateTo(a)}}),exports.TopicPhotoCard=Component.extend({onLoad:function(){var a=this;a.$("#@card").click(a.fnbind(function(b){a.onCardClick()}))},onCardClick:function(){this.is_following?this.serverCall("unfollow").kwargs({tid:this.tid}).success(this.fnbind(function(){this.optimistic_render||this.successCallback()})).liveMutate().send():this.serverCall("follow").kwargs({tid:this.tid}).success(this.fnbind(function(){this.optimistic_render||this.successCallback()})).liveMutate().send()},successCallback:function(){return}}),exports.NUXTopicPhotoCard=exports.TopicPhotoCard.extend({onCardClick:function(){this.optimistic_render&&(this.is_following?this.optimisticUnfollow():this.optimisticFollow())},optimisticFollow:function(){this.$("#@card").addClass("following")},optimisticUnfollow:function(){this.$("#@card").removeClass("following")}}),exports.DynamicNUXTopicPhotoCard=exports.NUXTopicPhotoCard.extend({onCardClick:function(){this._super.apply(this,arguments),this.is_following?this.lookup("dynamic_interests_grid").removeTopic(this.tid):this.lookup("dynamic_interests_grid").addRow(this.tid),this.is_following=!this.is_following}}),exports.AddQuestionsinTopicSection=Component.extend({onLoad:function(){this.questions_started_index=0,this.questions_completed_index=0,this.questions_added_text=[],this.questions_added_url=[]},newQuestionPending:function(a){var b=$("<div/>").addClass("new_question_row").addClass("e_col").addClass("w4_5").append($("<span/>").addClass("pending_question_text").text(a));this.questions_started_index==0?(this.$("#@recently_added_list").empty(),this.$("#@recently_added_list").append(b),this.$("#@recently_added_section").slideDown(100)):(b.hide(),this.$("#@recently_added_list").append(b),b.slideDown(100)),this.questions_started_index++},newQuestionAdded:function(a,b){this.serverCall("new_question_row").kwargs({qid:b}).contentFor(this.$("#@recently_added_list").children().eq(this.questions_completed_index),{parentCID:this.cid,useLoadingSpinner:!1}).send(),this.questions_completed_index++},focusEditor:function(){this.lookup("add_questions_inline").focusQuestionBox()}}),exports.TopicAddQuestionsButton=exports.NUXTopicPhotoCard.extend({onLoad:function(){this.$("#@ask_link").click(this.fnbind(function(){return this.$("#@ask_link").hide(),this.parent().$("#@add_questions_section").show(),this.parent().lookup("add_questions_in_topics").focusEditor(),!1}))}}),exports.AddSuggestedTopicItem=Component.extend({onLoad:function(){this.$("#@item").click(this.fnbind(function(){return this.$("#@item").hasClass("not_yet_added")&&(this.serverCall("add_topic_to_question").send(),this.$("#@item").removeClass("not_yet_added")),!1}))}}),exports.TopicTaxonomyTreeEditor=Component.extend({onLoad:function(){this.initSortable(),this.configureEditorControls(),this.configureAlphabetization(),this.configureDroppable(),this.setupKeyboardShortcut(),this.initEditHistory()},initSortable:function(){var a=this;require("jquery.ui-1.8.17"),require("jquery.mjs.nestedSortable"),require("jquery.tinysort"),this.$("#@editor").nestedSortable({handle:"div",tabSize:25,listType:"ul",items:"li.topic_item",toleranceElement:"> div",disableNesting:"hide_children",placeholder:"draggable_topic_placeholder",stop:function(b,c){a.updateEmptyListPlaceholders(),a.saveTaxonomy()},start:function(b,c){var d=$(c.item).eq(0);a.$("#@editor .draggable_topic_placeholder").css("width",d.css("width")).css("height",d.css("height"))}})},initEditHistory:function(){this.taxonomyHistory=[],this.taxonomyDomHistory=[],this.taxonomyHistoryIndex=-1,this.pushCurrentTaxonomyToHistory()},configureDroppable:function(){var a=this;this.$("#@editor li.topic_item").find(".name, .question_list").droppable({tolerance:"pointer",over:function(a,b){$(b.draggable).hasClass("taxonomy_question_row")&&$(a.target).parents(".topic_item").eq(0).addClass("drop_target_for_questions")},out:function(a,b){$(a.target).parents(".topic_item").eq(0).removeClass("drop_target_for_questions")},drop:function(b,c){var d=$(b.target).parents(".topic_item").eq(0),e=$(c.helper);if(e.hasClass("taxonomy_question_row")){var f=d.find("> .question_list");e.hide().detach().find(".manage").hide(),e.prependTo(f).show(),f.slideDown();var g=e.attr("qid"),h=d.attr("tid");a.addQuestionToTopic(g,h),d.removeClass("drop_target_for_questions"),b.stopPropagation()}}})},configureEditorControls:function(){this.showing_questions=!1,this.$("#@toggle_questions").click(this.fnbind(function(){return this.$("#@editor .question_list").css("display",""),this.$("#@editor").toggleClass("show_question_lists"),this.showing_questions=!this.showing_questions,this.showing_questions?this.$("#@toggle_questions").text("Hide Questions"):this.$("#@toggle_questions").text("Show Questions"),!1}))},setupKeyboardShortcut:function(){var a=require("keystrokes"),b=this;a.on([90],function(a){b.undoOrRedoTaxonomyEdit(a)})},addQuestionToTopic:function(a,b){this.serverCall("add_question_to_topic").kwargs({qid:a,tid:b}).send()},newTopicAdded:function(a){var b=a.value;this.serverCall("get_new_topic").contentFor(this.$("#@new_topic_staging_area"),{parentCID:this.cid}).kwargs({topic_name:b}).success(this.fnbind(function(a){var b=this.$("#@new_topic_staging_area").contents();this.$("#@editor").append(b),this.saveTaxonomy(),this.configureDroppable()})).send()},updateEmptyListPlaceholders:function(){this.$("#@editor .child_topic_list").each(function(){var a=$(this).find("> .no_children_placeholder").eq(0);$(this).find("> li").length>0?a.hide():a.show()})},configureAlphabetization:function(){this.$("#@alphabetize").click(this.fnbind(function(){return this.$("#@editor > li.topic_item").tsort(".name_text"),this.saveTaxonomy(),!1}))},saveTaxonomy:function(a){a||this.pushCurrentTaxonomyToHistory();var b=this.getTaxonomyTree(this.$("#@editor_wrapper"),0),c=this;this.serverCall("save_taxonomy").kwargs({taxonomy_tree:b}).success(function(a){a&&c.undoTaxonomyEdit()}).send()},getCurrentTaxonomy:function(){var a=this.getTaxonomyTree(this.$("#@editor_wrapper"),0);return a},getTaxonomyTree:function(a,b){var c=this,d=[];return a.find("> ul > li.topic_item").each(function(a){d.push(c.getTaxonomyTree($(this),b+1))}),{tid:parseInt(a.attr("tid")),children:d}},pushCurrentTaxonomyToHistory:function(){var a=this.getCurrentTaxonomy(),b=this.$("#@editor_wrapper").clone();if(this.equalsPreviousTaxonomy(a))this.taxonomyDomHistory[this.taxonomyHistoryIndex-1]=b;else{while(this.taxonomyHistory.length>this.taxonomyHistoryIndex+1)this.taxonomyHistory.pop(),this.taxonomyDomHistory.pop();this.taxonomyHistory.push(a),this.taxonomyDomHistory.push(b),this.taxonomyHistoryIndex+=1}},debugTaxonomy:function(a,b){b||(b=0);var c=Array(4*b).join(" ")+"->"+a.tid;console.log(c);for(var d=0;d<a.children.length;d++)this.debugTaxonomy(a.children[d],b+1)},undoOrRedoTaxonomyEdit:function(){var a=navigator.platform.match("Mac"),b=a?!!event.metaKey:!!event.ctrlKey;if(!b)return;var c=!!event.shiftKey;c?this.redoTaxonomyEdit():this.undoTaxonomyEdit()},redoTaxonomyEdit:function(){if(this.taxonomyHistoryIndex>=this.taxonomyHistory.length-1)return;this.taxonomyHistoryIndex+=1,this.applyTaxonomyEdit()},undoTaxonomyEdit:function(){if(this.taxonomyHistory.length<=1)return;if(this.taxonomyHistoryIndex<=0)return;this.taxonomyHistoryIndex-=1,this.applyTaxonomyEdit()},applyTaxonomyEdit:function(){var a=this.taxonomyDomHistory[this.taxonomyHistoryIndex].clone();this.$("#@editor_wrapper").replaceWith(a),this.reregisterAfterUndo(this),this.initSortable(),this.configureDroppable(),this.saveTaxonomy(!0)},reregisterAfterUndo:function(a){var b=a.children().filter(function(a){return a instanceof exports.TreeEditorItemActions});for(var c=0;c<b.length;c++)b[c].registerCallBacks();var d=a.children().filter(function(a){return a instanceof exports.TreeEditorTopicItem});for(var c=0;c<d.length;c++)this.reregisterAfterUndo(d[c])},equalsPreviousTaxonomy:function(a){var b=this.taxonomyHistory[this.taxonomyHistory.length-1];return JSON.stringify(a)==JSON.stringify(b)}}),exports.TreeEditorTopicItem=Component.extend({onLoad:function(){this.configureHoverState(),this.configureEditControls()},configureHoverState:function(){var a=this.$("#@item"),b=this.$("#@name");b.hover(function(b){a.addClass("ready_to_sort")},function(b){a.removeClass("ready_to_sort")})},removeTopic:function(){var a=this;a.$("#@item").fadeOut(250,function(){a.$("#@item").remove(),a.lookup("tree_editor").saveTaxonomy()})},toggleEditControls:function(){this.$("#@name_text, #@name_editor, #@update_name, #@cancel_update_name").toggle(),this.$("#@name_editor input").focus()},configureEditControls:function(){var a=this;a.$("#@update_name").click(function(){return a.updateTopicNameFromInput(),!1}),a.$("#@name_editor input").keydown(function(b){b.keyCode==13&&a.updateTopicNameFromInput()}),a.$("#@cancel_update_name").click(this.fnbind(function(){this.toggleEditControls()}))},updateTopicNameFromInput:function(){var a=this.$("#@name_editor input").val();this.$("#@name_editor input").blur();var b=this.$("#@name_text").text();this.serverCall("update_name").kwargs({new_name:a}).success(this.fnbind(function(a){a["success"]==0&&(this.$("#@name_text").text(b),this.$("#@name_editor input").val(b))})).send(),this.$("#@name_text").text(a),this.toggleEditControls()},toggleShowingChildren:function(){this.$("#@item").toggleClass("hide_children")}}),exports.TopicTaxonomyQuestionListSection=Component.extend({onLoad:function(){require("jquery.ui-1.8.17"),this.setDraggable()},setDraggable:function(){this.$("#@list .taxonomy_question_row").draggable({revert:!0,revertDuration:0})}}),exports.TopicTaxonomyQuestionList=require("view/paged_list").PagedList.extend({onUpdate:function(a){this._super.apply(this,arguments),this.parent().setDraggable()}}),exports.TreeEditorItemActions=Component.extend({onLoad:function(){this.initState(),this.registerCallBacks()},initState:function(){this.is_showing_children=!1},registerCallBacks:function(){this.configureShowChildrenLink(),this.configureOptionsLink(),this.configureRemoveLink(),this.configureEditLink()},configureShowChildrenLink:function(){this.is_showing_children=!1,this.$("#@show_children").click(this.fnbind(function(){return this.parent().toggleShowingChildren(),this.is_showing_children=!this.is_showing_children,this.is_showing_children?this.$("#@show_children").text("Hide Children"):this.$("#@show_children").text("Show Children"),!1}))},configureRemoveLink:function(){this.$("#@remove").click(this.fnbind(function(){this.parent().removeTopic()}))},configureEditLink:function(){this.$("#@edit").click(this.fnbind(function(){return this.parent().toggleEditControls(),!1}))},configureOptionsLink:function(){this.$("#@menu_link").click(this.fnbind(function(){return this.$("#@menu_items").menu(this.$("#@menu_link"),{position_adjust:{top:8,left:4}}),!1}))}}),exports.TaxonomyEditorSuggestedChild=Component.extend({onLoad:function(){this.$("#@add").click(this.fnbind(function(){return this.lookup("tree_editor").newTopicAdded(this.topic_info),!1}))}}),exports.TopicTaxonomyQuestionListItem=Component.extend({onLoad:function(){this.$("#@remove").click(this.fnbind(function(){return this.$("#@row").slideUp(100),this.serverCall("remove_from_topic").send(),!1}))}}),exports.TopicAlertSettingToggle=Component.extend({onLoad:function(){this.$("#@enable").click(this.fnbind(function(){return this.serverCall("enable").liveMutate().send(),!1})),this.$("#@undo").click(this.fnbind(function(){return this.serverCall("undo_enable").liveMutate().send(),!1}))}}),exports.AddContentButtons=Component.extend({onLoad:function(a){this.board_post_editor_loaded=!1,this.$("#@create_board_link").click(this.fnbind(function(){var a=this.selectButton(this.$("#@create_board_link"));return a&&(this.showEditor("create_board"),this.cQuery(":input.input").$("#@name").focus()),!1}));var b=this;$.each($(".action_button_set .post_to_board"),function(a,c){$(c).click(function(){var a=parseInt($(c).attr("bid")),d=b.selectButton($(c));return d&&(b.showEditor("add_post"),b.cQuery(":post_editor.selector.selector").setInput(a)),!1})}),this.$("#@add_post_link").click(this.fnbind(function(){var a=this.selectButton(this.$("#@add_post_link"));return a&&(this.showEditor("add_post"),this.board_post_editor_loaded?this.cQuery(":post_editor.editor.editor").focus(!0):this.serverCall("load_board_post_editor").contentFor(this.$("#@add_post"),{parentCID:this.cid}).success(this.fnbind(function(a){this.board_post_editor_loaded=!0,this.cQuery(":post_editor.editor.editor").focus(!0)})).send()),!1})),this.$("#@ask_link").click(this.fnbind(function(){var a=this.selectButton(this.$("#@ask_link"));return a&&(this.showEditor("add_question"),this.cQuery(":navigator.navigator").focus(!0),this.serverCall("log_start_adding_question").send()),!1})),this.$("#@write_review_link").click(this.fnbind(function(){var a=this.selectButton(this.$("#@write_review_link"));return a&&this.showEditor("write_review"),!1}))},hideEditors:function(){$(".add_content_section .add_content_editors .add_content_editor").hide()},unselectButtons:function(){$(".add_content_section .add_content_buttons .add_content_link").removeClass("selected")},reset:function(){this.hideEditors(),this.unselectButtons()},showEditor:function(a){this.hideEditors(),this.$("#@"+a).show()},selectButton:function(a){return a.hasClass("selected")?(this.reset(),!1):(this.unselectButtons(),a.addClass("selected"),!0)}});\'\n),require.installLazy("app/view/signup/email_invite",\'var W2=require("webnode2"),Component=require("w2.quora").Component,windowManager=require("window_manager"),ModalSignupDialog=require("app/view/signup").ModalSignupDialog;exports.MobileInviteLandingPage=ModalSignupDialog.extend({onLoad:function(){this._super.apply(this,arguments),this.registerSubmitButton()},enableSumbitButton:function(){this.submit.removeAttr("disabled").removeClass(this.submit_button_disabled_class)},disableSumbitButton:function(){this.submit.attr("disabled","disabled"),this.submit.addClass(this.submit_button_disabled_class)},onClickSubmit:function(){return this.formFields.validate()?this._super.apply(this,arguments):(this.signupRpcPending=!1,this.spinner.hide(),this.disableSumbitButton(),!1)},registerSubmitButton:function(){this.formFields.bind("enable_submit",this.fnbind(function(){this.enableSumbitButton()})),this.formFields.bind("disable_submit",this.fnbind(function(){this.disableSumbitButton()})),this.submit.bind("click",this.fnbind(function(a){this.onClickSubmit()}))},initFormFields:function(){this.formFields=this.child("form_fields"),this.submit=this.formFields.$("#@submit"),this.spinner=this.formFields.$("#@spinner"),this.formFields.child("name_validator").validate(),this.formFields.child("email_validator").validate(),this.updateFormFieldFocus(),this.disableSumbitButton()},centerComponent:function(){var a=this.$("#@header").outerHeight(),b=this.$("#@content").outerHeight(),c=($(window).height()-(a+b))/2,d="fixed";c<0&&(c=0,d="absolute"),this.$("#@background").css({position:d}),this.$("#@header").css({"margin-top":c})},recordStep:function(a){this.serverCall("record_step").kwargs({step:a,code:this.code}).send()}});\'),require.installLazy("app/view/share/form",\'var Component=require("w2.quora").Component,W2=require("webnode2"),SocialConnector=require("app/view/share/connect").SocialConnector,ShareCheckboxBase=exports.ShareCheckboxBase=SocialConnector.extend({onLoad:function(){this.list_item=this.$("#@share_checkbox_list_item"),this.checkbox=this.$("#@checkbox"),this.action_link=this.$("#@action_link"),this.message_preview=this.$("#@message_preview"),this.message_preview_text=this.$("#@message_preview_text"),this.label_clickable=this.$("#@label_clickable");if(this.isStateModified()&&!this.is_disabled){var a=this.state("checked");a?(this.checkbox.attr("checked","checked"),this.list_item.removeClass("is_not_checked")):(this.checkbox.removeAttr("checked"),this.list_item.addClass("is_not_checked"))}this.checkbox.change(this.fnbind(function(){var a=this.isChecked();if(a&&this.needs_action){this.remedyDisabled(),this.checkbox.removeAttr("checked");return}this.logCheckboxChangedJS(a),this.state("checked",a),a?this.list_item.removeClass("is_not_checked"):this.list_item.addClass("is_not_checked")})),this.label_clickable.click(this.fnbind(function(){this.checkbox.click()})),this.action_link.click(this.fnbind(function(){return this.is_disabled?this.remedyDisabled():this.editText(),!1}))},logCheckboxChangedJS:function(a){this.serverCall("log_checkbox_changed_js").kwargs({is_checked:a,share_info:this.share_info}).send()},isStateModified:function(){var a=this.state("checked");return typeof a!="undefined"},isChecked:function(){return this.checkbox.attr("checked")==="checked"},remedyDisabled:function(){},beginEditingText:function(){}});exports.ShareCheckboxTwitter=ShareCheckboxBase.extend({remedyDisabled:function(){this.connectTwitter()}}),exports.ShareCheckboxTwitterCompact=exports.ShareCheckboxTwitter.extend({onLoad:function(){this._super.apply(this,arguments),this.list_item.tooltip({contents:this.default_text})},remedyDisabled:function(){this.connectTwitter(this.fnbind(function(){this.checkbox.attr("checked","checked")}))}}),exports.ShareCheckboxFacebook=ShareCheckboxBase.extend({remedyDisabled:function(){var a=this;require("facebook").maybePromptToPublish(a.fbUid,function(b,c,d){a.serverCall("connect_facebook").kwargs({fb_uid:b,access_token:c,expires_secs:d}).liveMutate().send()},function(){a.child("fb_different_account").show()})}}),exports.ShareCheckboxFacebookCompact=exports.ShareCheckboxFacebook.extend({}),exports.ShareForm=Component.extend({getValues:function(){var a={};return this.lookup("checkbox_fb",!0)&&(a.fb=this.lookup("checkbox_fb").isChecked()),this.lookup("checkbox_tw",!0)&&(a.tw=this.lookup("checkbox_tw").isChecked()),a}});\'),require.installLazy("app/view/share/dialog",\'var Component=require("w2.quora").Component,W2=require("webnode2"),SocialConnector=require("app/view/share/connect").SocialConnector,windowManager=require("window_manager"),cookies=require("cookies");exports.ShareFormDialog=SocialConnector.extend({onLoad:function(){function b(){a.showHidePlaceholder()}function c(){setTimeout(b,10)}function d(){a.child("message_editor").focus()}var a=this;a.results=[],a.shareButton=a.$("#@share_button"),a.shortURLCopyField=a.$("#@short_url_copy_field"),a.editor=a.child("message_editor").$("#@editor"),a.editorPlaceholder=a.child("message_editor").$("#@editor_placeholder"),a.twitterCheckbox=a.$("#@twitter_checkbox"),a.twitterConnectLink=a.$("#@twitter_connect_link"),a.twitterCharCount=a.$("#@twitter_char_count"),a.facebookCheckbox=a.$("#@facebook_checkbox"),a.facebookConnectLink=a.$("#@facebook_connect_link"),a.linkedinCheckbox=a.$("#@linkedin_checkbox"),a.linkedinConnectLink=a.$("#@linkedin_connect_link"),a.blogCheckbox=a.$("#@blog_checkbox"),a.boardCheckbox=a.$("#@board_checkbox"),a.boardSelectorContainer=a.$("#@board_selector_container"),a.boardSelector=a.child("selector_wrapper").child("selector"),a.sendCheckbox=a.$("#@send_checkbox"),a.multiSelectorContainer=a.$("#@multi_selector_container"),a.typeahead=a.child("typeahead"),typeof window.history.pushState=="function"&&(windowManager.isParamInURL(""+window.location,"share")||window.history.pushState(null,"",windowManager.addParamToURL(""+window.location,"share","1"))),a.child("message_editor").whenOnLoaded(function(){a.updateShareEditorLinkDisplay(),a.countTwitterChars()}),a.disableSubmitIfNecessary(),a.isChecked(a.boardCheckbox)&&a.boardSelectorContainer.show(),a.isChecked(a.sendCheckbox)&&a.multiSelectorContainer.show(),a.editor.bind("keyup",c).bind("keydown",c),a.editor.bind("keyup",a.fnbind(a.countTwitterChars)).bind("focus",a.fnbind(a.countTwitterChars)),a.editorPlaceholder.bind("click",d),a.twitterCheckbox.click(function(){a.updateShareEditorLinkDisplay();if(!a.isChecked(a.twitterCheckbox)){a.disableSubmitIfNecessary(),a.twitterCharCount.addClass("hidden");return}a.countTwitterChars();if(a.twUid){a.enableSubmit();return}return a.connectTwitter(a.fnbind(a.checkTwitter)),!1}),a.twitterConnectLink.click(function(){return a.connectTwitter(a.fnbind(a.checkTwitter)),!1}),a.newFacebookCredentials={},a.facebookCheckbox.click(function(){a.updateShareEditorLinkDisplay();if(!a.isChecked(a.facebookCheckbox)){a.disableSubmitIfNecessary();return}if(a.canPublishActions){a.enableSubmit();return}return a.connectFacebook(),!1}),a.facebookConnectLink.click(function(){return a.connectFacebook(),!1}),a.linkedinCheckbox.click(function(){a.updateShareEditorLinkDisplay();if(!a.isChecked(a.linkedinCheckbox)){a.disableSubmitIfNecessary();return}if(a.liUid){a.enableSubmit();return}return a.connectLinkedin(a.fnbind(a.checkLinkedin)),!1}),a.linkedinConnectLink.click(function(){return a.connectLinkedin(a.fnbind(a.checkLinkedin)),!1}),a.blogCheckbox.click(function(){a.updateShareEditorLinkDisplay();if(!a.isChecked(a.blogCheckbox)){a.disableSubmitIfNecessary();return}a.enableSubmit()}),a.boardCheckbox.click(function(){a.updateShareEditorLinkDisplay();if(!a.isChecked(a.boardCheckbox)){a.boardSelectorContainer.hide(),a.disableSubmitIfNecessary();return}a.boardSelectorContainer.show(),a.enableSubmit()}),a.sendCheckbox.click(function(){a.updateShareEditorLinkDisplay();if(!a.isChecked(a.sendCheckbox)){a.typeahead.clear(),a.multiSelectorContainer.hide(),a.disableSubmitIfNecessary();return}a.multiSelectorContainer.show(),a.typeahead.$("#@input").focus()}),a.shortURLCopyField.click(function(){$(this).select()}),a.shareButton.click(function(){var b=a.checkboxValues();b.send=a.isChecked(a.sendCheckbox);var c=a.boardSelector.getBid(),d=a.boardSelector.getText();a.boardInfo.bid=c,a.boardInfo.name=c?null:d,a.boardInfo.is_submission=a.isSubmission;if(!a.atLeastOneChecked(b))return a.disableSubmit(),!1;var e=W2.Dialog.openerFor(a);cookies.setQfeedLog(e,"BoardPost"),cookies.setQueryLog(e,"BoardPost"),cookies.setTlog({type:"BoardPost"}),require("action_log").logSecondaryAction("Share",a.share_target),a.disableSubmit(),a.serverCall("dialog_submit_controller").kwargs({checkboxes:b,message:a.lookup("message_editor").serialize(),board_info:a.boardInfo,send_recipients:a.results}).success(function(b){b.success===!0?W2.Dialog.dialogFor(a).close_():(a.uncheckAll(),b.fbSuccess===!1&&(a.fbUid=b.fbUid,a.canPublishActions=!1),a.typeahead.clear(),b.sendSuccess===!1&&b.recipients.length>0&&($.each(b.recipients,function(b,c){a.typeahead.setValue(c.value,c)}),a.enableSubmit()))}).error(function(){a.enableSubmit()}).liveMutate().send()}),a.$("#@close").click(function(){return W2.Dialog.dialogFor(a).close_(),a.originalUrl&&typeof window.history.pushState=="function"&&window.history.pushState(null,"",a.originalUrl),!1})},disableSubmit:function(){this.shareButton.addClass("submit_button_disabled"),this.shareButton.attr("disabled","disabled")},enableSubmit:function(){this.shareButton.removeClass("submit_button_disabled"),this.shareButton.removeAttr("disabled")},regexUrl:/((?:https?:\\\\/\\\\/)?[a-zA-Z0-9](?:[-a-zA-Z0-9]*\\\\.)+[a-zA-Z]{2,}(?:\\\\/[^\\\\/\\\\s]+)*\\\\/?)(?:\\\\s|$)/gi,showHidePlaceholder:function(){this.child("message_editor").isEmpty()?this.editorPlaceholder.removeClass("hidden"):this.editorPlaceholder.addClass("hidden")},tweetLength:function(a){if(!a)return 0;var b=a.length,c=[];return a.replace(this.regexUrl,function(a,b){c.push(b)}),b-=c.join("").length,$.each(c,function(a,c){b+=c.match(/https:/)?23:22}),b+=23,b},countTwitterChars:function(){var a=this;a.whenOnLoaded(function(){var b=a.child("message_editor"),c=b.getText();if(c.length>0){a.twitterCharCount.hasClass("hidden")&&a.twitterCheckbox.attr("checked")&&a.twitterCharCount.removeClass("hidden");var d=140-a.tweetLength(c);d<0&&!a.twitterCharCount.hasClass("error")?a.twitterCharCount.addClass("error"):d>=0&&a.twitterCharCount.hasClass("error")&&a.twitterCharCount.removeClass("error"),a.twitterCharCount.text(d.toString()+" characters left")}else a.twitterCharCount.addClass("hidden")})},updateShareEditorLinkDisplay:function(){var a=this.child("message_editor");this.isChecked(this.twitterCheckbox)?a.isEmpty()&&a.appendAnchor():a.removeAnchor(),this.isChecked(this.facebookCheckbox)||this.isChecked(this.linkedinCheckbox)||this.isChecked(this.blogCheckbox)||this.isChecked(this.boardCheckbox)||this.isChecked(this.sendCheckbox)?this.editor.addClass("highlight-link"):this.editor.removeClass("highlight-link"),this.showHidePlaceholder()},checkboxValues:function(){var a=this,b={};return $.each(a.shareChannels,function(){b[this]=a.isChecked(a.$("#@"+this+"_checkbox"))}),b},atLeastOneChecked:function(a){var b=!1;return $.each(a,function(a,c){b=b||c}),b},uncheckAll:function(){var a=this;$.each(a.shareChannels,function(){a.$("#@"+this+"_checkbox").attr("checked",!1)}),a.disableSubmit()},disableSubmitIfNecessary:function(){var a=this.checkboxValues();!this.atLeastOneChecked(a)&&this.results.length===0&&this.disableSubmit()},connectFacebook:function(){var a=this;require("facebook").maybePromptToPublish(a.fbUid,function(b,c,d){a.serverCall("connect_facebook").kwargs({fb_uid:b,access_token:c,expires_secs:d}).liveMutate().send(),require("facebook").updatePermissions(function(b,c){b&&c.publish_stream?(a.canPublishActions=!0,a.facebookCheckbox.attr("checked",!0),a.facebookCheckbox.attr("disabled",!1),a.facebookConnectLink.hide(),a.enableSubmit()):b&&a.facebookConnectLink.text("Allow Permission to Post")}),a.updateShareEditorLinkDisplay()},function(){a.child("fb_different_account").show()})},checkTwitter:function(){var a=this;a.twitterCheckbox.attr("checked",!0),a.twitterCheckbox.attr("disabled",!1),a.twitterConnectLink.hide(),a.twUid=!0,a.updateShareEditorLinkDisplay(),a.enableSubmit()},checkLinkedin:function(){var a=this;a.linkedinCheckbox.attr("checked",!0),a.linkedinCheckbox.attr("disabled",!1),a.linkedinConnectLink.hide(),a.liUid=!0,a.updateShareEditorLinkDisplay(),a.enableSubmit()},updateResults:function(a){this.results=a,this.results.length>0||this.atLeastOneChecked(this.checkboxValues())?this.enableSubmit():this.disableSubmit()},setIsSubmission:function(a){this.isSubmission=a},hideDistroOptions:function(){},showDistroOptions:function(){},isChecked:function(a){return a.attr("checked")==="checked"}});var Ruleset=require("qed/rules").Ruleset,shareEditorRuleset=new Ruleset,shareEditorClassExp=/\\\\bshare_editor_link\\\\b/;shareEditorRuleset.addOkTag("a",function(a){if(shareEditorClassExp.test(a.className))return"a"}),shareEditorRuleset.addKeyHandler(65,require("qed/util").handleSelectAll),exports.ShareFormMessageEditor=Component.extend({onLoad:function(){this.editor=this.$("#@editor").get(0),this.anchor=this.$("#@editor a.share_editor_link").get(0),$("a",this.editor).addClass("share_editor_link").after("\xef\xbb\xbf").before("\xef\xbb\xbf"),this._qed=require("qed/edit").edit(this.editor,shareEditorRuleset),this._qed.modify(function(a,b){})},focus:function(){var a=this;a.whenOnLoaded(function(){a._qed.focus()})},appendAnchor:function(){var a=this;a.whenOnLoaded(function(){a._qed.modify(function(){a.$("#@editor").prepend(a.anchor)})})},removeAnchor:function(){var a=this;a.whenOnLoaded(function(){a._qed.modify(function(){$(a.anchor).remove()})})},isEmpty:function(){var a=this,b=a._qed.text(!0);return b=="\\\\n"||b==""},getText:function(){var a=this;return a._qed.text()},serialize:function(){var a=this._qed.html(!0),b=document.createElement("div");return b.innerHTML=a,$("a",b).remove(),{html:a,data:this.qlink_data||{},no_anchors:$(b).html()}}});\'),require.installLazy("app/view/layout/mobile",\'var Component=require("w2.quora").Component,cookies=require("cookies");exports.MobileFooter=Component.extend({onLoad:function(){this.$("#@full_site").click(this.fnbind(function(a){return cookies.cookie("m","0"),location.reload(!0),!1}))}});\'),require.installLazy("app/view/nux",\'var Component=require("w2.quora").Component,W2=require("webnode2"),cookies=require("cookies"),windowManager=require("window_manager");exports.NextLinkOrButton=Component.extend({onLoad:function(){this.$("#@next_button").click(this.fnbind(function(){cookies.setMessage("nux",[this.click_track_event,{completed:this.completed}])}))}}),exports.NuxAddProfilePicture=Component.extend({onLoad:function(){this.$("#@add_photo_button").click(this.fnbind(function(){return this.lookup("photo").lookup("add_link").editPhoto(),!1}))}}),exports.ProgressBar=Component.extend({onLoad:function(){this.$("#@progress_bar").css({width:this.getWidth()})},getWidth:function(){var a=parseInt(this.$("#@progress_bar_wrapper").css("min-width"),10),b=parseInt(this.$("#@progress_bar_wrapper").css("max-width"),10),c=this.curr/this.total*b;return Math.min(b,Math.max(c,a))},update:function(a){this.curr=a,this.$("#@progress_bar").animate({width:this.getWidth()})}}),exports.ProgressBarBeacon=Component.extend({onLoad:function(){this.lookup("progress_bar").update(this.curr)}}),exports.HeaderProgressBarBeacon=Component.extend({onLoad:function(){this.cQuery(":dialog.header_progress_bar").update(this.curr)}});\'),require.installLazy("app/view/nux/welcome",\'var Component=require("w2.quora").Component,cookies=require("cookies");exports.NUXStepLine=Component.extend({onLoad:function(a){var b=this.curr_step;this.serverCall("log_nux_step").send()}}),exports.NUXStepNumber=Component.extend({onLoad:function(a){this.$("#@nux_step_wrapper").click(this.fnbind(function(){if(this.$("#@nux_step_wrapper").hasClass("clickable")){var a=this.lookup("nux_step_line").curr_step,b=this.idx;this.lookup("nux_step_line").$("#@nux_steps").find(".curr").find("h2").removeClass("curr-text").addClass("text"),this.lookup("nux_step_line").$("#@nux_steps").find(".curr").removeClass("curr").addClass("clickable"),this.$("#@nux_step_title").addClass("curr-text").removeClass("text"),this.$("#@nux_step_wrapper").addClass("curr").removeClass("clickable"),this.lookup("nux_flow").$(".nux-step-"+a).hide(),this.lookup("nux_flow").$(".nux-step-"+b).show(),this.lookup("nux_step_line").curr_step=b,$("html").animate({scrollTop:0},500),$("body").animate({scrollTop:0},500)}}))}});var NUXTopicCard=exports.NUXTopicCard=Component.extend({onLoad:function(){this.$("#@card").click(this.fnbind(function(a){this.onCardClick()}))},trackCardClick:function(){cookies.setQfeedLog(this,"TopicFollow"),cookies.setQueryLog(this,"TopicFollow"),cookies.setTlog({type:"TopicFollow",tid:this.object_id})},doFollow:function(){return this.$("#@follow_button").hasClass("unfollow_button")?(this.$("#@card").removeClass("is-following").addClass("not-following"),this.$("#@follow_button").removeClass("unfollow_button").text("Follow"),this.serverCall("unfollow").kwargs({object_id:this.object_id}).liveMutate().send(),!1):(this.$("#@card").addClass("is-following").removeClass("not-following"),this.$("#@follow_button").addClass("unfollow_button").text("Unfollow"),this.followCallback(),this.serverCall("follow").kwargs({object_id:this.object_id}).liveMutate().send(),!1)},onCardClick:function(){this.trackCardClick(),this.doFollow()},followCallback:function(){}}),FollowSuggestionCard=exports.FollowSuggestionCard=NUXTopicCard.extend({onLoad:function(){this._super.apply(this,arguments),this.$("#@subtitle, #@name").click(this.fnbind(function(a){return event.stopPropagation(),!0}))},onCardClick:function(){this.doFollow()}});exports.FindTopicsCard=FollowSuggestionCard.extend({followCallback:function(){this.lookup("row").addRow(this.object_id)}}),exports.NextStepButton=Component.extend({onNextStep:function(){return this.next_step=="end"?window.location=this.after_nux_url:(this.serverCall("log_nux_step").send(),this.lookup("nux_step_line").$("#@nux_"+this.curr_step+"_step").find(".nux-step-wrapper").removeClass("curr").addClass("clickable"),this.lookup("nux_step_line").$("#@nux_"+this.curr_step+"_step").find("h2").removeClass("curr-text").addClass("text"),this.lookup("nux_step_line").$("#@nux_"+this.next_step+"_step").find(".nux-step-wrapper").addClass("curr").removeClass("clickable"),this.lookup("nux_step_line").$("#@nux_"+this.next_step+"_step").find("h2").addClass("curr-text").removeClass("text"),this.lookup("nux_flow").$("#@"+this.curr_step+"_wrapper").hide(),this.lookup("nux_flow").$("#@"+this.next_step+"_wrapper").show(),this.lookup("nux_step_line").curr_step=this.next_step_idx,$("html").animate({scrollTop:0},500),$("body").animate({scrollTop:0},500)),!1}}),exports.NUXContinueButton=exports.NextStepButton.extend({onLoad:function(a){this.$("#@next").click(this.fnbind(this.onNextStep))}}),exports.NUXTopicListItem=Component.extend({onLoad:function(a){this.initState("checked",!1);var b=this.$("#@topic_list_item"),c=this.$("#@checkbox");this.state("checked")?c.attr("checked","checked"):c.removeAttr("checked"),b.click(this.fnbind(function(){var a=this.lookup("follow_related_topics_top").tids,b=this.lookup("follow_related_topics_top").related_tids,d=$.inArray(this.tid,a);d!=-1?(this.state("checked",!1),c.removeAttr("checked"),a.splice(d,1),b--):(this.state("checked",!0),c.attr("checked","checked"),a.push(this.tid),b++,b>0&&b<=this.min_to_follow&&this.serverCall("log_nux_topic_checked").kwargs({num_followed:b}).send());var e=this.min_to_follow-b;b>0?(this.lookup("topics_step").$("#@topics_text").hide(),this.lookup("topics_step").$("#@topics_button").show()):(this.lookup("topics_step").$("#@topics_text").show(),this.lookup("topics_step").$("#@topics_button").hide());if(e>0){var f=e>1?"Topics":"Topic";this.lookup("follow_related_topics_top").$("#@unbutton").html("Choose "+e+" More "+f+" to Continue"),this.lookup("follow_related_topics_bottom").$("#@unbutton").html("Choose "+e+" More "+f+" to Continue"),this.lookup("follow_related_topics_top").$("#@follow_all").hide(),this.lookup("follow_related_topics_bottom").$("#@follow_all").hide(),this.lookup("follow_related_topics_top").$("#@unbutton").show(),this.lookup("follow_related_topics_bottom").$("#@unbutton").show()}else this.lookup("follow_related_topics_top").$("#@unbutton").hide(),this.lookup("follow_related_topics_bottom").$("#@unbutton").hide(),this.lookup("follow_related_topics_top").$("#@follow_all").show(),this.lookup("follow_related_topics_bottom").$("#@follow_all").show();this.lookup("follow_related_topics_top").related_tids=b,this.lookup("follow_related_topics_top").tids=a,this.lookup("follow_related_topics_bottom").tids=a}))}}),exports.NUXFollowRelatedTopicsButton=exports.NextStepButton.extend({onLoad:function(a){this.related_tids=0;var b=this;this.$("#@follow_all").click(function(){return b.serverCall("follow_all").kwargs({tids:b.tids}).liveMutate().success(function(){b.next_step=="end"&&b.onNextStep()}).send(),b.next_step!="end"&&b.onNextStep(),!1})}}),exports.SetPasswordForm=Component.extend({onLoad:function(){var a=this;a.$("#@set_password").click(function(){return a.setPassword(a.$("#@password").val()),!1})},setPassword:function(a){if(a.length<this.minimum_password_length){a1ert("Your password must be at least "+this.minimum_password_length+" characters.");return}return this.serverCall("set_password").kwargs({password:a}).liveMutate().send(),!1}});\'),require.installLazy("app/view/nux/dialog",\'var Component=require("w2.quora").Component,W2=require("webnode2"),windowManager=require("window_manager");exports.SetPasswordForm=Component.extend({onLoad:function(){this.$("#@password").focus(),this.$("#@form").submit(this.fnbind(this.onSubmit)),this.validPassword=!1,this.$("#@password").keyup(this.fnbind(this.onKeyup))},onKeyup:function(){var a=this,b=a.$("#@password").val().length;b<=2?(a.$("#@form").find(".error, .success").addClass("hidden"),a.$("#@submit").attr("disabled","disabled").addClass("submit_button_disabled")):b<5?(a.$("#@form").find(".error").removeClass("hidden"),a.$("#@form").find(".success").addClass("hidden"),a.validPassword=!1,a.$("#@submit").attr("disabled","disabled").addClass("submit_button_disabled")):b>75?(a.$("#@form").find(".error").removeClass("hidden"),a.$("#@form").find(".success").addClass("hidden"),a.validPassword=!1,a.$("#@submit").attr("disabled","disabled").addClass("submit_button_disabled")):(a.$("#@form").find(".error").addClass("hidden"),a.$("#@form").find(".success").removeClass("hidden"),a.validPassword=!0,a.$("#@submit").removeAttr("disabled").removeClass("submit_button_disabled"))},validate:function(){var a=this.$("#@password").val().length;return a<5||a>75?!1:(this.child("password_validator").validate(),!0)},onSubmit:function(){var a=this;return a.validPassword?(a.$("#@spinner").show(),a.$("#@form").find(".password_state").addClass("hidden"),a.serverCall("set_password").kwargs({password:a.$("#@password").val()}).success(function(){a.parent().onPasswordSet(!0)}).error(function(){a.parent().onPasswordSet(!1)}).send(),!1):!1}}),exports.ModalNuxDialogCloseIndicator=Component.extend({onLoad:function(){$(document).trigger("nux_dialog_close");var a=this.lookup("paged_feed",!0);a&&(a.shouldLogImpressions=!0)}}),exports.NewNuxWelcomeMessage=require("action_log").ActionableComponent.extend({onLoad:function(){this._super.apply(this,arguments);var a=this;$(document).bind("nux_dialog_close",function(){a.$("#@nux_welcome_message").removeClass("hidden")})}}),exports.ModalNuxDialog=Component.extend({onLoad:function(a){this.lastStep=null;var b=this.lookup("paged_feed",!0);b&&(b.shouldLogImpressions=!1),a&&this.serverCall("log_impression").send(),$(window).height()<600&&$(".dialog .dialog_wrapper").css("position","static")},hide:function(){this.$("#@modal_nux_wrapper").hide()}}),exports.InternalModalNuxDialogRenderer=exports.ModalNuxDialog.extend({onLoad:function(a){var b=this;this.curr_step=this.step_num,$("body").keydown(this.fnbind(function(a){a.keyCode==37&&b.curr_step>0?b.changeStep(b.curr_step,--b.curr_step):a.keyCode==39&&b.curr_step<b.num_steps-1&&b.changeStep(b.curr_step,++b.curr_step)})),this.$("#@modal_nux_wrapper .step_name").click(function(){if(!$(this).hasClass("curr_step")){var a=parseInt($(this).attr("id"));b.changeStep(b.curr_step,a),b.curr_step=a}})},changeStep:function(a,b){this.$("#@modal_nux_wrapper .dialog_wrapper.step_"+a).addClass("hidden"),this.$("#@modal_nux_wrapper .step_name.step_name_"+a).removeClass("curr_step"),this.$("#@modal_nux_wrapper .dialog_wrapper.step_"+b).removeClass("hidden"),this.$("#@modal_nux_wrapper .step_name.step_name_"+b).addClass("curr_step")}}),exports.NuxDialogStep=Component.extend({onLoad:function(){this.serverCall("record_step").kwargs({step_name:this.step_name+"_impr"}).send()},gotoStep:function(a){this.cQuery(":dialog.header_progress_bar").update(a),this.serverCall("goto_step").kwargs({step_num:a}).liveMutate().send().success(this.fnbind(this.refreshFeed)).error(this.fnbind(this.refreshFeed))},closeDialogAndGoToStep:function(a){this.dialog_close=!1;if(a>this.num_steps){var b=this.lookup("dialog",!0);b&&b.hide(),$(document).trigger("nux_dialog_close"),this.dialog_close=!0}this.gotoStep(a)},gotoNextStep:function(){this.closeDialogAndGoToStep(this.step_num+1)},skipNextStep:function(){var a=this.step_num+2;this.dialog_close=!1,a<=this.num_steps?this.cQuery(":dialog.header_progress_bar").update(this.step_num+1):(this.lookup("dialog").hide(),$(document).trigger("nux_dialog_close"),this.dialog_close=!0),this.serverCall("skip_step").kwargs({step_num:this.step_num+1}).liveMutate().send().success(this.fnbind(this.refreshFeed)).error(this.fnbind(this.refreshFeed))},stepUrl:function(a){return"#step="+a},standaloneRefreshFeed:function(){this.serverCall("standalone_refresh_feed").liveMutate().send()},refreshFeed:function(){this.serverCall("refresh_feed").send()}}),exports.NuxDialogSetPasswordStep=exports.NuxDialogStep.extend({onPasswordSet:function(a){this.gotoNextStep()}}),exports.NuxDialogRefreshFeedStep=exports.NuxDialogStep.extend({onLoad:function(){this._super.apply(this,arguments),this.serverCall("refresh_feed").liveMutate().success(this.fnbind(function(){return this.delayed_next_step(),!1})).error(this.fnbind(function(){return this.delayed_next_step(),!1})).send()},delayed_next_step:function(){this.context!="internal_page"&&setTimeout(this.fnbind(this.gotoNextStep),8e3)},gotoStep:function(a){this.serverCall("goto_step").kwargs({step_num:a}).send()}}),exports.NuxDialogContinueButton=Component.extend({events:{"click #@next":"onClick"},onLoad:function(){this.standalone&&(this.standalone_dialog=this.lookup("standalone"),this.dialog_step=this.parent())},finishStep:function(){this.$("#@next").hasClass("submit_button_disabled")||(this.standalone?(this.dialog_step.standaloneRefreshFeed(),W2.Dialog.dialogFor(this.standalone_dialog).close_()):this.parent()&&this.parent().gotoNextStep())},onClick:function(){return this.finishStep(),!1}}),exports.NewNuxDialogFindFriendsContinueButton=exports.NuxDialogContinueButton.extend({events:{"click #@next":"onClick"},onClick:function(a){a.preventDefault(),this.serverCall("button_clicked").success(this.fnbind(this.finishStep)).error(this.fnbind(this.finishStep)).send()}}),exports.NewNuxDialogFindMoreFriendsContinueButton=exports.NuxDialogContinueButton.extend({events:{"click #@next":"onClick"},onLoad:function(){this.fuid_map={};for(var a=0;a<this.fuids.length;++a)this.fuid_map[this.fuids[a]]=!0},onClick:function(a){a.preventDefault(),this.serverCall("button_clicked").kwargs({fuid_map:this.fuid_map}).success(this.fnbind(this.finishStep)).error(this.fnbind(this.finishStep)).send()},add:function(a){this.fuid_map[a]=!0},remove:function(a){this.fuid_map[a]=!1},addAll:function(){for(var a in this.fuid_map)this.add(a)},removeAll:function(){for(var a in this.fuid_map)this.remove(a)}}),exports.NuxDialogInferredFriendsContinueButton=exports.NuxDialogContinueButton.extend({events:{"click #@next":"onClick"},onLoad:function(){this.fuid_map={};for(var a=0;a<this.unchecked_fuids.length;++a)this.fuid_map[this.unchecked_fuids[a]]=!1;for(var b=0;b<this.checked_fuids.length;++b)this.fuid_map[this.checked_fuids[b]]=!0},onClick:function(a){a.preventDefault(),this.serverCall("button_clicked").kwargs({fuid_map:this.fuid_map,prechecked_fuids:this.checked_fuids}).success(this.fnbind(this.finishStep)).error(this.fnbind(this.finishStep)).send()},add:function(a){this.fuid_map[a]=!0},remove:function(a){this.fuid_map[a]=!1},addAll:function(){for(var a in this.fuid_map)this.add(a)},removeAll:function(){for(var a in this.fuid_map)this.remove(a)}}),exports.NewNuxDialogFindFriendsSkipButton=exports.NuxDialogContinueButton.extend({events:{"click #@next":"onClick"},onClick:function(a){a.preventDefault(),this.serverCall("button_clicked").success(this.fnbind(this.finishStep)).error(this.fnbind(this.finishStep)).send()},finishStep:function(){this.$("#@next").hasClass("submit_button_disabled")||(this.standalone?W2.Dialog.dialogFor(this).close_():this.parent()&&this.parent().gotoNextStep())}}),exports.NewNuxDialogConnectOpengraphSkipButton=exports.NuxDialogContinueButton.extend({events:{"click #@next":"onClick"},finishStep:function(){this.standalone&&W2.Dialog.dialogFor(this).close_()},onClick:function(a){a.preventDefault(),this.serverCall("button_clicked").success(this.fnbind(this.finishStep)).error(this.fnbind(this.finishStep)).send()}}),exports.NuxDialogFollowMinimumTopicsContinueButton=exports.NuxDialogContinueButton.extend({onLoad:function(){this._super.apply(this,arguments),this.button_continue_text="Continue",this.standalone&&(this.button_continue_text="OK")},onClick:function(a){a.preventDefault();if(this.$("#@next").hasClass("submit_button_disabled"))return!1;this.serverCall("button_clicked").kwargs({tids:this.lookup("dynamic_interests_grid").newTids}).liveMutate().success(this.fnbind(this.finishStep)).error(this.fnbind(this.finishStep)).send()},updateButton:function(a){var b=this.min_interests-a;b>1?this.$("#@next").addClass("submit_button_disabled").text(b+" More Topics to Continue"):b==1?this.$("#@next").addClass("submit_button_disabled").text(b+" More Topic to Continue"):this.$("#@next").removeClass("submit_button_disabled").text(this.button_continue_text)}}),exports.DynamicInterestsGridBase=Component.extend({newTids:[],addRow:function(a){this.followed_tids.push(a),this.newTids.push(a),this.updateContinueButton(),this.$("#@more").append(\\\'<span class="new_items"></span>\\\');var b=this.$("#@more").children(".new_items").last();this.serverCall("load_row").kwargs({tid:a}).contentFor(b,{parentCID:this.cid}).send()},getFollowingCount:function(){return this.followed_tids.length},removeTopic:function(a){var b=$.inArray(a,this.followed_tids);b!=-1&&this.followed_tids.splice(b,1),this.updateContinueButton(),b=$.inArray(a,this.newTids),b!=-1&&this.newTids.splice(b,1)},updateContinueButton:function(){this.lookup("continue_button").updateButton(this.getFollowingCount())}}),exports.InterestsGridItems=Component.extend({onLoad:function(){var a=this.new_tids;for(var b=0;b<a.length;b++)this.lookup("dynamic_interests_grid").shown_tids.push(a[b])}});\'),require.installLazy("app/view/nux/find_friends",\'var Component=require("w2.quora").Component,W2=require("webnode2"),Twitter=require("twitter"),Facebook=require("facebook"),PagedList=require("view/paged_list").PagedList;exports.TwitterFindFriendsButton=Twitter.TwitterConnectButton.extend({events:{"click #@twitter_follow_button":"onClick"},onClick:function(){return this.needs_oauth&&(this.serverCall("button_clicked").send(),this.connect()),!1},onLogin:function(a,b){this.showLoading(),this.serverCall("connect_twitter").kwargs({access_token_key:a.key,screen_name:b.twitter_screen_name,tw_uid:b.twitter_uid,"protected":b["protected"]}).liveMutate().send()},onLoginFailed:function(){this.serverCall("record_connect_failure").send()},showLoading:function(){this.$("#@normal_text").hide(),this.$("#@loading_text").show(),this.$("#@row").addClass("complete")}}),exports.TwitterFindFriendsChecklistStep=exports.TwitterFindFriendsButton.extend({events:{"click #@step_link":"onClick"},onLogin:function(a,b){this.serverCall("connect_twitter").kwargs({access_token_key:a.key,screen_name:b.twitter_screen_name,tw_uid:b.twitter_uid,"protected":b["protected"]}).send()}}),exports.FacebookFindFriendsButton=Facebook.FacebookConnectButton.extend({events:{"click #@facebook_follow_button":"onClick"},onClick:function(){return Facebook.isInitialized()&&(this.serverCall("button_clicked").send(),this.connect()),!1},onLogin:function(a){this.showLoading(),this._super.apply(this,arguments)},closeDialog:function(){this.trigger("fb_connected"),this.standalone&&(W2.Dialog.dialogFor(this).close_(),this.parent()&&this.parent().standaloneRefreshFeed())},_onLogin:function(a){var b=this.serverCall("connect_facebook").kwargs({fb_access_token:a.accessToken,fb_uid:a.userID,expires:a.expiresIn});this.live_mutate&&b.liveMutate(),b.success(this.fnbind(this.closeDialog)).error(this.fnbind(this.closeDialog)).send()},onLoginFailed:function(){this.serverCall("record_connect_failure").send()},showLoading:function(){this.$("#@normal_text").hide(),this.$("#@loading_text").show(),this.$("#@row").addClass("complete")}}),exports.FacebookFindFriendsAndContinueButton=exports.FacebookFindFriendsButton.extend({onLoginFailed:function(){this.standalone?W2.Dialog.dialogFor(this).close_():this.serverCall("login_failed").liveMutate().send(),this.serverCall("record_connect_failure").send()}}),exports.ConnectOpengraphContinueButton=exports.FacebookFindFriendsAndContinueButton.extend({onLoginFailed:function(){this.standalone&&W2.Dialog.dialogFor(this).close_(),this.serverCall("record_connect_failure").send()}}),exports.FriendFollowIndicatorLink=Component.extend({events:{"click #@toggle":"onClick"},onLoad:function(){this.toggle=this.$("#@toggle"),this.continue_button=this.lookup("continue_button")},onClick:function(){this.$("#@toggle").toggleClass("selected"),this.$("#@toggle").toggleClass("unselected"),this.toggle.hasClass("selected")?this.continue_button.add(this.fuid):this.continue_button.remove(this.fuid),$(document).trigger("friendFollowChanged")}}),exports.FriendToggleCheckbox=Component.extend({events:{"click #@friend_row":"onClick"},onLoad:function(){this.checkbox=this.$("#@friend_row").find(":checkbox"),this.checkbox.change(this.fnbind(function(){this.checkbox.prop("checked",!this.checkbox.prop("checked"))})),this.continue_button=this.lookup("continue_button")},onUnload:function(){this.checkbox.unbind()},onClick:function(){this.checkbox.prop("checked",!this.checkbox.prop("checked")),this.checkbox.prop("checked")?(this.continue_button.add(this.fuid),this.$("#@friend_row").find(".follow_button").addClass("unfollow_button").text("Following")):(this.continue_button.remove(this.fuid),this.$("#@friend_row").find(".follow_button").removeClass("unfollow_button").text("Follow"))}}),exports.UnfollowedFriendsToggleLink=Component.extend({events:{"click #@add":"onAddClick","click #@remove":"onRemoveClick"},onLoad:function(){this.friends_list=$(this.lookup("friends_list").$("#@friends_list")),this.continue_button=this.lookup("continue_button"),$(document).bind("friendFollowChanged",this.fnbind(this.onFriendFollowChanged)),this.onFriendFollowChanged()},onUnload:function(){$(document).unbind("friendFollowChanged")},onFriendFollowChanged:function(){var a=this.friends_list.find(".selected");a.length>0?(this.$("#@add").hide(),this.$("#@remove").show()):(this.$("#@add").show(),this.$("#@remove").hide())},setFriendFollowState:function(a){this.friends_list.find(".follow_toggle").addClass(a?"selected":"unselected"),this.friends_list.find(".follow_toggle").removeClass(a?"unselected":"selected")},onAddClick:function(){this.continue_button.addAll(),this.setFriendFollowState(!0),this.onFriendFollowChanged(),this.serverCall("button_clicked").kwargs({button_name:"add_all"}).send()},onRemoveClick:function(){this.continue_button.removeAll(),this.setFriendFollowState(!1),this.onFriendFollowChanged(),this.serverCall("button_clicked").kwargs({button_name:"remove_all"}).send()}}),exports.UnfollowedInferredFriendsToggleLink=Component.extend({events:{"click #@add":"onAddClick","click #@remove":"onRemoveClick"},onLoad:function(){this.friends_list=$(this.lookup("inferred_friends_dialog").$("#@friends_list")),this.continue_button=this.lookup("continue_button")},changeAll:function(a){this.friend_toggles.prop("checked",a),a==1?this.friends_list.find(".follow_button").addClass("unfollow_button").text("Following"):this.friends_list.find(".follow_button").removeClass("unfollow_button").text("Follow")},updateFriendsList:function(){if(!this.action)return;this.friend_toggles=this.friends_list.find(":checkbox"),this.changeAll(this.action=="add_all"?!0:!1)},onAddClick:function(){this.friend_toggles=this.friends_list.find(":checkbox"),this.action="add_all",this.changeAll(!0),this.friends_list.find(".follow_toggle").addClass("selected"),this.friends_list.find(".follow_toggle").removeClass("unselected"),this.$("#@add").hide(),this.$("#@remove").show(),this.continue_button.addAll(),this.serverCall("button_clicked").kwargs({button_name:this.action}).send()},onRemoveClick:function(){this.friend_toggles=this.friends_list.find(":checkbox"),this.action="remove_all",this.changeAll(!1),this.friends_list.find(".follow_toggle").addClass("unselected"),this.friends_list.find(".follow_toggle").removeClass("selected"),this.$("#@add").show(),this.$("#@remove").hide(),this.continue_button.removeAll(),this.serverCall("button_clicked").kwargs({button_name:this.action}).send()}}),exports.UnfollowedFriendsToggleCheckbox=Component.extend({events:{"click #@checkbox":"onCheckboxClick"},onLoad:function(){this.friends_list=$(this.lookup("friends_list").$("#@friends_list")),this.continue_button=this.lookup("continue_button"),this.master_toggle=this.$("#@checkbox")},changeAll:function(a){this.friend_toggles.prop("checked",a)},onCheckboxClick:function(){this.friend_toggles=this.friends_list.find(":checkbox"),this.master_toggle.prop("checked")?(this.continue_button.addAll(),this.action="add_all"):(this.continue_button.removeAll(),this.action="remove_all"),this.changeAll(this.master_toggle.prop("checked")),this.serverCall("button_clicked").kwargs({button_name:this.action}).send()}}),exports.UnfollowedInferredFriendsToggleCheckbox=Component.extend({action:null,events:{"click #@checkbox":"onCheckboxClick"},onLoad:function(){this.friends_list=$(this.lookup("inferred_friends_dialog").$("#@friends_list")),this.master_toggle=this.$("#@checkbox"),this.continue_button=this.lookup("continue_button")},changeAll:function(a){this.friend_toggles.prop("checked",a)},updateFriendsList:function(){if(!this.action)return;this.friend_toggles=this.friends_list.find(":checkbox");if(!this.friend_toggles||!this.master_toggle)return;this.changeAll(this.master_toggle.prop("checked"))},onCheckboxClick:function(){this.friend_toggles=this.friends_list.find(":checkbox"),this.master_toggle.prop("checked")?(this.continue_button.addAll(),this.action="add_all"):(this.continue_button.removeAll(),this.action="remove_all"),this.changeAll(this.master_toggle.prop("checked")),this.serverCall("button_clicked").kwargs({button_name:this.action}).send()}}),exports.InferredFriendsList=PagedList.extend({onUpdate:function(a){this._super.apply(this,arguments);var b=this.lookup("select_all_toggle");b&&b.updateFriendsList()}});\'\n),require.installLazy("app/view/top_writers",\'var Component=require("w2.quora").Component;exports.TopWritersSignup=Component.extend({onLoad:function(){this.$("#@top_writers_signup").click(this.fnbind(function(){var a=this.$("#@mailing_address").val(),b=this.$("#@email_address").val(),c=this.$("#@tshirt_size").val(),d=this.$("#@tshirt_color").val();return this.serverCall("top_writer_signup").kwargs({mailing_address:a,email_address:b,tshirt_size:c,tshirt_color:d}).send(),!1}))}});\'),require.installLazy("app/view/group",\'var Component=require("w2.quora").Component,fixable=require("view/fixable"),W2=require("webnode2"),windowManager=require("window_manager");require("dialog"),exports.AddGroupMain=Component.extend({onLoad:function(){this.$("#@name").focus(),this.headerGroupName=this.lookup("group_header").$("#@group_name"),this.defaultText=this.headerGroupName.text(),this.autoSubdomainMode=!0,this.subdomainAvailable=!1,this.$("#@name").keyup(this.fnbind(function(){this.setText(),this.checkOkToCreate()})),this.$("#@name").change(this.fnbind(function(){this.setText()})),this.$("#@subdomain").keyup(this.fnbind(function(){this.autoSubdomainMode=!1,this.$("#@subdomain").val(this.cleanSubdomain(this.$("#@subdomain").val())),this.checkSubdomainAvailablity(),this.checkOkToCreate()})),this.$("#@add_cover_photo").click(this.fnbind(function(){return $(".group_header").addClass("has_cover_photo"),$(".group_header").addClass("group_domain_"+this.getSubdomain()),!1})),this.$("#@add_icon").click(this.fnbind(function(){return $(".logo").addClass("has_group_icon"),$(".logo").addClass("group_icon_"+this.getSubdomain()),!1})),this.$("#@create").click(this.fnbind(function(){return this.createGroup(),!1}))},checkSubdomainAvailablity:function(){var a=this.$("#@subdomain").val();this.$("#@subdomain").val().length>4&&this.serverCall("check_subdomain").kwargs({subdomain:a}).contentFor(this.$("#@availability"),{parentCID:this.cid}).success(this.fnbind(function(b){a&&!$(".create_group .availability .input_invalid").length?this.subdomainAvailable=!0:this.subdomainAvailable=!1,this.checkOkToCreate()})).send()},createGroup:function(){var a=this.getKwargs();a&&this.serverCall("create").kwargs(a).success(this.fnbind(function(a){a&&(document.location=a)})).liveMutate().send()},getKwargs:function(){var a=["name","subdomain","invites"],b={name:this.getName(),subdomain:this.getSubdomain(),logo:[],header_image:[],privacy:this.getPrivacy(),invites:this.getInvites(),message:this.getMessage()};return $.each(a,function(a,c){if(!b[c]||b[c]==undefined||b[c]=="")b=!1}),b},getName:function(){return this.$("#@name").val()},getSubdomain:function(){return this.subdomainAvailable?this.$("#@subdomain").val():null},getPrivacy:function(){return this.child("privacy_options_menu").child("options").privacy},getMessage:function(){return this.$("#@invite_message").val()},getInvites:function(){return this.results},setText:function(){var a=this.getName();a?(this.headerGroupName.text(a),this.headerGroupName.removeClass("light")):(this.headerGroupName.text(this.defaultText),this.headerGroupName.addClass("light")),this.autoSubdomainMode&&(this.$("#@subdomain").val(this.cleanSubdomain(a)),this.checkSubdomainAvailablity())},checkOkToCreate:function(){return this.getKwargs()&&this.invitesOk()&&this.subdomainAvailable?(this.enableSubmit(),!0):(this.disableSubmit(),!1)},cleanSubdomain:function(a){return a.replace(/ /g,"").replace(/[^a-zA-Z\\\\.]+/g,"").toLowerCase()},enableSubmit:function(){this.$("#@create").removeClass("submit_button_disabled")},disableSubmit:function(){this.$("#@create").addClass("submit_button_disabled")},updateResults:function(a){this.results=a,this.checkOkToCreate()?this.enableSubmit():this.disableSubmit()},invitesOk:function(){return this.results.length>=1}}),exports.CreateGroupPrivacyOptions=Component.extend({onLoad:function(){var a=this;this.create_group_form=this.lookup("options_menu").lookup("typeahead"),this.$("#@privacy_options_menu").find(".menu_list_item").click(function(){a.resetPrivacyOptionMenu(),a.non_secret_groups_enabled&&($(this).hasClass("public")&&a.setPrivacyOptionPublic(),$(this).hasClass("private")&&a.setPrivacyOptionPrivate()),$(this).hasClass("secret")&&a.setPrivacyOptionSecret()}),a.non_secret_groups_enabled?a.setPrivacyOptionPublic():a.setPrivacyOptionSecret()},resetPrivacyOptionMenu:function(){this.$("#@privacy_options_menu").find(".menu_list_item_link").removeClass("selected"),this.create_group_form.$("#@people").find(".people_label").addClass("hidden"),this.create_group_form.$("#@people").find(".people_subtitle").addClass("hidden"),this.lookup("options_menu").$("#@privacy").find(".privacy_description").addClass("hidden")},setPrivacyOptionPublic:function(){this.add_members_for_public_enabled?this.showPublicGroupText():this.showNonPublicGroupText(),this.$("#@public_option").addClass("selected"),this.lookup("options_menu").$("#@menu_link").html("Public"),this.lookup("options_menu").$("#@public_description").removeClass("hidden"),this.privacy="public"},setPrivacyOptionPrivate:function(){this.showNonPublicGroupText(),this.$("#@private_option").addClass("selected"),this.lookup("options_menu").$("#@menu_link").html("Private Content"),this.lookup("options_menu").$("#@private_description").removeClass("hidden"),this.privacy="private"},setPrivacyOptionSecret:function(){this.showNonPublicGroupText(),this.$("#@secret_option").addClass("selected"),this.lookup("options_menu").$("#@menu_link").html("Secret Group"),this.lookup("options_menu").$("#@secret_description").removeClass("hidden"),this.privacy="secret"},showPublicGroupText:function(){this.create_group_form.$("#@add_people").removeClass("hidden"),this.create_group_form.$("#@add_subtitle").removeClass("hidden")},showNonPublicGroupText:function(){this.create_group_form.$("#@invite_people").removeClass("hidden"),this.create_group_form.$("#@invite_subtitle").removeClass("hidden")}}),exports.GroupSettingsUpdateMain=Component.extend({onLoad:function(){this.headerGroupName=this.lookup("group_header").lookup("group_name_link").$("#@group_name"),this.defaultText=this.headerGroupName.text(),this.settings=this.$("#@settings"),this.subdomainOk=!0,this.lookup("content").registerTextArea(this.child("description").$("#@description")),this.child("name").$("#@name").keyup(this.fnbind(function(){this.setText(),this.checkOkToUpdate()})),this.child("description").$("#@description").keyup(this.fnbind(function(){this.checkOkToUpdate()})),this.child("subdomain").$("#@subdomain").keyup(this.fnbind(function(){this.autoSubdomainMode=!1,this.subdomainOk=!1,this.child("subdomain").$("#@subdomain").val(this.cleanSubdomain(this.child("subdomain").$("#@subdomain").val())),this.checkSubdomainAvailablity(),this.checkOkToUpdate()})),this.$("#@update").click(this.fnbind(function(){return this.updateGroup(),!1}))},checkSubdomainAvailablity:function(){var a=this.child("subdomain").$("#@subdomain").val(),b=this.child("subdomain").$("#@current_subdomain").val(),c=this.child("subdomain").$("#@availability").find("strong").html();a&&a.length>4&&this.serverCall("check_subdomain").kwargs({subdomain:a}).contentFor(this.child("subdomain").$("#@availability"),{parentCID:this.cid}).success(this.fnbind(function(a){!this.hasNewSubdomain()||!$(".availability .input_invalid").length?(this.subdomainOk=!0,this.hasNewSubdomain()||this.clearAvailability()):this.subdomainOk=!1,this.checkOkToUpdate()})).send()},checkOkToUpdate:function(){return this.getKwargs()&&(this.hasNewName()||this.hasNewDescription()||this.hasNewSubdomain())&&this.subdomainOk?(this.enableSubmit(),!0):(this.disableSubmit(),!1)},cleanSubdomain:function(a){return a.replace(/ /g,"").replace(/[^a-zA-Z\\\\.]+/g,"").toLowerCase()},enableSubmit:function(){this.$("#@update").removeClass("submit_button_disabled")},disableSubmit:function(){this.$("#@update").addClass("submit_button_disabled")},clearAvailability:function(){this.child("subdomain").$("#@availability").empty()},updateGroup:function(){var a=this.getKwargs();this.clearAvailability(),this.disableSubmit(),a&&this.serverCall("update").kwargs(a).success(this.fnbind(function(a){a&&(document.location=a),this.settings.find(".editor_view").addClass("hidden"),this.settings.find(".current_view").removeClass("hidden")})).liveMutate().send()},getKwargs:function(){var a=["name","subdomain"],b={nid:this.nid,name:this.getName(),description:this.getDescription(),subdomain:this.getSubdomain()};return $.each(a,function(a,c){if(!b[c]||b[c]==undefined||b[c]=="")b=!1}),b},getName:function(){return this.child("name").$("#@name").val()},getDescription:function(){return this.child("description").$("#@description").val()||null},getSubdomain:function(){return this.child("subdomain").$("#@subdomain").val()||null},hasNewName:function(){var a=this.child("name").$("#@name").val(),b=this.child("name").$("#@current_name").html();return $.trim(a)!=b},hasNewDescription:function(){var a=this.child("description").$("#@description").val(),b=this.child("description").$("#@current_description").html();return a!=b},hasNewSubdomain:function(){var a=this.child("subdomain").$("#@subdomain").val(),b=this.child("subdomain").$("#@current_subdomain").html();return a!=b},setText:function(){var a=this.getName();a?(this.headerGroupName.text(a),this.headerGroupName.removeClass("light")):(this.headerGroupName.text(this.defaultText),this.headerGroupName.addClass("light")),this.autoSubdomainMode&&(this.child("subdomain").$("#@subdomain").val(this.cleanSubdomain(a)),this.checkSubdomainAvailablity())}}),exports.GroupMembersMain=Component.extend({onLoad:function(){var a=this.$("#@left_col");fixable.makeFixable({element:a,width_dep:!0,height_dep:!0,min_height:a.outerHeight()+a.offset().top}),fixable.makeFixable({element:this.$("#@group_members_bar"),width_dep:!0,height_dep:!0})}}),exports.GroupPrivacyOptions=Component.extend({onLoad:function(){this.non_secret_groups_enabled&&(this.lookup("public").$("#@public").click(this.fnbind(function(){this.serverCall("make_public").kwargs({nid:this.nid}).liveMutate().send()})),this.lookup("private").$("#@private").click(this.fnbind(function(){this.serverCall("make_private").kwargs({nid:this.nid}).liveMutate().send()}))),this.lookup("secret").$("#@secret").click(this.fnbind(function(){this.serverCall("make_secret").kwargs({nid:this.nid}).liveMutate().send()}))}}),exports.GroupInviteSettings=Component.extend({onLoad:function(){this.$("#@allow_admins").click(this.fnbind(function(){this.serverCall("allow_admins").kwargs({nid:this.nid}).liveMutate().send()})),this.$("#@allow_members").click(this.fnbind(function(){this.serverCall("allow_members").kwargs({nid:this.nid}).liveMutate().send()}))}}),exports.GroupAnnouncementItem=Component.extend({onLoad:function(){this.$("#@announcement_title").click(this.fnbind(function(){$(".announcement_editor").addClass("hidden"),$(".announcement_item").removeClass("hidden"),$(".editor_view").addClass("hidden"),$(".current_view").removeClass("hidden"),this.$("#@announcement_item").addClass("hidden"),this.$("#@announcement_editor").removeClass("hidden")}))}}),exports.AcceptRequestLink=Component.extend({onLoad:function(){this.$("#@accept_request").click(this.fnbind(function(){this.serverCall("accept_request").kwargs({nid:this.nid,target_uid:this.uid}).liveMutate().send()}))}}),exports.RejectInviteLink=Component.extend({onLoad:function(){this.$("#@reject_invite").click(this.fnbind(function(){this.serverCall("reject_invite").kwargs({nid:this.nid}).liveMutate().send()}))}}),exports.CancelInviteLink=Component.extend({onLoad:function(){this.$("#@cancel_invite").click(this.fnbind(function(){this.serverCall("cancel_invite").kwargs({nid:this.nid,target_uid:this.uid}).liveMutate().send()}))}}),exports.AddAdminLink=Component.extend({onLoad:function(){this.$("#@add_admin").click(this.fnbind(function(){this.serverCall("add_admin").kwargs({nid:this.nid,target_uid:this.uid}).liveMutate().send()}))}}),exports.RemoveAdminLink=Component.extend({onLoad:function(){this.$("#@remove_admin").click(this.fnbind(function(){this.serverCall("remove_admin").kwargs({nid:this.nid,target_uid:this.uid}).liveMutate().send()}))}}),exports.BanMemberTextLink=Component.extend({onLoad:function(){this.$("#@ban").click(this.fnbind(function(){this.close(),this.serverCall("ban").kwargs({nid:this.nid,target_uid:this.uid}).liveMutate().send()}))},close:function(){$("#generic_dialog").length?$("#generic_dialog").remove():require("webnode2").Dialog.dialogFor(this).close_()}}),exports.AddMembersSelector=Component.extend({onLoad:function(){this.$("#@selector_wrapper").find(".question_box").focus()},updateResults:function(a){this.results=a},focus:function(){this.lookup("people_selector").focus(!0)},clear:function(){this.lookup("people_selector").reset()},setTo:function(a){a&&a!=""&&this.serverCall("add").kwargs({nid:this.nid,target_uid:a}).success(this.fnbind(function(){this.focus()})).liveMutate().send()}}),exports.JoinGroupLink=Component.extend({onLoad:function(){this.$("#@join_group").click(this.fnbind(function(){this.serverCall("join_group_action").kwargs({uid:this.uid,nid:this.nid}).success(this.fnbind(function(a){a&&(document.location=a)})).liveMutate().send()}))}}),exports.LeaveGroupLink=Component.extend({onLoad:function(){this.should_show_dialog?this.lookup("leave_group_dialog_link").$("#@link").click(this.fnbind(function(){this.hideMenu()})):this.lookup("leave_group_link").$("#@leave_group").click(this.fnbind(function(){this.hideMenu()}))},hideMenu:function(){$(document).find(".nav_menu").addClass("hidden"),$(document).find(".has_nav_menu").removeClass("hover")}}),exports.LeaveGroupRegularLink=Component.extend({onLoad:function(){this.$("#@leave_group").click(this.fnbind(function(){this.serverCall("leave_group").kwargs({nid:this.nid}).success(this.fnbind(function(a){a&&(document.location=a)})).liveMutate().send()}))}}),exports.LeaveGroupDialog=Dialog.extend({onLoad:function(a){this._super.apply(this,arguments),this.setSuccessCallback(this.fnbind(function(a){a&&windowManager.navigateTo(a)}))}}),exports.AddMembersMultiSelector=Component.extend({onLoad:function(){this.lookup("typeahead").$("#@input").focus(),this.$("#@invite").click(this.fnbind(function(){return this.sendInvite(),!1}))},updateResults:function(a){this.results=a,this.checkOkToInvite()},getKwargs:function(){var a={nid:this.nid,invites:this.getInvites(),message:this.getMessage()};return a},getInvites:function(){return this.results},invitesOk:function(){return this.results.length>0},getMessage:function(){return this.$("#@invite_message").val()},checkOkToInvite:function(){return this.invitesOk()?(this.enableSubmit(),!0):(this.disableSubmit(),!1)},enableSubmit:function(){this.$("#@invite").removeClass("submit_button_disabled")},disableSubmit:function(){this.$("#@invite").addClass("submit_button_disabled")},getMessage:function(){return this.$("#@invite_message").val()},getInvites:function(){return this.results},clearForm:function(){this.$("#@message").hide(),this.$("#@invite_message").val(""),this.lookup("typeahead").$("#@input").val(""),this.results="",this.disableSubmit()},sendInvite:function(){var a=this.getKwargs();a&&this.serverCall("invite").kwargs(a).liveMutate().success(this.fnbind(function(){this.clearForm()})).send()}}),exports.InviteMembersDialog=require("app/view/group").AddMembersMultiSelector.extend({onLoad:function(){this.lookup("typeahead").$("#@input").focus(),this.$("#@invite").click(this.fnbind(function(){return this.sendInvite(),!1})),this.$("#@cancel").click(this.fnbind(function(){return this.close(),!1}))},close:function(){$("#generic_dialog").length?$("#generic_dialog").remove():require("webnode2").Dialog.dialogFor(this).close_()},sendInvite:function(){var a=this.getKwargs();a&&(this.close(),this.serverCall("invite").kwargs(a).liveMutate().success(this.fnbind(function(){this.clearForm()})).send())}}),exports.PostGroupAnnouncement=Component.extend({onLoad:function(){this.$("#@title").focus(),this.$("#@title").keyup(this.fnbind(function(){this.checkOkToPost()})),this.$("#@post_announcement").click(this.fnbind(function(){return this.postAnnouncement(),!1}))},checkOkToPost:function(){return this.getTitle()?(this.enableSubmit(),!0):(this.disableSubmit(),!1)},enableSubmit:function(){this.$("#@post_announcement").removeClass("submit_button_disabled")},disableSubmit:function(){this.$("#@post_announcement").addClass("submit_button_disabled")},getTitle:function(){return this.$("#@title").val()||null},getContent:function(){return this.child("editor").serialize()||null},postAnnouncement:function(){var a={title:this.getTitle(),content:this.getContent()};a&&this.serverCall("post").kwargs(a).liveMutate().send()}}),exports.GroupAnnouncementsUpdateMain=Component.extend({onLoad:function(){this.announcements=this.$("#@announcements"),this.cQuery(":update.editor").whenOnLoaded(this.fnbind(function(){this.current_content=this.getContent()})),this.current_title=this.getTitle(),this.lookup("content").registerTextArea(this.child("update").$("#@title")),this.lookup("content").registerTextArea(this.cQuery(":update.editor").$("#@editor")),this.child("update").$("#@title").keyup(this.fnbind(function(){this.checkOkToUpdate()})),this.cQuery(":update.editor").$("#@editor").keyup(this.fnbind(function(){this.checkOkToUpdate()})),this.$("#@update_announcement").click(this.fnbind(function(){return this.updateGroupAnnouncement(),!1})),this.$("#@remove_announcement").tooltip({contents:"Remove announcement"}),this.$("#@remove_announcement").click(this.fnbind(function(){return this.removeGroupAnnouncement(),!1}))},checkOkToUpdate:function(){return this.hasNewTitle()||this.hasNewContent()?(this.enableSubmit(),!0):(this.disableSubmit(),!1)},enableSubmit:function(){this.$("#@update_announcement").removeClass("submit_button_disabled")},disableSubmit:function(){this.$("#@update_announcement").addClass("submit_button_disabled")},updateGroupAnnouncement:function(){var a={title:this.getTitle(),content:this.getContent()};a&&this.serverCall("update").kwargs(a).success(this.fnbind(function(a){a&&(document.location=a),this.announcements.find(".editor_view").addClass("hidden"),this.announcements.find(".current_view").removeClass("hidden")})).liveMutate().send()},removeGroupAnnouncement:function(){this.serverCall("remove").success(this.fnbind(function(a){a&&(document.location=a)})).liveMutate().send()},getTitle:function(){return this.child("update").$("#@title").val()||null},getContent:function(){return this.cQuery(":update.editor").serialize()||null},hasNewTitle:function(){var a=this.getTitle();return $.trim(a)!=this.current_title},hasNewContent:function(){var a=this.getContent();return a["html"]!=this.current_content["html"]}}),exports.GroupCoverPhoto=Component.extend({onLoad:function(){fixable.makeFixable({element:this.$("#@group_cover_photo"),width_dep:!0,height_dep:!0})}});\'),require.installLazy("app/view/experimental/answer_prompt",\'var Component=require("w2.quora").Component,W2=require("webnode2");exports.PromptForAnswer=Component.extend({onLoad:function(){var a=this;a.dismissLink=a.$("#@dismiss_link"),a.shuffleLink=a.$("#@shuffle_link"),a.container=a.$("#@container"),a.dismissLink.click(function(){return a.serverCall("dismiss").kwargs({qid:a.qid,viewer:a.viewer}).send(),a.container.hide(),!1}),a.shuffleLink.click(function(){return a.serverCall("shuffle").kwargs({qid:a.qid,viewer:a.viewer}).send(),!1})}});\'),require.installLazy("app/view/user/setup_",\'var Component=require("w2.quora").Component;exports.ChecklistStep=Component.extend({dialogActive:!1,onLoad:function(){this.$("#@step_link").click(this.fnbind(function(a){a.preventDefault();if(this.dialogActive)return;this.dialogActive=!0,this.short_name=="follow_topics"?this.dialog(!1).opt("width",720).opt("left","50%").opt("dialogClass","modal_nux_dialog modal_new_nux_dialog large_dialog_wrapper").load("get_step_dialog").close(this.fnbind(this.onDialogClose)):this.dialog(!1).opt("width",500).opt("left","50%").opt("dialogClass","modal_nux_dialog modal_new_nux_dialog").load("get_step_dialog").close(this.fnbind(this.onDialogClose))}))},onDialogClose:function(){this.dialogActive=!1,this.serverCall("mark_dialog_step_complete").send()}}),exports.ChecklistLinkStep=Component.extend({onLoad:function(){this.$("#@step_link").click(this.fnbind(function(){this.serverCall("log_link_click").send()}))}});\'),require.install("view/toggle_list",function(require,a,b){var c=require("w2.quora").Component,d=require("view/toggle");a.ToggledList=d.ToggledComponent.extend({onLoad:function(){var a=this.lookup("view_more_button",!0);a&&a.$("#@view_more_link").click(this.fnbind(function(){return this.toggle(),!1}))}}),a.ViewMoreLink=c.extend({onLoad:function(){this.$("#@view_more_link").click(this.fnbind(function(){this.$("#@view_more_link").addClass("hidden"),this.$("#@view_more_loading_text").removeClass("hidden")}))}})}),require.installLazy("internal/view/app",\'var assert=require("assert").ok,cookie=require("cookies").cookie,Component=require("w2.quora").Component,domainExp=/\\\\.?\\\\bmobile\\\\..*quora\\\\.com$/i,dotExp=/(\\\\.)/,devices={iphone:{name:"iPhone",width:320,height:480,cookies:{iphone_app:"1",iphone_app_version:"3.0:150",android_app:null,android_app_version:null,m:"1",web_app_shim:"1"}},android:{name:"Android",width:430,height:600,cookies:{iphone_app:null,iphone_app_version:null,android_app:"1",android_app_version:"2.0:1000",m:"1",web_app_shim:"1"}},mweb:{name:"Mobile Web",width:320,height:480,cookies:{iphone_app:null,iphone_app_version:null,android_app:null,android_app_version:null,m:"1"}}};exports.AppMain=Component.extend({onLoad:function(){var a=this;this.frame=this.ge("@frame"),this.$("#@back").click(function(b){return a.backEnabled()&&a.frame.contentWindow.history.back(),b.preventDefault(),b.stopPropagation(),!1}),this.$("#@reload").click(function(b){return a.frame.contentWindow.location.reload(),b.preventDefault(),b.stopPropagation(),!1}),$(this.frame).load(function(){a.backEnabled()?a.$("#@back").show():a.$("#@back").hide(),a.$("#@title").html(a.frame.contentDocument.title),a.$("#@url_text").val(a.frame.contentWindow.location.href);var b=a.getCurrentDevice().width,c=$(a.frame.contentDocument.body).width();a.frame.width=parseInt(a.frame.width,10)+b-c}),$(".internal_app_frame_shortcut").click(function(b){return a.frame.src=b.target.href,b.preventDefault(),b.stopPropagation(),!1}),this.$("#@url_submit").click(function(b){return a.frame.src=a.$("#@url_text").val(),b.preventDefault(),!1}),this.$("#@search_submit").click(function(b){return a.frame.src="/search?q="+encodeURIComponent(a.$("#@search_text").val()),b.preventDefault(),!1}),this.$("#@component_inspector").click(function(b){a.frame.contentWindow.require("mobile_component/mobile_component_inspector").toggle()});var b=this.ge("@device"),c=b.value;b.options.length=0;for(var d in devices)b.options.add(new Option(devices[d].name,d));c in devices&&(b.value=c),$(b).change(function(b){cookie("internal_app_frame_device",b.target.value),a.loadURL(a.frame.src)}),this.loadURL(this.src)},loadURL:function(a){var b=this.getCurrentDevice();this.purgeConfusingMobileCookies();var c=b.cookies;for(var d in c)this.setMobileSubdomainCookie(d,c[d]);this.frame.width=b.width,this.frame.height=b.height,this.frame.src=a},backEnabled:function(){return this.frame.contentDocument.referrer!=window.location.href},getHost:function(){return this.parser||(this.parser=document.createElement("a"),this.parser.href=this.src),this.parser.host},getCurrentDevice:function(){return devices[this.ge("@device").value]},setMobileSubdomainCookie:function(a,b){var c=this.getHost(),d=domainExp.exec(c),e=d&&cookie(a,b,{domain:d[0],expires:b===null?-1:1e3});return assert(d),arguments.length===1?e:b},purgeConfusingMobileCookies:function(){var a=this.getHost(),b=a.split(dotExp),c="quora.com",d,e=this.getCurrentDevice().cookies;assert(b.pop()==="com"),assert(b.pop()==="."),assert(b.pop()==="quora");while(b.length>0){c=b.pop()+c;if(c.search(domainExp)!==0)for(d in e)cookie(d,null,{domain:c,expires:-1})}}});\'),!0,window.log&&window.log.enabled&&window.log("main","main-pre2 is loaded."),require("w2.timing").logTime("mainPre2ScriptEnd");rec(\'package\', \'Finish\', \'main-pre2.js\');'
p85
sb.